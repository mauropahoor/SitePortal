"use strict";var bO=Object.defineProperty,CO=Object.defineProperties,TO=Object.getOwnPropertyDescriptors,PM=Object.getOwnPropertySymbols,AO=Object.prototype.hasOwnProperty,SO=Object.prototype.propertyIsEnumerable,kM=(tt,De,O)=>De in tt?bO(tt,De,{enumerable:!0,configurable:!0,writable:!0,value:O}):tt[De]=O,FM=(tt,De)=>{for(var O in De||(De={}))AO.call(De,O)&&kM(tt,O,De[O]);if(PM)for(var O of PM(De))SO.call(De,O)&&kM(tt,O,De[O]);return tt},LM=(tt,De)=>CO(tt,TO(De));(self.webpackChunkSitePortal=self.webpackChunkSitePortal||[]).push([[179],{2011:(tt,De,O)=>{O.d(De,{Dh:()=>ae,GT:()=>ge,cc:()=>Ae,hO:()=>We,on:()=>$,pX:()=>oe,xv:()=>me});var f=O(5e3),L=O(127),R=O(5813);tt=O.hmd(tt);const se=["ngOnDestroy"],oe=(Ce,ze,He,Se={})=>new Proxy(Ce,{get:(Me,Ee)=>He.runOutsideAngular(()=>{var qe;if(Ce[Ee])return(null===(qe=null==Se?void 0:Se.spy)||void 0===qe?void 0:qe.get)&&Se.spy.get(Ee,Ce[Ee]),Ce[Ee];if(se.indexOf(Ee)>-1)return()=>{};const X=ze.toPromise().then(ce=>{const we=ce&&ce[Ee];return"function"==typeof we?we.bind(ce):we&&we.then?we.then(Z=>He.run(()=>Z)):He.run(()=>we)});return new Proxy(()=>{},{get:(ce,we)=>X[we],apply:(ce,we,Z)=>X.then(ee=>{var ie;const _e=ee&&ee(...Z);return(null===(ie=null==Se?void 0:Se.spy)||void 0===ie?void 0:ie.apply)&&Se.spy.apply(Ee,Z,_e),_e})})})}),ge=(Ce,ze)=>{ze.forEach(He=>{Object.getOwnPropertyNames(He.prototype||He).forEach(Se=>{Object.defineProperty(Ce.prototype,Se,Object.getOwnPropertyDescriptor(He.prototype||He,Se))})})};class he{constructor(ze){return ze}}const ae=new f.OlP("angularfire2.app.options"),me=new f.OlP("angularfire2.app.name");function $(Ce,ze,He){const Me="object"==typeof He&&He||{};Me.name=Me.name||"string"==typeof He&&He||"[DEFAULT]";const qe=L.Z.apps.filter(X=>X&&X.name===Me.name)[0]||ze.runOutsideAngular(()=>L.Z.initializeApp(Ce,Me));try{JSON.stringify(Ce)!==JSON.stringify(qe.options)&&U("error",`${qe.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(X){}return new he(qe)}const U=(Ce,...ze)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...ze)},re={provide:he,useFactory:$,deps:[ae,f.R0b,[new f.FiY,me]]};let We=(()=>{class Ce{constructor(He){L.Z.registerVersion("angularfire",R.q4.full,"core"),L.Z.registerVersion("angularfire",R.q4.full,"app-compat"),L.Z.registerVersion("angular",f.q4F.full,He.toString())}static initializeApp(He,Se){return{ngModule:Ce,providers:[{provide:ae,useValue:He},{provide:me,useValue:Se}]}}}return Ce.\u0275fac=function(He){return new(He||Ce)(f.LFG(f.Lbi))},Ce.\u0275mod=f.oAB({type:Ce}),Ce.\u0275inj=f.cJS({providers:[re]}),Ce})();function Ae(Ce,ze,He,Se,Me){const[,Ee,qe]=globalThis.\u0275AngularfireInstanceCache.find(X=>X[0]===Ce)||[];if(Ee)return function ke(Ce,ze){try{return Ce.toString()===ze.toString()}catch(He){return Ce===ze}}(Me,qe)||(fe("error",`${ze} was already initialized on the ${He} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:Me,was:qe})),Ee;{const X=Se();return globalThis.\u0275AngularfireInstanceCache.push([Ce,X,Me]),X}}const je=!!tt.hot,fe=(Ce,...ze)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(tt,De,O)=>{O.d(De,{q4:()=>Lo,iC:()=>ds,HU:()=>eu,vb:()=>Mc,JM:()=>Sc,u3:()=>nl});var f=O(5e3),L=O(5867),R=O(5861),se=O(9681),oe=O(2090),ge=O(4859),he=O(1877),ae=O(8766);const me="@firebase/installations",$="0.5.9",re=`w:${$}`,We="FIS_v2",ze=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function He(D){return D instanceof oe.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Me(D){return{token:D.token,requestStatus:2,expiresIn:ee(D.expiresIn),creationTime:Date.now()}}function Ee(D,b){return qe.apply(this,arguments)}function qe(){return(qe=(0,R.Z)(function*(D,b){const F=(yield b.json()).error;return ze.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function X({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ce(D,{refreshToken:b}){const M=X(D);return M.append("Authorization",function ie(D){return`${We} ${D}`}(b)),M}function we(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,R.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function ee(D){return Number(D.replace("s","000"))}function _e(D,b){return le.apply(this,arguments)}function le(){return(le=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=Se(D),K=X(D),Y=b.getImmediate({optional:!0});if(Y){const Dt=yield Y.getHeartbeatsHeader();Dt&&K.append("x-firebase-client",Dt)}const Ge={method:"POST",headers:K,body:JSON.stringify({fid:M,authVersion:We,appId:D.appId,sdkVersion:re})},gt=yield we(()=>fetch(F,Ge));if(gt.ok){const Dt=yield gt.json();return{fid:Dt.fid||M,registrationStatus:2,refreshToken:Dt.refreshToken,authToken:Me(Dt.authToken)}}throw yield Ee("Create Installation",gt)})).apply(this,arguments)}function Le(D){return new Promise(b=>{setTimeout(b,D)})}const zt=/^[cdef][\w-]{21}$/;function Ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function on(D){return function dt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return zt.test(M)?M:""}catch(D){return""}}function Sn(D){return`${D.appName}!${D.appId}`}const cn=new Map;function Jt(D,b){const M=Sn(D);_n(M,b),function Ri(D,b){const M=function wn(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=D=>{_n(D.data.key,D.data.fid)}),vr}();M&&M.postMessage({key:D,fid:b}),function Ni(){0===cn.size&&vr&&(vr.close(),vr=null)}()}(M,b)}function _n(D,b){const M=cn.get(D);if(M)for(const F of M)F(b)}let vr=null;const jn="firebase-installations-store";let Oi=null;function ft(){return Oi||(Oi=(0,ae.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(jn)}})),Oi}function xr(D,b){return gn.apply(this,arguments)}function gn(){return(gn=(0,R.Z)(function*(D,b){const M=Sn(D),K=(yield ft()).transaction(jn,"readwrite"),Y=K.objectStore(jn),Fe=yield Y.get(M);return yield Y.put(b,M),yield K.done,(!Fe||Fe.fid!==b.fid)&&Jt(D,b.fid),b})).apply(this,arguments)}function qt(D){return Er.apply(this,arguments)}function Er(){return(Er=(0,R.Z)(function*(D){const b=Sn(D),F=(yield ft()).transaction(jn,"readwrite");yield F.objectStore(jn).delete(b),yield F.done})).apply(this,arguments)}function nr(D,b){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,R.Z)(function*(D,b){const M=Sn(D),K=(yield ft()).transaction(jn,"readwrite"),Y=K.objectStore(jn),Fe=yield Y.get(M),Ge=b(Fe);return void 0===Ge?yield Y.delete(M):yield Y.put(Ge,M),yield K.done,Ge&&(!Fe||Fe.fid!==Ge.fid)&&Jt(D,Ge.fid),Ge})).apply(this,arguments)}function vn(D){return rr.apply(this,arguments)}function rr(){return(rr=(0,R.Z)(function*(D){let b;const M=yield nr(D.appConfig,F=>{const K=_s(F),Y=jt(D,K);return b=Y.registrationPromise,Y.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function _s(D){return Pi(D||{fid:Ze(),registrationStatus:0})}function jt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(ze.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function ct(D,b){return nt.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:di(D)}:{installationEntry:b}}function nt(){return(nt=(0,R.Z)(function*(D,b){try{const M=yield _e(D,b);return xr(D.appConfig,M)}catch(M){throw He(M)&&409===M.customData.serverCode?yield qt(D.appConfig):yield xr(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function di(D){return hi.apply(this,arguments)}function hi(){return(hi=(0,R.Z)(function*(D){let b=yield Ft(D.appConfig);for(;1===b.registrationStatus;)yield Le(100),b=yield Ft(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield vn(D);return F||M}return b})).apply(this,arguments)}function Ft(D){return nr(D,b=>{if(!b)throw ze.create("installation-not-found");return Pi(b)})}function Pi(D){return function Mn(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function an(D,b){return V.apply(this,arguments)}function V(){return(V=(0,R.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=H(D,M),K=ce(D,M),Y=b.getImmediate({optional:!0});if(Y){const Dt=yield Y.getHeartbeatsHeader();Dt&&K.append("x-firebase-client",Dt)}const Ge={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:re,appId:D.appId}})},gt=yield we(()=>fetch(F,Ge));if(gt.ok)return Me(yield gt.json());throw yield Ee("Generate Auth Token",gt)})).apply(this,arguments)}function H(D,{fid:b}){return`${Se(D)}/${b}/authTokens:generate`}function z(D){return ve.apply(this,arguments)}function ve(){return(ve=(0,R.Z)(function*(D,b=!1){let M;const F=yield nr(D.appConfig,Y=>{if(!At(Y))throw ze.create("not-registered");const Fe=Y.authToken;if(!b&&tn(Fe))return Y;if(1===Fe.requestStatus)return M=j(D,b),Y;{if(!navigator.onLine)throw ze.create("app-offline");const Ge=$n(Y);return M=Xe(D,Ge),Ge}});return M?yield M:F.authToken})).apply(this,arguments)}function j(D,b){return J.apply(this,arguments)}function J(){return(J=(0,R.Z)(function*(D,b){let M=yield Oe(D.appConfig);for(;1===M.authToken.requestStatus;)yield Le(100),M=yield Oe(D.appConfig);const F=M.authToken;return 0===F.requestStatus?z(D,b):F})).apply(this,arguments)}function Oe(D){return nr(D,b=>{if(!At(b))throw ze.create("not-registered");return function ue(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Xe(D,b){return ht.apply(this,arguments)}function ht(){return(ht=(0,R.Z)(function*(D,b){try{const M=yield an(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield xr(D.appConfig,F),M}catch(M){if(!He(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield xr(D.appConfig,F)}else yield qt(D.appConfig);throw M}})).apply(this,arguments)}function At(D){return void 0!==D&&2===D.registrationStatus}function tn(D){return 2===D.requestStatus&&!function vt(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function $n(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function G(){return(G=(0,R.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield vn(b);return F?F.catch(console.error):z(b).catch(console.error),M.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,R.Z)(function*(D,b=!1){const M=D;return yield ut(M),(yield z(M,b)).token})).apply(this,arguments)}function ut(D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,R.Z)(function*(D){const{registrationPromise:b}=yield vn(D);b&&(yield b)})).apply(this,arguments)}function Yo(D){return ze.create("missing-app-config-values",{valueName:D})}const Zr="installations",xt=D=>{const b=D.getProvider("app").getImmediate(),M=function ir(D){if(!D||!D.options)throw Yo("App Configuration");if(!D.name)throw Yo("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw Yo(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},dn=D=>{const b=D.getProvider("app").getImmediate(),M=(0,se._getProvider)(b,Zr).getImmediate();return{getId:()=>function W(D){return G.apply(this,arguments)}(M),getToken:K=>function Te(D){return Ke.apply(this,arguments)}(M,K)}};(function Nr(){(0,se._registerComponent)(new ge.wA(Zr,xt,"PUBLIC")),(0,se._registerComponent)(new ge.wA("installations-internal",dn,"PRIVATE"))})(),(0,se.registerVersion)(me,$),(0,se.registerVersion)(me,$,"esm2017");const Xi="@firebase/remote-config",xn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xl{constructor(b,M,F,K){this.client=b,this.storage=M,this.storageCache=F,this.logger=K}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,K=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${K}.`),K}fetch(b){var M=this;return(0,R.Z)(function*(){const[F,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return K;b.eTag=K&&K.eTag;const Y=yield M.client.fetch(b),Fe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&Fe.push(M.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(Fe),Y})()}}function La(D=navigator){return D.languages&&D.languages[0]||D.language}class Hn{constructor(b,M,F,K,Y,Fe){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=K,this.apiKey=Y,this.appId=Fe}fetch(b){var M=this;return(0,R.Z)(function*(){const[F,K]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ge={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},gt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:M.appId,language_code:La()},Dt={method:"POST",headers:Ge,body:JSON.stringify(gt)},Vt=fetch(Fe,Dt),Et=new Promise((Os,Xr)=>{b.signal.addEventListener(()=>{const Bo=new Error("The operation was aborted.");Bo.name="AbortError",Xr(Bo)})});let Vr;try{yield Promise.race([Vt,Et]),Vr=yield Vt}catch(Os){let Xr="fetch-client-network";throw"AbortError"===Os.name&&(Xr="fetch-timeout"),xn.create(Xr,{originalErrorMessage:Os.message})}let Tn=Vr.status;const zi=Vr.headers.get("ETag")||void 0;let Ns,Ur;if(200===Vr.status){let Os;try{Os=yield Vr.json()}catch(Xr){throw xn.create("fetch-client-parse",{originalErrorMessage:Xr.message})}Ns=Os.entries,Ur=Os.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Tn=500:"NO_CHANGE"===Ur?Tn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(Ns={}),304!==Tn&&200!==Tn)throw xn.create("fetch-status",{httpStatus:Tn});return{status:Tn,eTag:zi,config:Ns}})()}}class ts{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,R.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var K=this;return(0,R.Z)(function*(){yield function ec(D,b){return new Promise((M,F)=>{const K=Math.max(b-Date.now(),0),Y=setTimeout(M,K);D.addEventListener(()=>{clearTimeout(Y),F(xn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const Y=yield K.client.fetch(b);return yield K.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function $f(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Y))throw Y;const Fe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Fe),K.attemptFetch(b,Fe)}})()}}class Gf{constructor(b,M,F,K,Y){this.app=b,this._client=M,this._storageCache=F,this._storage=K,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qo(D,b){const M=D.target.error||void 0;return xn.create(b,{originalErrorMessage:M&&M.message})}const vo="app_namespace_store";class rc{constructor(b,M,F,K=function Wf(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Qo(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(vo,{keyPath:"compositeKey"})}}catch(M){b(xn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,R.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,Y)=>{const Ge=F.transaction([vo],"readonly").objectStore(vo),gt=M.createCompositeKey(b);try{const Dt=Ge.get(gt);Dt.onerror=Vt=>{Y(Qo(Vt,"storage-get"))},Dt.onsuccess=Vt=>{const Et=Vt.target.result;K(Et?Et.value:void 0)}}catch(Dt){Y(xn.create("storage-get",{originalErrorMessage:Dt&&Dt.message}))}})})()}set(b,M){var F=this;return(0,R.Z)(function*(){const K=yield F.openDbPromise;return new Promise((Y,Fe)=>{const gt=K.transaction([vo],"readwrite").objectStore(vo),Dt=F.createCompositeKey(b);try{const Vt=gt.put({compositeKey:Dt,value:M});Vt.onerror=Et=>{Fe(Qo(Et,"storage-set"))},Vt.onsuccess=()=>{Y()}}catch(Vt){Fe(xn.create("storage-set",{originalErrorMessage:Vt&&Vt.message}))}})})()}delete(b){var M=this;return(0,R.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,Y)=>{const Ge=F.transaction([vo],"readwrite").objectStore(vo),gt=M.createCompositeKey(b);try{const Dt=Ge.delete(gt);Dt.onerror=Vt=>{Y(Qo(Vt,"storage-delete"))},Dt.onsuccess=()=>{K()}}catch(Dt){Y(xn.create("storage-delete",{originalErrorMessage:Dt&&Dt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Eo{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,R.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),K=b.storage.getActiveConfig(),Y=yield M;Y&&(b.lastFetchStatus=Y);const Fe=yield F;Fe&&(b.lastSuccessfulFetchTimestampMillis=Fe);const Ge=yield K;Ge&&(b.activeConfig=Ge)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function gm(){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,R.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(D){return!1}})).apply(this,arguments)}!function qf(){(0,se._registerComponent)(new ge.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),K=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw xn.create("registration-window");if(!(0,oe.hl)())throw xn.create("indexed-db-unavailable");const{projectId:Y,apiKey:Fe,appId:Ge}=F.options;if(!Y)throw xn.create("registration-project-id");if(!Fe)throw xn.create("registration-api-key");if(!Ge)throw xn.create("registration-app-id");const gt=new rc(Ge,F.name,M=M||"firebase"),Dt=new Eo(gt),Vt=new he.Yd(Xi);Vt.logLevel=he.in.ERROR;const Et=new Hn(K,se.SDK_VERSION,M,Y,Fe,Ge),Vr=new ts(Et,gt),Tn=new Xl(Vr,gt,Dt,Vt),zi=new Gf(F,Tn,Dt,gt,Vt);return function un(D){const b=(0,oe.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(zi),zi},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Xi,"0.3.8"),(0,se.registerVersion)(Xi,"0.3.8","esm2017")}();const ws="/firebase-messaging-sw.js",gi="/firebase-cloud-messaging-push-scope",wo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ea="google.c.a.c_id",Kd="google.c.a.c_l",Zf="google.c.a.ts",zs="google.c.a.e";var rs=(()=>{return(D=rs||(rs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",rs;var D})();function Ii(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sc(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),K=new Uint8Array(F.length);for(let Y=0;Y<F.length;++Y)K[Y]=F.charCodeAt(Y);return K}const Ir="fcm_token_details_db",oc="fcm_token_object_Store";function ac(D){return Va.apply(this,arguments)}function Va(){return Va=(0,R.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Ir))return null;let b=null;return(yield(0,ae.X3)(Ir,5,{upgrade:(F=(0,R.Z)(function*(K,Y,Fe,Ge){var gt;if(Y<2||!K.objectStoreNames.contains(oc))return;const Dt=Ge.objectStore(oc),Vt=yield Dt.index("fcmSenderId").get(D);if(yield Dt.clear(),Vt)if(2===Y){const Et=Vt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;b={token:Et.fcmToken,createTime:null!==(gt=Et.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Ii(Et.vapidKey)}}}else if(3===Y){const Et=Vt;b={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ii(Et.auth),p256dh:Ii(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ii(Et.vapidKey)}}}else if(4===Y){const Et=Vt;b={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Ii(Et.auth),p256dh:Ii(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Ii(Et.vapidKey)}}}}),function(Y,Fe,Ge,gt){return F.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Ir),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Ua(b)?b:null;var F}),Va.apply(this,arguments)}function Ua(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const is="firebase-messaging-store";let Hu=null;function hn(){return Hu||(Hu=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(is)}})),Hu}function ta(D){return Is.apply(this,arguments)}function Is(){return(Is=(0,R.Z)(function*(D){const b=sr(D),F=yield(yield hn()).transaction(is).objectStore(is).get(b);if(F)return F;{const K=yield ac(D.appConfig.senderId);if(K)return yield ln(D,K),K}})).apply(this,arguments)}function ln(D,b){return ja.apply(this,arguments)}function ja(){return(ja=(0,R.Z)(function*(D,b){const M=sr(D),K=(yield hn()).transaction(is,"readwrite");return yield K.objectStore(is).put(b,M),yield K.done,b})).apply(this,arguments)}function na(D){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,R.Z)(function*(D){const b=sr(D),F=(yield hn()).transaction(is,"readwrite");yield F.objectStore(is).delete(b),yield F.done})).apply(this,arguments)}function sr({appConfig:D}){return D.appId}const Rn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ss(D,b){return or.apply(this,arguments)}function or(){return(or=(0,R.Z)(function*(D,b){const M=yield bs(D),F=qs(b),K={method:"POST",headers:M,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(Ds(D.appConfig),K)).json()}catch(Fe){throw Rn.create("token-subscribe-failed",{errorInfo:Fe})}if(Y.error)throw Rn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw Rn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Io(D,b){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,R.Z)(function*(D,b){const M=yield bs(D),F=qs(b.subscriptionOptions),K={method:"PATCH",headers:M,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(`${Ds(D.appConfig)}/${b.token}`,K)).json()}catch(Fe){throw Rn.create("token-update-failed",{errorInfo:Fe})}if(Y.error)throw Rn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw Rn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Gu(D,b){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,R.Z)(function*(D,b){const F={method:"DELETE",headers:yield bs(D)};try{const Y=yield(yield fetch(`${Ds(D.appConfig)}/${b}`,F)).json();if(Y.error)throw Rn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(K){throw Rn.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Ds({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function bs(D){return mt.apply(this,arguments)}function mt(){return(mt=(0,R.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function qs({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const K={web:{endpoint:M,auth:b,p256dh:D}};return F!==wo&&(K.web.applicationPubKey=F),K}const Ha=6048e5;function uc(D){return ra.apply(this,arguments)}function ra(){return(ra=(0,R.Z)(function*(D){const b=yield Ga(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Ii(b.getKey("auth")),p256dh:Ii(b.getKey("p256dh"))},F=yield ta(D.firebaseDependencies);if(F){if(cc(F.subscriptionOptions,M))return Date.now()>=F.createTime+Ha?Yd(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Gu(D.firebaseDependencies,F.token)}catch(K){console.warn(K)}return Ne(D.firebaseDependencies,M)}return Ne(D.firebaseDependencies,M)})).apply(this,arguments)}function lc(D){return Do.apply(this,arguments)}function Do(){return(Do=(0,R.Z)(function*(D){const b=yield ta(D.firebaseDependencies);b&&(yield Gu(D.firebaseDependencies,b.token),yield na(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Yd(D,b){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,R.Z)(function*(D,b){try{const M=yield Io(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield ln(D.firebaseDependencies,F),M}catch(M){throw yield lc(D),M}})).apply(this,arguments)}function Ne(D,b){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,R.Z)(function*(D,b){const F={token:yield ss(D,b),createTime:Date.now(),subscriptionOptions:b};return yield ln(D,F),F.token})).apply(this,arguments)}function Ga(D,b){return mn.apply(this,arguments)}function mn(){return(mn=(0,R.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sc(b)})})).apply(this,arguments)}function cc(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function os(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Li(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const K=b.notification.image;K&&(D.notification.image=K)}(b,D),function zu(D,b){!b.data||(D.data=b.data)}(b,D),function ia(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const M=b.fcmOptions.link;M&&(D.fcmOptions.link=M);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Qd(D){return"object"==typeof D&&!!D&&ea in D}function dc(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function Zs(D){return Rn.create("missing-app-config-values",{valueName:D})}dc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ar{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function hc(D){if(!D||!D.options)throw Zs("App Configuration Object");if(!D.name)throw Zs("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw Zs(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:K,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Vi(D){return bo.apply(this,arguments)}function bo(){return(bo=(0,R.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(ws,{scope:gi}),D.swRegistration.update().catch(()=>{})}catch(b){throw Rn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Co(D,b){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,R.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Vi(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Rn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function Jd(D,b){return To.apply(this,arguments)}function To(){return(To=(0,R.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=wo)})).apply(this,arguments)}function sa(){return(sa=(0,R.Z)(function*(D,b){if(!navigator)throw Rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rn.create("permission-blocked");return yield Jd(D,null==b?void 0:b.vapidKey),yield Co(D,null==b?void 0:b.serviceWorkerRegistration),uc(D)})).apply(this,arguments)}function Wu(D,b,M){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,R.Z)(function*(D,b,M){const F=pc(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[ea],message_name:M[Kd],message_time:M[Zf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function pc(D){switch(D){case rs.NOTIFICATION_CLICKED:return"notification_open";case rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qu(){return(qu=(0,R.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===rs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(os(M)):D.onMessageHandler.next(os(M)));const F=M.data;Qd(F)&&"1"===F[zs]&&(yield Wu(D,M.messageType,F))})).apply(this,arguments)}const oa="@firebase/messaging",Ks=D=>{const b=new ar(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function gc(D,b){return qu.apply(this,arguments)}(b,M)),b},mc=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function fc(D,b){return sa.apply(this,arguments)}(b,F)}};function za(){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,R.Z)(function*(){try{yield(0,oe.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xd(){(0,se._registerComponent)(new ge.wA("messaging",Ks,"PUBLIC")),(0,se._registerComponent)(new ge.wA("messaging-internal",mc,"PRIVATE")),(0,se.registerVersion)(oa,"0.9.13"),(0,se.registerVersion)(oa,"0.9.13","esm2017")}();const yc="analytics",Kf="firebase_id",ua="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",la="https://www.googletagmanager.com/gtag/js",Zn=new he.Yd("@firebase/analytics");function vc(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function Yf(D,b){const M=document.createElement("script");M.src=`${la}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function So(D,b,M,F,K,Y){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,R.Z)(function*(D,b,M,F,K,Y){const Fe=F[K];try{if(Fe)yield b[Fe];else{const gt=(yield vc(M)).find(Dt=>Dt.measurementId===K);gt&&(yield b[gt.appId])}}catch(Ge){Zn.error(Ge)}D("config",K,Y)})).apply(this,arguments)}function Ku(D,b,M,F,K){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,R.Z)(function*(D,b,M,F,K){try{let Y=[];if(K&&K.send_to){let Fe=K.send_to;Array.isArray(Fe)||(Fe=[Fe]);const Ge=yield vc(M);for(const gt of Fe){const Dt=Ge.find(Et=>Et.measurementId===gt),Vt=Dt&&b[Dt.appId];if(!Vt){Y=[];break}Y.push(Vt)}}0===Y.length&&(Y=Object.values(b)),yield Promise.all(Y),D("event",F,K||{})}catch(Y){Zn.error(Y)}})).apply(this,arguments)}function bn(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(la))return b;return null}const lt=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ca=new class Di{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Mo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function wc(D){return fn.apply(this,arguments)}function fn(){return(fn=(0,R.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,K={method:"GET",headers:Mo(F)},Y=ua.replace("{app-id}",M),Fe=yield fetch(Y,K);if(200!==Fe.status&&304!==Fe.status){let Ge="";try{const gt=yield Fe.json();(null===(b=gt.error)||void 0===b?void 0:b.message)&&(Ge=gt.error.message)}catch(gt){}throw lt.create("config-fetch-failed",{httpStatus:Fe.status,responseMessage:Ge})}return Fe.json()})).apply(this,arguments)}function Ic(D){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,R.Z)(function*(D,b=ca,M){const{appId:F,apiKey:K,measurementId:Y}=D.options;if(!F)throw lt.create("no-app-id");if(!K){if(Y)return{measurementId:Y,appId:F};throw lt.create("no-api-key")}const Fe=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ge=new qa;return setTimeout((0,R.Z)(function*(){Ge.abort()}),void 0!==M?M:6e4),Ts({appId:F,apiKey:K,measurementId:Y},Fe,Ge,b)})).apply(this,arguments)}function Ts(D,b,M){return It.apply(this,arguments)}function It(){return(It=(0,R.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,K=ca){const{appId:Y,measurementId:Fe}=D;try{yield Jf(F,b)}catch(Ge){if(Fe)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:Y,measurementId:Fe};throw Ge}try{const Ge=yield wc(D);return K.deleteThrottleMetadata(Y),Ge}catch(Ge){if(!Dc(Ge)){if(K.deleteThrottleMetadata(Y),Fe)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${Ge.message}]`),{appId:Y,measurementId:Fe};throw Ge}const gt=503===Number(Ge.customData.httpStatus)?(0,oe.$s)(M,K.intervalMillis,30):(0,oe.$s)(M,K.intervalMillis),Dt={throttleEndTimeMillis:Date.now()+gt,backoffCount:M+1};return K.setThrottleMetadata(Y,Dt),Zn.debug(`Calling attemptFetch again in ${gt} millis`),Ts(D,Dt,F,K)}})).apply(this,arguments)}function Jf(D,b){return new Promise((M,F)=>{const K=Math.max(b-Date.now(),0),Y=setTimeout(M,K);D.addEventListener(()=>{clearTimeout(Y),F(lt.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Dc(D){if(!(D instanceof oe.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class qa{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function bc(){return zn.apply(this,arguments)}function zn(){return(zn=(0,R.Z)(function*(){if(!(0,oe.hl)())return Zn.warn(lt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(D){return Zn.warn(lt.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function ls(){return(ls=(0,R.Z)(function*(D,b,M,F,K,Y,Fe){var Ge;const gt=Ic(D);gt.then(Tn=>{M[Tn.measurementId]=Tn.appId,D.options.measurementId&&Tn.measurementId!==D.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Tn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tn=>Zn.error(Tn)),b.push(gt);const Dt=bc().then(Tn=>{if(Tn)return F.getId()}),[Vt,Et]=yield Promise.all([gt,Dt]);bn()||Yf(Y,Vt.measurementId),K("js",new Date);const Vr=null!==(Ge=null==Fe?void 0:Fe.config)&&void 0!==Ge?Ge:{};return Vr.origin="firebase",Vr.update=!0,null!=Et&&(Vr[Kf]=Et),K("config",Vt.measurementId,Vr),Vt.measurementId})).apply(this,arguments)}class Ro{constructor(b){this.app=b}_delete(){return delete Jr[this.app.options.appId],Promise.resolve()}}let Jr={},cs=[];const No={};let As,Xs,Js="dataLayer",da=!1;function bi(D,b,M){!function Za(){const D=[];if((0,oe.ru)()&&D.push("This is a browser extension environment."),(0,oe.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,K)=>`(${K+1}) ${F}`).join(" "),M=lt.create("invalid-analytics-context",{errorInfo:b});Zn.warn(M.message)}}();const F=D.options.appId;if(!F)throw lt.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw lt.create("no-api-key");Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jr[F])throw lt.create("already-exists",{id:F});if(!da){!function us(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Js);const{wrappedGtag:Y,gtagCore:Fe}=function Qf(D,b,M,F,K){let Y=function(...Fe){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(Y=window[K]),window[K]=function Yu(D,b,M,F){function Y(){return(Y=(0,R.Z)(function*(Fe,Ge,gt){try{"event"===Fe?yield Ku(D,b,M,Ge,gt):"config"===Fe?yield So(D,b,M,F,Ge,gt):D("set",Ge)}catch(Dt){Zn.error(Dt)}})).apply(this,arguments)}return function K(Fe,Ge,gt){return Y.apply(this,arguments)}}(Y,D,b,M),{gtagCore:Y,wrappedGtag:window[K]}}(Jr,cs,No,Js,"gtag");Xs=Y,As=Fe,da=!0}return Jr[F]=function xo(D,b,M,F,K,Y,Fe){return ls.apply(this,arguments)}(D,cs,No,b,As,Js,M),new Ro(D)}function fr(){return(fr=(0,R.Z)(function*(D,b,M,F,K){if(K&&K.global)D("event",M,F);else{const Y=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:Y}))}})).apply(this,arguments)}function Hi(){return Po.apply(this,arguments)}function Po(){return(Po=(0,R.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(D){return!1}})).apply(this,arguments)}const kr="@firebase/analytics";!function Rs(){(0,se._registerComponent)(new ge.wA(yc,(b,{options:M})=>bi(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new ge.wA("analytics-internal",function D(b){try{const M=b.getProvider(yc).getImmediate();return{logEvent:(F,K,Y)=>function ko(D,b,M,F){D=(0,oe.m9)(D),function Cc(D,b,M,F,K){return fr.apply(this,arguments)}(Xs,Jr[D.app.options.appId],b,M,F).catch(K=>Zn.error(K))}(M,F,K,Y)}}catch(M){throw lt.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(kr,"0.7.9"),(0,se.registerVersion)(kr,"0.7.9","esm2017")}();var Tc=O(4408),sh=O(7565);const Xu=new class On extends sh.v{}(class Ci extends Tc.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):b.flush(this)}});var Xf=O(4986),Ka=O(8306),br=O(8505),Fr=O(9468),Ya=O(5363);const Lo=new f.GfV("7.3.0"),to="__angularfire_symbol__analyticsIsSupportedValue",Gi="__angularfire_symbol__analyticsIsSupported",ha="__angularfire_symbol__remoteConfigIsSupportedValue",Qa="__angularfire_symbol__remoteConfigIsSupported",Rt="__angularfire_symbol__messagingIsSupportedValue",Ac="__angularfire_symbol__messagingIsSupported";function Sc(D,b,M){if(b){if(1===b.length)return b[0];const Y=b.filter(Fe=>Fe.app===M);if(1===Y.length)return Y[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[Gi]||(globalThis[Gi]=Hi().then(D=>globalThis[to]=D).catch(()=>globalThis[to]=!1)),globalThis[Ac]||(globalThis[Ac]=za().then(D=>globalThis[Rt]=D).catch(()=>globalThis[Rt]=!1)),globalThis[Qa]||(globalThis[Qa]=gm().then(D=>globalThis[ha]=D).catch(()=>globalThis[ha]=!1));const Mc=(D,b)=>{const M=b?[b]:(0,L.C6)(),F=[];return M.forEach(K=>{K.container.getProvider(D).instances.forEach(Fe=>{F.includes(Fe)||F.push(Fe)})}),F};function ur(){}class el{constructor(b,M=Xu){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const K=this.zone;return this.delegate.schedule(function(Fe){K.runGuarded(()=>{b.apply(this,[Fe])})},M,F)}}class Xa{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ur,{},ur,ur)),M.pipe((0,br.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let eu=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new el(Zone.current)),this.insideAngular=M.run(()=>new el(Zone.current,Xf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Vo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Cn(D){return Vo().ngZone.runOutsideAngular(()=>D())}function Yn(D){return Vo().ngZone.run(()=>D())}function ds(D){return Vo(),function Uo(D){return function(M){return(M=M.lift(new Xa(D.ngZone))).pipe((0,Fr.R)(D.outsideAngular),(0,Ya.Q)(D.insideAngular))}}(Vo())(D)}const tu=(D,b)=>function(){const F=arguments;return b&&setTimeout(()=>{"scheduled"===b.state&&b.invoke()},10),Yn(()=>D.apply(void 0,F))},nl=(D,b)=>function(){let M;const F=arguments;for(let Y=0;Y<arguments.length;Y++)"function"==typeof F[Y]&&(b&&(M||(M=Yn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ur,{},ur,ur)))),F[Y]=tu(F[Y],M));const K=Cn(()=>D.apply(this,F));if(!b){if(K instanceof Ka.y){const Y=Vo();return K.pipe((0,Fr.R)(Y.outsideAngular),(0,Ya.Q)(Y.insideAngular))}return Yn(()=>K)}return K instanceof Ka.y?K.pipe(ds):K instanceof Promise?Yn(()=>new Promise((Y,Fe)=>K.then(Ge=>Yn(()=>Y(Ge)),Ge=>Yn(()=>Fe(Ge))))):"function"==typeof K&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),K.apply(this,arguments)}:Yn(()=>K)}},198:(tt,De,O)=>{O.d(De,{$:()=>Ds,A:()=>U,B:()=>Ae,G:()=>dn,H:()=>nn,J:()=>ts,L:()=>tn,M:()=>Jo,N:()=>Xo,P:()=>to,Q:()=>ea,R:()=>Rs,T:()=>Kd,U:()=>wo,V:()=>rs,W:()=>Ii,X:()=>ac,Y:()=>$a,Z:()=>ss,_:()=>Io,a:()=>Pr,a0:()=>uc,a1:()=>lc,a2:()=>Yd,a3:()=>Ne,a4:()=>Ga,a5:()=>cc,a6:()=>Li,a7:()=>zu,a8:()=>Qd,a9:()=>dc,aA:()=>Xr,aB:()=>Tn,aC:()=>nl,aD:()=>tu,aE:()=>Ue,aI:()=>Mo,aL:()=>zs,aa:()=>Vi,ab:()=>Co,ac:()=>Jd,af:()=>Wu,ag:()=>pc,ah:()=>gc,ak:()=>is,al:()=>Zu,an:()=>la,ao:()=>Ec,ap:()=>Fn,aq:()=>we,ar:()=>Nt,as:()=>ut,at:()=>He,au:()=>ch,av:()=>rl,aw:()=>Se,ax:()=>X,ay:()=>ee,az:()=>vt,b:()=>lt,c:()=>fa,d:()=>el,e:()=>Mc,f:()=>M,g:()=>gt,h:()=>Y,i:()=>bi,j:()=>Et,k:()=>rp,l:()=>Xu,m:()=>sp,o:()=>ae,r:()=>Xf,s:()=>sh,u:()=>Ya});var f=O(5861),L=O(2090),R=O(9681),se=O(655),oe=O(1877),ge=O(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},U={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},je=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new oe.Yd("@firebase/auth");function ze(_,...p){Ce.logLevel<=oe.in.ERROR&&Ce.error(`Auth (${R.SDK_VERSION}): ${_}`,...p)}function He(_,...p){throw qe(_,...p)}function Se(_,...p){return qe(_,...p)}function Me(_,p,g){const w=Object.assign(Object.assign({},ke()),{[p]:g});return new L.LL("auth","Firebase",w).create(p,{appName:_.name})}function Ee(_,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&He(_,"argument-error"),Me(_,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(_,...p){if("string"!=typeof _){const g=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(g,...w)}return je.create(_,...p)}function X(_,p,...g){if(!_)throw qe(p,...g)}function ce(_){const p="INTERNAL ASSERTION FAILED: "+_;throw ze(p),new Error(p)}function we(_,p){_||ce(p)}const Z=new Map;function ee(_){we(_ instanceof Function,"Expected a class definition");let p=Z.get(_);return p?(we(p instanceof _,"Instance stored in cache mismatched with class"),p):(p=new _,Z.set(_,p),p)}function le(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Le(){return"http:"===dt()||"https:"===dt()}function dt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Ze{constructor(p,g){this.shortDelay=p,this.longDelay=g,we(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function zt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Le()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function on(_,p){we(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class Sn{static initialize(p,g,w){this.fetchImpl=p,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Jt=new Ze(3e4,6e4);function kt(_,p){return _.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:_.tenantId}):p}function Wt(_,p,g,w){return _n.apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(_,p,g,w,A={}){return Ri(_,A,(0,f.Z)(function*(){let P={},te={};w&&("GET"===p?te=w:P={body:JSON.stringify(w)});const xe=(0,L.xO)(Object.assign({key:_.config.apiKey},te)).slice(1),Je=yield _._getAdditionalHeaders();return Je["Content-Type"]="application/json",_.languageCode&&(Je["X-Firebase-Locale"]=_.languageCode),Sn.fetch()(ci(_,_.config.apiHost,g,xe),Object.assign({method:p,headers:Je,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ri(_,p,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,f.Z)(function*(_,p,g){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},cn),p);try{const A=new Ei(_),P=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const te=yield P.json();if("needConfirmation"in te)throw jn(_,"account-exists-with-different-credential",te);if(P.ok&&!("errorMessage"in te))return te;{const xe=P.ok?te.errorMessage:te.error.message,[Je,pt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Je)throw jn(_,"credential-already-in-use",te);if("EMAIL_EXISTS"===Je)throw jn(_,"email-already-in-use",te);const bt=w[Je]||Je.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw Me(_,bt,pt);He(_,bt)}}catch(A){if(A instanceof L.ZR)throw A;He(_,"network-request-failed")}})).apply(this,arguments)}function wn(_,p,g,w){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(_,p,g,w,A={}){const P=yield Wt(_,p,g,w,A);return"mfaPendingCredential"in P&&He(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function ci(_,p,g,w){const A=`${p}${g}?${w}`;return _.config.emulator?on(_.config,A):`${_.config.apiScheme}://${A}`}class Ei{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Se(this.auth,"network-request-failed")),Jt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jn(_,p,g){const w={appName:_.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Se(_,p,w);return A.customData._tokenResponse=g,A}function ft(){return(ft=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function xr(_,p){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function qt(_,p){return Er.apply(this,arguments)}function Er(){return(Er=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function nr(_){if(_)try{const p=new Date(Number(_));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function rr(){return(rr=(0,f.Z)(function*(_,p=!1){const g=(0,L.m9)(_),w=yield g.getIdToken(p),A=jt(w);X(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,te=null==P?void 0:P.sign_in_provider;return{claims:A,token:w,authTime:nr(_s(A.auth_time)),issuedAtTime:nr(_s(A.iat)),expirationTime:nr(_s(A.exp)),signInProvider:te||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function _s(_){return 1e3*Number(_)}function jt(_){const[p,g,w]=_.split(".");if(void 0===p||void 0===g||void 0===w)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,L.tV)(g);return A?JSON.parse(A):(ze("Failed to decode base64 JWT payload"),null)}catch(A){return ze("Caught error parsing JWT payload as JSON",A),null}}function nt(_,p){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(_,p,g=!1){if(g)return p;try{return yield p}catch(w){throw w instanceof L.ZR&&hi(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function hi({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Ft{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),w)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class Pi{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=nr(this.lastLoginAt),this.creationTime=nr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mn(_){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*(_){var p;const g=_.auth,w=yield _.getIdToken(),A=yield nt(_,qt(g,{idToken:w}));X(null==A?void 0:A.users.length,g,"internal-error");const P=A.users[0];_._notifyReloadListener(P);const te=(null===(p=P.providerUserInfo)||void 0===p?void 0:p.length)?ve(P.providerUserInfo):[],xe=z(_.providerData,te),bt=!!_.isAnonymous&&!(_.email&&P.passwordHash||(null==xe?void 0:xe.length)),Pn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:xe,metadata:new Pi(P.createdAt,P.lastLoginAt),isAnonymous:bt};Object.assign(_,Pn)})).apply(this,arguments)}function H(){return(H=(0,f.Z)(function*(_){const p=(0,L.m9)(_);yield Mn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function z(_,p){return[..._.filter(w=>!p.some(A=>A.providerId===w.providerId)),...p]}function ve(_){return _.map(p=>{var{providerId:g}=p,w=(0,se._T)(p,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function J(){return(J=(0,f.Z)(function*(_,p){const g=yield Ri(_,{},(0,f.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:P}=_.config,te=ci(_,A,"/v1/token",`key=${P}`),xe=yield _._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",Sn.fetch()(te,{method:"POST",headers:xe,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Oe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){X(p.idToken,"internal-error"),X(void 0!==p.idToken,"internal-error"),X(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function ct(_){const p=jt(_);return X(p,"internal-error"),X(void 0!==p.exp,"internal-error"),X(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var w=this;return(0,f.Z)(function*(){return X(!w.accessToken||w.refreshToken,p,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var w=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:te}=yield function j(_,p){return J.apply(this,arguments)}(p,g);w.updateTokensAndExpiration(A,P,Number(te))})()}updateTokensAndExpiration(p,g,w){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,g){const{refreshToken:w,accessToken:A,expirationTime:P}=g,te=new Oe;return w&&(X("string"==typeof w,"internal-error",{appName:p}),te.refreshToken=w),A&&(X("string"==typeof A,"internal-error",{appName:p}),te.accessToken=A),P&&(X("number"==typeof P,"internal-error",{appName:p}),te.expirationTime=P),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Oe,this.toJSON())}_performRefresh(){return ce("not implemented")}}function Xe(_,p){X("string"==typeof _||void 0===_,"internal-error",{appName:p})}class ht{constructor(p){var{uid:g,auth:w,stsTokenManager:A}=p,P=(0,se._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ft(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Pi(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,f.Z)(function*(){const w=yield nt(g,g.stsTokenManager.getToken(g.auth,p));return X(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(p){return function vn(_){return rr.apply(this,arguments)}(this,p)}reload(){return function V(_){return H.apply(this,arguments)}(this)}_assign(p){this!==p&&(X(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new ht(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var w=this;return(0,f.Z)(function*(){let A=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),A=!0),g&&(yield Mn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,f.Z)(function*(){const g=yield p.getIdToken();return yield nt(p,function Oi(_,p){return ft.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var w,A,P,te,xe,Je,pt,bt;const Pn=null!==(w=g.displayName)&&void 0!==w?w:void 0,Wi=null!==(A=g.email)&&void 0!==A?A:void 0,Ps=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,ou=null!==(te=g.photoURL)&&void 0!==te?te:void 0,ul=null!==(xe=g.tenantId)&&void 0!==xe?xe:void 0,au=null!==(Je=g._redirectEventId)&&void 0!==Je?Je:void 0,fh=null!==(pt=g.createdAt)&&void 0!==pt?pt:void 0,uu=null!==(bt=g.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:ll,emailVerified:ap,isAnonymous:ph,providerData:cl,stsTokenManager:dl}=g;X(ll&&dl,p,"internal-error");const Tm=Oe.fromJSON(this.name,dl);X("string"==typeof ll,p,"internal-error"),Xe(Pn,p.name),Xe(Wi,p.name),X("boolean"==typeof ap,p,"internal-error"),X("boolean"==typeof ph,p,"internal-error"),Xe(Ps,p.name),Xe(ou,p.name),Xe(ul,p.name),Xe(au,p.name),Xe(fh,p.name),Xe(uu,p.name);const ma=new ht({uid:ll,auth:p,email:Wi,emailVerified:ap,displayName:Pn,isAnonymous:ph,photoURL:ou,phoneNumber:Ps,tenantId:ul,stsTokenManager:Tm,createdAt:fh,lastLoginAt:uu});return cl&&Array.isArray(cl)&&(ma.providerData=cl.map(qi=>Object.assign({},qi))),au&&(ma._redirectEventId=au),ma}static _fromIdTokenResponse(p,g,w=!1){return(0,f.Z)(function*(){const A=new Oe;A.updateFromServerResponse(g);const P=new ht({uid:g.localId,auth:p,stsTokenManager:A,isAnonymous:w});return yield Mn(P),P})()}}const tn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,f.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,f.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,f.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return _.type="NONE",_})();function vt(_,p,g){return`firebase:${_}:${p}:${g}`}class $n{constructor(p,g,w){this.persistence=p,this.auth=g,this.userKey=w;const{config:A,name:P}=this.auth;this.fullUserKey=vt(this.userKey,A.apiKey,P),this.fullPersistenceKey=vt("persistence",A.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?ht._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,f.Z)(function*(){if(g.persistence===p)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,w="authUser"){return(0,f.Z)(function*(){if(!g.length)return new $n(ee(tn),p,w);const A=(yield Promise.all(g.map(function(){var pt=(0,f.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let P=A[0]||ee(tn);const te=vt(w,p.config.apiKey,p.name);let xe=null;for(const pt of g)try{const bt=yield pt._get(te);if(bt){const Pn=ht._fromJSON(p,bt);pt!==P&&(xe=Pn),P=pt;break}}catch(bt){}const Je=A.filter(pt=>pt._shouldAllowMigration);return P._shouldAllowMigration&&Je.length?(P=Je[0],xe&&(yield P._set(te,xe.toJSON())),yield Promise.all(g.map(function(){var pt=(0,f.Z)(function*(bt){if(bt!==P)try{yield bt._remove(te)}catch(Pn){}});return function(bt){return pt.apply(this,arguments)}}())),new $n(P,p,w)):new $n(P,p,w)})()}}function ue(_){const p=_.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ke(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(W(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ct(p))return"Blackberry";if($t(p))return"Webos";if(G(p))return"Safari";if((p.includes("chrome/")||Te(p))&&!p.includes("edge/"))return"Chrome";if(ut(p))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function W(_=(0,L.z$)()){return/firefox\//i.test(_)}function G(_=(0,L.z$)()){const p=_.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Te(_=(0,L.z$)()){return/crios\//i.test(_)}function Ke(_=(0,L.z$)()){return/iemobile/i.test(_)}function ut(_=(0,L.z$)()){return/android/i.test(_)}function Ct(_=(0,L.z$)()){return/blackberry/i.test(_)}function $t(_=(0,L.z$)()){return/webos/i.test(_)}function Nt(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)}function Fn(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function wr(_=(0,L.z$)()){return Nt(_)||ut(_)||$t(_)||Ct(_)||/windows phone/i.test(_)||Ke(_)}function ir(_,p=[]){let g;switch(_){case"Browser":g=ue((0,L.z$)());break;case"Worker":g=`${ue((0,L.z$)())}-${_}`;break;default:g=_}const w=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${R.SDK_VERSION}/${w}`}class Yo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const w=P=>new Promise((te,xe)=>{try{te(p(P))}catch(Je){xe(Je)}});w.onAbort=g,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===p)return;const w=[];try{for(const A of g.queue)yield A(p),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const P of w)try{P()}catch(te){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class Zr{constructor(p,g,w){this.app=p,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.beforeStateQueue=new Yo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(p,g){var w=this;return g&&(this._popupRedirectResolver=ee(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,P;if(!w._deleted&&(w.persistenceManager=yield $n.create(w,p),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(te){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,f.Z)(function*(){var w;const A=yield g.assertedPersistence.getCurrentUser();let P=A,te=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const xe=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Je=null==P?void 0:P._redirectEventId,pt=yield g.tryRedirectSignIn(p);(!xe||xe===Je)&&(null==pt?void 0:pt.user)&&(P=pt.user,te=!0)}if(!P)return g.directlySetCurrentUser(null);if(!P._redirectEventId){if(te)try{yield g.beforeStateQueue.runMiddleware(P)}catch(xe){P=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(xe))}return P?g.reloadAndSetCurrentUserOrClear(P):g.directlySetCurrentUser(null)}return X(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===P._redirectEventId?g.directlySetCurrentUser(P):g.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var g=this;return(0,f.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,f.Z)(function*(){try{yield Mn(p)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Pt(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,f.Z)(function*(){const w=p?(0,L.m9)(p):null;return w&&X(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(p,g=!1){var w=this;return(0,f.Z)(function*(){if(!w._deleted)return p&&X(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,f.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ee(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new L.LL("auth","Firebase",p())}onAuthStateChanged(p,g,w){return this.registerStateListener(this.authStateSubscription,p,g,w)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,w){return this.registerStateListener(this.idTokenSubscription,p,g,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var w=this;return(0,f.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const w=p&&ee(p)||g._popupRedirectResolver;X(w,g,"argument-error"),g.redirectPersistenceManager=yield $n.create(g,[ee(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,f.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===p?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,f.Z)(function*(){if(p===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,w,A){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),te=this._isInitialized?Promise.resolve():this._initializationPromise;return X(te,this,"internal-error"),te.then(()=>P(this.currentUser)),"function"==typeof g?p.addObserver(g,w,A):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ir(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var g;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function Ue(_){return(0,L.m9)(_)}class xt{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dn(_,p,g){const w=Ue(_);X(w._canInitEmulator,w,"emulator-config-failed"),X(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),P=Nr(p),{host:te,port:xe}=function Xi(_){const p=Nr(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(p.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const P=A[1];return{host:P,port:Ln(w.substr(P.length+1))}}{const[P,te]=w.split(":");return{host:P,port:Ln(te)}}}(p);w.config.emulator={url:`${P}//${te}${null===xe?"":`:${xe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:te,port:xe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function es(){function _(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Nr(_){const p=_.indexOf(":");return p<0?"":_.substr(0,p+1)}function Ln(_){if(!_)return null;const p=Number(_);return isNaN(p)?null:p}class nn{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return ce("not implemented")}_getIdTokenResponse(p){return ce("not implemented")}_linkToIdToken(p,g){return ce("not implemented")}_getReauthenticationResolver(p){return ce("not implemented")}}function $s(_,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:resetPassword",kt(_,p))})).apply(this,arguments)}function St(_,p){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function mo(_,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:update",kt(_,p))})).apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signInWithPassword",kt(_,p))})).apply(this,arguments)}function vs(_,p){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:sendOobCode",kt(_,p))})).apply(this,arguments)}function Or(_,p){return un.apply(this,arguments)}function un(){return(un=(0,f.Z)(function*(_,p){return vs(_,p)})).apply(this,arguments)}function Ql(_,p){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(_,p){return vs(_,p)})).apply(this,arguments)}function wi(_,p){return fi.apply(this,arguments)}function fi(){return(fi=(0,f.Z)(function*(_,p){return vs(_,p)})).apply(this,arguments)}function Jl(_,p){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(_,p){return vs(_,p)})).apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signInWithEmailLink",kt(_,p))})).apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signInWithEmailLink",kt(_,p))})).apply(this,arguments)}class La extends nn{constructor(p,g,w,A=null){super("password",w),this._email=p,this._password=g,this._tenantId=A}static _fromEmailAndPassword(p,g){return new La(p,g,"password")}static _fromEmailAndCode(p,g,w=null){return new La(p,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function _o(_,p){return Vn.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Es(_,p){return pi.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:He(p,"internal-error")}})()}_linkToIdToken(p,g){var w=this;return(0,f.Z)(function*(){switch(w.signInMethod){case"password":return St(p,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function qd(_,p){return Xl.apply(this,arguments)}(p,{idToken:g,email:w._email,oobCode:w._password});default:He(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Hn(_,p){return ec.apply(this,arguments)}function ec(){return(ec=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signInWithIdp",kt(_,p))})).apply(this,arguments)}class ts extends nn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new ts(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):He("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:A}=g,P=(0,se._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const te=new ts(w,A);return te.idToken=P.idToken||void 0,te.accessToken=P.accessToken||void 0,te.secret=P.secret,te.nonce=P.nonce,te.pendingToken=P.pendingToken||null,te}_getIdTokenResponse(p){return Hn(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,Hn(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Hn(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,L.xO)(g)}return p}}function Hf(_,p){return tc.apply(this,arguments)}function tc(){return(tc=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:sendVerificationCode",kt(_,p))})).apply(this,arguments)}function Qo(){return(Qo=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signInWithPhoneNumber",kt(_,p))})).apply(this,arguments)}function nc(){return(nc=(0,f.Z)(function*(_,p){const g=yield wn(_,"POST","/v1/accounts:signInWithPhoneNumber",kt(_,p));if(g.temporaryProof)throw jn(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const zf={USER_NOT_FOUND:"user-not-found"};function rc(){return(rc=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signInWithPhoneNumber",kt(_,Object.assign(Object.assign({},p),{operation:"REAUTH"})),zf)})).apply(this,arguments)}class Eo extends nn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Eo({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Eo({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Gf(_,p){return Qo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function vo(_,p){return nc.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Wf(_,p){return rc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:P}=p;return w||g||A||P?new Eo({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:P}):null}}class ns{constructor(p){var g,w,A,P,te,xe;const Je=(0,L.zd)((0,L.pd)(p)),pt=null!==(g=Je.apiKey)&&void 0!==g?g:null,bt=null!==(w=Je.oobCode)&&void 0!==w?w:null,Pn=function qf(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Je.mode)&&void 0!==A?A:null);X(pt&&bt&&Pn,"argument-error"),this.apiKey=pt,this.operation=Pn,this.code=bt,this.continueUrl=null!==(P=Je.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(te=Je.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(xe=Je.tenantId)&&void 0!==xe?xe:null}static parseLink(p){const g=function Zd(_){const p=(0,L.zd)((0,L.pd)(_)).link,g=p?(0,L.zd)((0,L.pd)(p)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||p||_}(p);try{return new ns(g)}catch(w){return null}}}let Jo=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,w){return La._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=ns.parseLink(w);return X(A,"argument-error"),La._fromEmailAndCode(g,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ws{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class gi extends ws{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class wo extends gi{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return X("providerId"in g&&"signInMethod"in g,"argument-error"),ts._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return X(p.idToken||p.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return wo.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return wo.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:P,nonce:te,providerId:xe}=p;if(!w&&!A&&!g&&!P||!xe)return null;try{return new wo(xe)._credential({idToken:g,accessToken:w,nonce:te,pendingToken:P})}catch(Je){return null}}}let Xo=(()=>{class _ extends gi{constructor(){super("facebook.com")}static credential(g){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),ea=(()=>{class _ extends gi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return _.credential(w,A)}catch(P){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Kd=(()=>{class _ extends gi{constructor(){super("github.com")}static credential(g){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class zs extends nn{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Hn(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,Hn(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Hn(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:A,pendingToken:P}=g;return w&&A&&P&&w===A?new zs(w,P):null}static _create(p,g){return new zs(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class rs extends ws{constructor(p){X(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return rs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return rs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=zs.fromJSON(p);return X(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:w}=p;if(!g||!w)return null;try{return zs._create(w,g)}catch(A){return null}}}let Ii=(()=>{class _ extends gi{constructor(){super("twitter.com")}static credential(g,w){return ts._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return _.credential(w,A)}catch(P){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function sc(_,p){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signUp",kt(_,p))})).apply(this,arguments)}class Dr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,w,A=!1){return(0,f.Z)(function*(){const P=yield ht._fromIdTokenResponse(p,w,A),te=oc(w);return new Dr({user:P,providerId:te,_tokenResponse:w,operationType:g})})()}static _forOperation(p,g,w){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const A=oc(w);return new Dr({user:p,providerId:A,_tokenResponse:w,operationType:g})})()}}function oc(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ac(_){return Va.apply(this,arguments)}function Va(){return(Va=(0,f.Z)(function*(_){var p;const g=Ue(_);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new Dr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield sc(g,{returnSecureToken:!0}),A=yield Dr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ua extends L.ZR{constructor(p,g,w,A){var P;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Ua.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,g,w,A){return new Ua(p,g,w,A)}}function Ba(_,p,g,w){return("reauthenticate"===p?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ua._fromErrorAndOperation(_,P,p,w):P})}function $u(_){return new Set(_.map(({providerId:p})=>p).filter(p=>!!p))}function is(_,p){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,f.Z)(function*(_,p){const g=(0,L.m9)(_);yield Is(!0,g,p);const{providerUserInfo:w}=yield xr(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),A=$u(w||[]);return g.providerData=g.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function hn(_,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,f.Z)(function*(_,p,g=!1){const w=yield nt(_,p._linkToIdToken(_.auth,yield _.getIdToken()),g);return Dr._forOperation(_,"link",w)})).apply(this,arguments)}function Is(_,p,g){return ln.apply(this,arguments)}function ln(){return(ln=(0,f.Z)(function*(_,p,g){yield Mn(p);const A=!1===_?"provider-already-linked":"no-such-provider";X($u(p.providerData).has(g)===_,p.auth,A)})).apply(this,arguments)}function ja(_,p){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(_,p,g=!1){const{auth:w}=_,A="reauthenticate";try{const P=yield nt(_,Ba(w,A,p,_),g);X(P.idToken,w,"internal-error");const te=jt(P.idToken);X(te,w,"internal-error");const{sub:xe}=te;return X(_.uid===xe,w,"user-mismatch"),Dr._forOperation(_,A,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&He(w,"user-mismatch"),P}})).apply(this,arguments)}function Ws(_,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(_,p,g=!1){const w="signIn",A=yield Ba(_,w,p),P=yield Dr._fromIdTokenResponse(_,w,A);return g||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function $a(_,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,f.Z)(function*(_,p){return Ws(Ue(_),p)})).apply(this,arguments)}function ss(_,p){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*(_,p){const g=(0,L.m9)(_);return yield Is(!1,g,p.providerId),hn(g,p)})).apply(this,arguments)}function Io(_,p){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(_,p){return ja((0,L.m9)(_),p)})).apply(this,arguments)}function Gu(_,p){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(_,p){return wn(_,"POST","/v1/accounts:signInWithCustomToken",kt(_,p))})).apply(this,arguments)}function Ds(_,p){return bs.apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(_,p){const g=Ue(_),w=yield Gu(g,{token:p,returnSecureToken:!0}),A=yield Dr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class mt{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?qs._fromServerResponse(p,g):He(p,"internal-error")}}class qs extends mt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new qs(g)}}function Ha(_,p,g){var w;X((null===(w=g.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),X(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(X(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(X(g.android.packageName.length>0,_,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function uc(_,p,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_),A={requestType:"PASSWORD_RESET",email:p};g&&Ha(w,A,g),yield Ql(w,A)})).apply(this,arguments)}function lc(_,p,g){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(_,p,g){yield $s((0,L.m9)(_),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Yd(_,p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,f.Z)(function*(_,p){yield mo((0,L.m9)(_),{oobCode:p})})).apply(this,arguments)}function Ne(_,p){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(_,p){const g=(0,L.m9)(_),w=yield $s(g,{oobCode:p}),A=w.requestType;switch(X(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(w.mfaInfo,g,"internal-error");default:X(w.email,g,"internal-error")}let P=null;return w.mfaInfo&&(P=mt._fromServerResponse(Ue(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function Ga(_,p){return mn.apply(this,arguments)}function mn(){return(mn=(0,f.Z)(function*(_,p){const{data:g}=yield Ne((0,L.m9)(_),p);return g.email})).apply(this,arguments)}function cc(_,p,g){return os.apply(this,arguments)}function os(){return(os=(0,f.Z)(function*(_,p,g){const w=Ue(_),A=yield sc(w,{returnSecureToken:!0,email:p,password:g}),P=yield Dr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function Li(_,p,g){return $a((0,L.m9)(_),Jo.credential(p,g))}function zu(_,p,g){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_),A={requestType:"EMAIL_SIGNIN",email:p};X(g.handleCodeInApp,w,"argument-error"),g&&Ha(w,A,g),yield wi(w,A)})).apply(this,arguments)}function Qd(_,p){const g=ns.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}function dc(_,p,g){return hc.apply(this,arguments)}function hc(){return(hc=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_),A=Jo.credentialWithLink(p,g||le());return X(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),$a(w,A)})).apply(this,arguments)}function Zs(_,p){return ar.apply(this,arguments)}function ar(){return(ar=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:createAuthUri",kt(_,p))})).apply(this,arguments)}function Vi(_,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,f.Z)(function*(_,p){const w={identifier:p,continueUri:Le()?le():"http://localhost"},{signinMethods:A}=yield Zs((0,L.m9)(_),w);return A||[]})).apply(this,arguments)}function Co(_,p){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(_,p){const g=(0,L.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};p&&Ha(g.auth,A,p);const{email:P}=yield Or(g.auth,A);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function Jd(_,p,g){return To.apply(this,arguments)}function To(){return(To=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:p};g&&Ha(w.auth,P,g);const{email:te}=yield Jl(w.auth,P);te!==_.email&&(yield _.reload())})).apply(this,arguments)}function fc(_,p){return sa.apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(_,p){return Wt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wu(_,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(_,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const w=(0,L.m9)(_),P={idToken:yield w.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},te=yield nt(w,fc(w.auth,P));w.displayName=te.displayName||null,w.photoURL=te.photoUrl||null;const xe=w.providerData.find(({providerId:Je})=>"password"===Je);xe&&(xe.displayName=w.displayName,xe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(te)})).apply(this,arguments)}function pc(_,p){return qu((0,L.m9)(_),p,null)}function gc(_,p){return qu((0,L.m9)(_),null,p)}function qu(_,p,g){return oa.apply(this,arguments)}function oa(){return(oa=(0,f.Z)(function*(_,p,g){const{auth:w}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};p&&(P.email=p),g&&(P.password=g);const te=yield nt(_,St(w,P));yield _._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Ks{constructor(p,g,w={}){this.isNewUser=p,this.providerId=g,this.profile=w}}class mc extends Ks{constructor(p,g,w,A){super(p,g,w),this.username=A}}class Xd extends Ks{constructor(p,g){super(p,"facebook.com",g)}}class za extends mc{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Qr extends Ks{constructor(p,g){super(p,"google.com",g)}}class eh extends mc{constructor(p,g,w){super(p,"twitter.com",g,w)}}function Zu(_){const{user:p,_tokenResponse:g}=_;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function aa(_){var p,g;if(!_)return null;const{providerId:w}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const te=null===(g=null===(p=jt(_.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(te)return new Ks(P,"anonymous"!==te&&"custom"!==te?te:null)}if(!w)return null;switch(w){case"facebook.com":return new Xd(P,A);case"github.com":return new za(P,A);case"google.com":return new Qr(P,A);case"twitter.com":return new eh(P,A,_.screenName||null);case"custom":case"anonymous":return new Ks(P,null);default:return new Ks(P,w,A)}}(g)}class as{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new as("enroll",p)}static _fromMfaPendingCredential(p){return new as("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,w;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return as._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return as._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ua{constructor(p,g,w){this.session=p,this.hints=g,this.signInResolver=w}static _fromError(p,g){const w=Ue(p),A=g.customData._serverResponse,P=(A.mfaInfo||[]).map(xe=>mt._fromServerResponse(w,xe));X(A.mfaPendingCredential,w,"internal-error");const te=as._fromMfaPendingCredential(A.mfaPendingCredential);return new ua(te,P,function(){var xe=(0,f.Z)(function*(Je){const pt=yield Je._process(w,te);delete A.mfaInfo,delete A.mfaPendingCredential;const bt=Object.assign(Object.assign({},A),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(g.operationType){case"signIn":const Pn=yield Dr._fromIdTokenResponse(w,g.operationType,bt);return yield w._updateCurrentUser(Pn.user),Pn;case"reauthenticate":return X(g.user,w,"internal-error"),Dr._forOperation(g.user,g.operationType,bt);default:He(w,"internal-error")}});return function(Je){return xe.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,f.Z)(function*(){return g.signInResolver(p)})()}}function la(_,p){var g;const w=(0,L.m9)(_),A=p;return X(p.customData.operationType,w,"argument-error"),X(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),ua._fromError(w,A)}function Zn(_,p){return Wt(_,"POST","/v2/accounts/mfaEnrollment:start",kt(_,p))}class us{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>mt._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new us(p)}getSession(){var p=this;return(0,f.Z)(function*(){return as._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var w=this;return(0,f.Z)(function*(){const A=p,P=yield w.getSession(),te=yield nt(w.user,A._process(w.user.auth,P,g));return yield w.user._updateTokensIfNecessary(te),w.user.reload()})()}unenroll(p){var g=this;return(0,f.Z)(function*(){const w="string"==typeof p?p:p.uid,A=yield g.user.getIdToken(),P=yield nt(g.user,function Yf(_,p){return Wt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(_,p))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:te})=>te!==w),yield g.user._updateTokensIfNecessary(P);try{yield g.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const So=new WeakMap;function Ec(_){const p=(0,L.m9)(_);return So.has(p)||So.set(p,us._fromUser(p)),So.get(p)}const Ku="__sak";class Qs{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ku,"1"),this.storage.removeItem(Ku),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const lt=(()=>{class _ extends Qs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yu(){const _=(0,L.z$)();return G(_)||Nt(_)}()&&function ki(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=wr(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),P=this.localCache[w];A!==P&&g(w,P,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((xe,Je,pt)=>{this.notifyListeners(xe,pt)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(A);if(g.newValue!==xe)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const P=()=>{const xe=this.storage.getItem(A);!w&&this.localCache[A]===xe||this.notifyListeners(A,xe)},te=this.storage.getItem(A);!function Ot(){return(0,L.w1)()&&10===document.documentMode}()||te===g.newValue||g.newValue===g.oldValue?P():setTimeout(P,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const P of Array.from(A))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,P=this;return(0,f.Z)(function*(){yield A().call(P,g,w),P.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,f.Z)(function*(){const P=yield w().call(A,g);return A.localCache[g]=JSON.stringify(P),P})()}_remove(g){var w=()=>super._remove,A=this;return(0,f.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return _.type="LOCAL",_})(),Pr=(()=>{class _ extends Qs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return _.type="SESSION",_})();let ca=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(P=>P.isListeningto(g));if(w)return w;const A=new _(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,f.Z)(function*(){const A=g,{eventId:P,eventType:te,data:xe}=A.data,Je=w.handlersMap[te];if(!(null==Je?void 0:Je.size))return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:te});const pt=Array.from(Je).map(function(){var Pn=(0,f.Z)(function*(Wi){return Wi(A.origin,xe)});return function(Wi){return Pn.apply(this,arguments)}}()),bt=yield function Di(_){return Promise.all(_.map(function(){var p=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return p.apply(this,arguments)}}()))}(pt);A.ports[0].postMessage({status:"done",eventId:P,eventType:te,response:bt})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Mo(_="",p=10){let g="";for(let w=0;w<p;w++)g+=Math.floor(10*Math.random());return _+g}class wc{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,w=50){var A=this;return(0,f.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let te,xe;return new Promise((Je,pt)=>{const bt=Mo("",20);P.port1.start();const Pn=setTimeout(()=>{pt(new Error("unsupported_event"))},w);xe={messageChannel:P,onMessage(Wi){const Ps=Wi;if(Ps.data.eventId===bt)switch(Ps.data.status){case"ack":clearTimeout(Pn),te=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),Je(Ps.data.response);break;default:clearTimeout(Pn),clearTimeout(te),pt(new Error("invalid_response"))}}},A.handlers.add(xe),P.port1.addEventListener("message",xe.onMessage),A.target.postMessage({eventType:p,eventId:bt,data:g},[P.port2])}).finally(()=>{xe&&A.removeMessageHandler(xe)})})()}}function fn(){return window}function Bi(){return void 0!==fn().WorkerGlobalScope&&"function"==typeof fn().importScripts}function It(){return(It=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const qa="firebaseLocalStorageDb",zn="firebaseLocalStorage",xo="fbase_key";class ls{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ro(_,p){return _.transaction([zn],p?"readwrite":"readonly").objectStore(zn)}function cs(){const _=indexedDB.open(qa,1);return new Promise((p,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(zn,{keyPath:xo})}catch(A){g(A)}}),_.addEventListener("success",(0,f.Z)(function*(){const w=_.result;w.objectStoreNames.contains(zn)?p(w):(w.close(),yield function Jr(){const _=indexedDB.deleteDatabase(qa);return new ls(_).toPromise()}(),p(yield cs()))}))})}function No(_,p,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(_,p,g){const w=Ro(_,!0).put({[xo]:p,value:g});return new ls(w).toPromise()})).apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(_,p){const g=Ro(_,!1).get(p),w=yield new ls(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Xs(_,p){const g=Ro(_,!0).delete(p);return new ls(g).toPromise()}const bi=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield cs()),g.db})()}_withRetries(g){var w=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const P=yield w._openDb();return yield g(P)}catch(P){if(A++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Bi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=ca._getInstance(function Dc(){return Bi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,f.Z)(function*(A,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(A,P){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,f.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function Ts(){return It.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new wc(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,f.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Jf(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield cs();return yield No(g,Ku,"1"),yield Xs(g,Ku),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,f.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(P=>No(P,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,f.Z)(function*(){const A=yield w._withRetries(P=>function Oo(_,p){return As.apply(this,arguments)}(P,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,f.Z)(function*(){return w._withPendingWrite((0,f.Z)(function*(){return yield w._withRetries(A=>Xs(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const w=yield g._withRetries(te=>{const xe=Ro(te,!1).getAll();return new ls(xe).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:te,value:xe}of w)P.add(te),JSON.stringify(g.localCache[te])!==JSON.stringify(xe)&&(g.notifyListeners(te,xe),A.push(te));for(const te of Object.keys(g.localCache))g.localCache[te]&&!P.has(te)&&(g.notifyListeners(te,null),A.push(te));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const P of Array.from(A))P(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Cc(_,p){return Wt(_,"POST","/v2/accounts/mfaSignIn:start",kt(_,p))}function ji(){return(ji=(0,f.Z)(function*(_){return(yield Wt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ss(_){return new Promise((p,g)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=p,w.onerror=A=>{const P=Se("internal-error");P.customData=A,g(P)},w.type="text/javascript",w.charset="UTF-8",function pr(){var _,p;return null!==(p=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==p?p:document}().appendChild(w)})}function eo(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Wn=1e12;class xs{constructor(p){this.auth=p,this.counter=Wn,this._widgets=new Map}render(p,g){const w=this.counter;return this._widgets.set(w,new Kn(p,this.auth.name,g||{})),this.counter++,w}reset(p){var g;const w=p||Wn;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Wn))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,f.Z)(function*(){var w;return null===(w=g._widgets.get(p||Wn))||void 0===w||w.execute(),""})()}}class Kn{constructor(p,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;X(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Hi(_){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Po=eo("rcb"),nh=new Ze(3e4,6e4);class rh{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!fn().grecaptcha}load(p,g=""){return X(function ym(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(fn().grecaptcha):new Promise((w,A)=>{const P=fn().setTimeout(()=>{A(Se(p,"network-request-failed"))},nh.get());fn()[Po]=()=>{fn().clearTimeout(P),delete fn()[Po];const xe=fn().grecaptcha;if(!xe)return void A(Se(p,"internal-error"));const Je=xe.render;xe.render=(pt,bt)=>{const Pn=Je(pt,bt);return this.counter++,Pn},this.hostLanguage=g,w(xe)},Ss(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Po,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),A(Se(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!fn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ko{load(p){return(0,f.Z)(function*(){return new xs(p)})()}clearedOneInstance(){}}const kr="recaptcha",ih={theme:"light",type:"image"};class Rs{constructor(p,g=Object.assign({},ih),w){this.parameters=g,this.type=kr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ue(w),this.isInvisible="invisible"===this.parameters.size,X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;X(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ko:new rh,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(g)||new Promise(P=>{const te=xe=>{!xe||(p.tokenChangeListeners.delete(te),P(xe))};p.tokenChangeListeners.add(te),p.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof p)p(g);else if("string"==typeof p){const w=fn()[p];"function"==typeof w&&w(g)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){X(Le()&&!Bi(),p.auth,"internal-error"),yield function Tc(){let _=null;return new Promise(p=>{"complete"!==document.readyState?(_=()=>p(),window.addEventListener("load",_)):p()}).catch(p=>{throw _&&window.removeEventListener("load",_),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function Ju(_){return ji.apply(this,arguments)}(p.auth);X(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ci{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Eo._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function sh(_,p,g){return On.apply(this,arguments)}function On(){return(On=(0,f.Z)(function*(_,p,g){const w=Ue(_),A=yield br(w,p,(0,L.m9)(g));return new Ci(A,P=>$a(w,P))})).apply(this,arguments)}function Xu(_,p,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_);yield Is(!1,w,"phone");const A=yield br(w.auth,p,(0,L.m9)(g));return new Ci(A,P=>ss(w,P))})).apply(this,arguments)}function Xf(_,p,g){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_),A=yield br(w.auth,p,(0,L.m9)(g));return new Ci(A,P=>Io(w,P))})).apply(this,arguments)}function br(_,p,g){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,f.Z)(function*(_,p,g){var w;const A=yield g.verify();try{let P;if(X("string"==typeof A,_,"argument-error"),X(g.type===kr,_,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const te=P.session;if("phoneNumber"in P)return X("enroll"===te.type,_,"internal-error"),(yield Zn(_,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{X("signin"===te.type,_,"internal-error");const xe=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return X(xe,_,"missing-multi-factor-info"),(yield Cc(_,{mfaPendingCredential:te.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Hf(_,{phoneNumber:P.phoneNumber,recaptchaToken:A});return te}}finally{g._reset()}})).apply(this,arguments)}function Ya(_,p){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(_,p){yield hn((0,L.m9)(_),p)})).apply(this,arguments)}let to=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=Ue(g)}verifyPhoneNumber(g,w){return br(this.auth,g,(0,L.m9)(w))}static credential(g,w){return Eo._fromVerification(g,w)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?Eo._fromTokenResponse(w,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Gi(_,p){return p?ee(p):(X(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class ha extends nn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Hn(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Hn(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Hn(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Qa(_){return Ws(_.auth,new ha(_),_.bypassAuthState)}function Rt(_){const{auth:p,user:g}=_;return X(g,p,"internal-error"),ja(g,new ha(_),_.bypassAuthState)}function Ac(_){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,f.Z)(function*(_){const{auth:p,user:g}=_;return X(g,p,"internal-error"),hn(g,new ha(_),_.bypassAuthState)})).apply(this,arguments)}class Lr{constructor(p,g,w,A,P=!1){this.auth=p,this.resolver=w,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,f.Z)(function*(w,A){p.pendingPromise={resolve:w,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,f.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:P,tenantId:te,error:xe,type:Je}=p;if(xe)return void g.reject(xe);const pt={auth:g.auth,requestUri:w,sessionId:A,tenantId:te||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Je)(pt))}catch(bt){g.reject(bt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Qa;case"linkViaPopup":case"linkViaRedirect":return Ac;case"reauthViaPopup":case"reauthViaRedirect":return Rt;default:He(this.auth,"internal-error")}}resolve(p){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){we(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ja=new Ze(2e3,1e4);function fa(_,p,g){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(_,p,g){const w=Ue(_);Ee(_,p,ws);const A=Gi(w,g);return new eu(w,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function Mc(_,p,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_);Ee(w.auth,p,ws);const A=Gi(w.auth,g);return new eu(w.auth,"reauthViaPopup",p,A,w).executeNotNull()})).apply(this,arguments)}function el(_,p,g){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_);Ee(w.auth,p,ws);const A=Gi(w.auth,g);return new eu(w.auth,"linkViaPopup",p,A,w).executeNotNull()})).apply(this,arguments)}let eu=(()=>{class _ extends Lr{constructor(g,w,A,P,te){super(g,w,P,te),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const w=yield g.execute();return X(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,f.Z)(function*(){we(1===g.filter.length,"Popup operations only handle one event");const w=Mo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Se(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ja.get())};g()}}return _.currentPopupAction=null,_})();const Cn=new Map;class Yn extends Lr{constructor(p,g,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,f.Z)(function*(){let w=Cn.get(g.auth._key());if(!w){try{const P=(yield function tl(_,p){return oh.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;w=()=>Promise.resolve(P)}catch(A){w=()=>Promise.reject(A)}Cn.set(g.auth._key(),w)}return g.bypassAuthState||Cn.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,w=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(w,p);if("unknown"!==p.type){if(p.eventId){const A=yield w.auth._redirectUserForId(p.eventId);if(A)return w.user=A,g().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function oh(){return(oh=(0,f.Z)(function*(_,p){const g=b(p),w=D(_);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function ds(_,p){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,f.Z)(function*(_,p){return D(_)._set(b(p),"true")})).apply(this,arguments)}function tu(){Cn.clear()}function nl(_,p){Cn.set(_._key(),p)}function D(_){return ee(_._redirectPersistence)}function b(_){return vt("pendingRedirect",_.config.apiKey,_.name)}function M(_,p,g){return function F(_,p,g){return K.apply(this,arguments)}(_,p,g)}function K(){return(K=(0,f.Z)(function*(_,p,g){const w=Ue(_);Ee(_,p,ws);const A=Gi(w,g);return yield ds(A,w),A._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function Y(_,p,g){return function Fe(_,p,g){return Ge.apply(this,arguments)}(_,p,g)}function Ge(){return(Ge=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_);Ee(w.auth,p,ws);const A=Gi(w.auth,g);yield ds(A,w.auth);const P=yield Ns(w);return A._openRedirect(w.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function gt(_,p,g){return function Dt(_,p,g){return Vt.apply(this,arguments)}(_,p,g)}function Vt(){return(Vt=(0,f.Z)(function*(_,p,g){const w=(0,L.m9)(_);Ee(w.auth,p,ws);const A=Gi(w.auth,g);yield Is(!1,w,p.providerId),yield ds(A,w.auth);const P=yield Ns(w);return A._openRedirect(w.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function Et(_,p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,f.Z)(function*(_,p){return yield Ue(_)._initializationPromise,Tn(_,p,!1)})).apply(this,arguments)}function Tn(_,p){return zi.apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(_,p,g=!1){const w=Ue(_),A=Gi(w,p),te=yield new Yn(w,A,g).execute();return te&&!g&&(delete te.user._redirectEventId,yield w._persistUserIfCurrent(te.user),yield w._setRedirectUser(null,p)),te})).apply(this,arguments)}function Ns(_){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,f.Z)(function*(_){const p=Mo(`${_.uid}:::`);return _._redirectEventId=p,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),p})).apply(this,arguments)}class Xr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(g=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Rc(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xc(_);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var w;if(p.error&&!xc(p)){const A=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Se(this.auth,A))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const w=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bo(p))}saveEventToCache(p){this.cachedEventUids.add(Bo(p)),this.lastProcessedEventTime=Date.now()}}function Bo(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(p=>p).join("-")}function xc({type:_,error:p}){return"unknown"===_&&"auth/no-auth-event"===(null==p?void 0:p.code)}function rl(_){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,f.Z)(function*(_,p={}){return Wt(_,"GET","/v1/projects",p)})).apply(this,arguments)}const _m=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oc=/^https?/;function pa(){return(pa=(0,f.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:p}=yield rl(_);for(const g of p)try{if(vm(g))return}catch(w){}He(_,"unauthorized-domain")})).apply(this,arguments)}function vm(_){const p=le(),{protocol:g,hostname:w}=new URL(p);if(_.startsWith("chrome-extension://")){const te=new URL(_);return""===te.hostname&&""===w?"chrome-extension:"===g&&_.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&te.hostname===w}if(!Oc.test(g))return!1;if(_m.test(_))return w===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const mv=new Ze(3e4,6e4);function ah(){const _=fn().___jsl;if(null==_?void 0:_.H)for(const p of Object.keys(_.H))if(_.H[p].r=_.H[p].r||[],_.H[p].L=_.H[p].L||[],_.H[p].r=[..._.H[p].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let il=null;function uh(_){return il=il||function ep(_){return new Promise((p,g)=>{var w,A,P;function te(){ah(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ah(),g(Se(_,"network-request-failed"))},timeout:mv.get()})}if(null===(A=null===(w=fn().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)p(gapi.iframes.getContext());else{if(!(null===(P=fn().gapi)||void 0===P?void 0:P.load)){const xe=eo("iframefcb");return fn()[xe]=()=>{gapi.load?te():g(Se(_,"network-request-failed"))},Ss(`https://apis.google.com/js/api.js?onload=${xe}`).catch(Je=>g(Je))}te()}}).catch(p=>{throw il=null,p})}(_),il}const no=new Ze(5e3,15e3),Pc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function su(_){const p=_.config;X(p.authDomain,_,"auth-domain-config-required");const g=p.emulator?on(p,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:_.name,v:R.SDK_VERSION},A=iu.get(_.config.apiHost);A&&(w.eid=A);const P=_._getFrameworks();return P.length&&(w.fw=P.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function np(){return np=(0,f.Z)(function*(_){const p=yield uh(_),g=fn().gapi;return X(g,_,"internal-error"),p.open({where:document.body,url:su(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pc,dontclear:!0},w=>new Promise(function(){var A=(0,f.Z)(function*(P,te){yield w.restyle({setHideOnLeave:!1});const xe=Se(_,"network-request-failed"),Je=fn().setTimeout(()=>{te(xe)},no.get());function pt(){fn().clearTimeout(Je),P(w)}w.ping(pt).then(pt,()=>{te(xe)})});return function(P,te){return A.apply(this,arguments)}}()))}),np.apply(this,arguments)}const ga={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ol{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function ch(_,p,g,w,A,P){X(_.config.authDomain,_,"auth-domain-config-required"),X(_.config.apiKey,_,"invalid-api-key");const te={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:w,v:R.SDK_VERSION,eventId:A};if(p instanceof ws){p.setDefaultLanguage(_.languageCode),te.providerId=p.providerId||"",(0,L.xb)(p.getCustomParameters())||(te.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Je,pt]of Object.entries(P||{}))te[Je]=pt}if(p instanceof gi){const Je=p.getScopes().filter(pt=>""!==pt);Je.length>0&&(te.scopes=Je.join(","))}_.tenantId&&(te.tid=_.tenantId);const xe=te;for(const Je of Object.keys(xe))void 0===xe[Je]&&delete xe[Je];return`${function hs({config:_}){return _.emulator?on(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(xe).slice(1)}`}const fs="webStorageSupport",rp=class dh{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pr,this._completeRedirectFn=Tn,this._overrideRedirectResult=nl}_openPopup(p,g,w,A){var P=this;return(0,f.Z)(function*(){var te;we(null===(te=P.eventManagers[p._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const xe=ch(p,g,w,le(),A);return function Em(_,p,g,w=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),te=Math.max((window.screen.availWidth-w)/2,0).toString();let xe="";const Je=Object.assign(Object.assign({},ga),{width:w.toString(),height:A.toString(),top:P,left:te}),pt=(0,L.z$)().toLowerCase();g&&(xe=Te(pt)?"_blank":g),W(pt)&&(p=p||"http://localhost",Je.scrollbars="yes");const bt=Object.entries(Je).reduce((Wi,[Ps,ou])=>`${Wi}${Ps}=${ou},`,"");if(function qr(_=(0,L.z$)()){var p;return Nt(_)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(pt)&&"_self"!==xe)return function al(_,p){const g=document.createElement("a");g.href=_,g.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(p||"",xe),new ol(null);const Pn=window.open(p||"",xe,bt);X(Pn,_,"popup-blocked");try{Pn.focus()}catch(Wi){}return new ol(Pn)}(p,xe,Mo())})()}_openRedirect(p,g,w,A){var P=this;return(0,f.Z)(function*(){return yield P._originValidation(p),function Ic(_){fn().location.href=_}(ch(p,g,w,le(),A)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:A,promise:P}=this.eventManagers[g];return A?Promise.resolve(A):(we(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(p);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(p){var g=this;return(0,f.Z)(function*(){const w=yield function tp(_){return np.apply(this,arguments)}(p),A=new Xr(p);return w.register("authEvent",P=>(X(null==P?void 0:P.authEvent,p,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:A},g.iframes[p._key()]=w,A})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(fs,{type:fs},A=>{var P;const te=null===(P=null==A?void 0:A[0])||void 0===P?void 0:P[fs];void 0!==te&&g(!!te),He(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function nu(_){return pa.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return wr()||G()||Nt()}};class ip extends class Dm{constructor(p){this.factorId=p}_process(p,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,w);case"signin":return this._finalizeSignIn(p,g.credential);default:return ce("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ip(p)}_finalizeEnroll(p,g,w){return function vc(_,p){return Wt(_,"POST","/v2/accounts/mfaEnrollment:finalize",kt(_,p))}(p,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function fr(_,p){return Wt(_,"POST","/v2/accounts/mfaSignIn:finalize",kt(_,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sp=(()=>{class _{constructor(){}static assertion(g){return ip._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var bm="@firebase/auth";class Cm{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(w=>{var A;p((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Vc(_){(0,R._registerComponent)(new ge.wA("auth",(p,{options:g})=>{const w=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),{apiKey:P,authDomain:te}=w.options;return((xe,Je)=>{X(P&&!P.includes(":"),"invalid-api-key",{appName:xe.name}),X(!(null==te?void 0:te.includes(":")),"argument-error",{appName:xe.name});const pt={apiKey:P,authDomain:te,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ir(_)},bt=new Zr(xe,Je,pt);return function _e(_,p){const g=(null==p?void 0:p.persistence)||[],w=(Array.isArray(g)?g:[g]).map(ee);(null==p?void 0:p.errorMap)&&_._updateErrorMap(p.errorMap),_._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(bt,g),bt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,w)=>{p.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new ge.wA("auth-internal",p=>{const g=Ue(p.getProvider("auth").getImmediate());return new Cm(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(bm,"0.20.1",function op(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,R.registerVersion)(bm,"0.20.1","esm2017")}("Browser")},2090:(tt,De,O)=>{O.d(De,{$s:()=>Ft,BH:()=>We,G6:()=>X,L:()=>ae,LL:()=>le,Mn:()=>Ee,Sg:()=>Ae,UG:()=>fe,US:()=>ge,ZB:()=>U,ZR:()=>_e,b$:()=>He,d:()=>Se,eu:()=>we,hl:()=>ce,jU:()=>Ce,m9:()=>an,ne:()=>Oi,pd:()=>Ei,r3:()=>kt,ru:()=>ze,tV:()=>me,uI:()=>je,vZ:()=>vr,w1:()=>Me,xO:()=>Ni,xb:()=>_n,z$:()=>ke,zI:()=>Z,zd:()=>ci});const se=function(V){const H=[];let z=0;for(let ve=0;ve<V.length;ve++){let j=V.charCodeAt(ve);j<128?H[z++]=j:j<2048?(H[z++]=j>>6|192,H[z++]=63&j|128):55296==(64512&j)&&ve+1<V.length&&56320==(64512&V.charCodeAt(ve+1))?(j=65536+((1023&j)<<10)+(1023&V.charCodeAt(++ve)),H[z++]=j>>18|240,H[z++]=j>>12&63|128,H[z++]=j>>6&63|128,H[z++]=63&j|128):(H[z++]=j>>12|224,H[z++]=j>>6&63|128,H[z++]=63&j|128)}return H},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,H){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let j=0;j<V.length;j+=3){const J=V[j],Oe=j+1<V.length,Xe=Oe?V[j+1]:0,ht=j+2<V.length,At=ht?V[j+2]:0;let $n=(15&Xe)<<2|At>>6,ue=63&At;ht||(ue=64,Oe||($n=64)),ve.push(z[J>>2],z[(3&J)<<4|Xe>>4],z[$n],z[ue])}return ve.join("")},encodeString(V,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(V):this.encodeByteArray(se(V),H)},decodeString(V,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(V):function(V){const H=[];let z=0,ve=0;for(;z<V.length;){const j=V[z++];if(j<128)H[ve++]=String.fromCharCode(j);else if(j>191&&j<224){const J=V[z++];H[ve++]=String.fromCharCode((31&j)<<6|63&J)}else if(j>239&&j<365){const ht=((7&j)<<18|(63&V[z++])<<12|(63&V[z++])<<6|63&V[z++])-65536;H[ve++]=String.fromCharCode(55296+(ht>>10)),H[ve++]=String.fromCharCode(56320+(1023&ht))}else{const J=V[z++],Oe=V[z++];H[ve++]=String.fromCharCode((15&j)<<12|(63&J)<<6|63&Oe)}}return H.join("")}(this.decodeStringToByteArray(V,H))},decodeStringToByteArray(V,H){this.init_();const z=H?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let j=0;j<V.length;){const J=z[V.charAt(j++)],Xe=j<V.length?z[V.charAt(j)]:0;++j;const At=j<V.length?z[V.charAt(j)]:64;++j;const vt=j<V.length?z[V.charAt(j)]:64;if(++j,null==J||null==Xe||null==At||null==vt)throw Error();ve.push(J<<2|Xe>>4),64!==At&&(ve.push(Xe<<4&240|At>>2),64!==vt&&ve.push(At<<6&192|vt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},ae=function(V){return function(V){const H=se(V);return ge.encodeByteArray(H,!0)}(V).replace(/\./g,"")},me=function(V){try{return ge.decodeString(V,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function U(V,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return H}for(const z in H)!H.hasOwnProperty(z)||!re(z)||(V[z]=U(V[z],H[z]));return V}function re(V){return"__proto__"!==V}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,z)=>{this.resolve=H,this.reject=z})}wrapCallback(H){return(z,ve)=>{z?this.reject(z):this.resolve(ve),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(z):H(z,ve))}}}function Ae(V,H){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=H||"demo-project",j=V.iat||0,J=V.sub||V.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Oe=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:j,exp:j+3600,auth_time:j,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},V);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Oe)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function ze(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function He(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Se(){return ke().indexOf("Electron/")>=0}function Me(){const V=ke();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Ee(){return ke().indexOf("MSAppHost/")>=0}function X(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ce(){return"object"==typeof indexedDB}function we(){return new Promise((V,H)=>{try{let z=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",j=self.indexedDB.open(ve);j.onsuccess=()=>{j.result.close(),z||self.indexedDB.deleteDatabase(ve),V(!0)},j.onupgradeneeded=()=>{z=!1},j.onerror=()=>{var J;H((null===(J=j.error)||void 0===J?void 0:J.message)||"")}}catch(z){H(z)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class _e extends Error{constructor(H,z,ve){super(z),this.code=H,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(H,z,ve){this.service=H,this.serviceName=z,this.errors=ve}create(H,...z){const ve=z[0]||{},j=`${this.service}/${H}`,J=this.errors[H],Oe=J?function Le(V,H){return V.replace(dt,(z,ve)=>{const j=H[ve];return null!=j?String(j):`<${ve}?>`})}(J,ve):"Error";return new _e(j,`${this.serviceName}: ${Oe} (${j}).`,ve)}}const dt=/\{\$([^}]+)}/g;function kt(V,H){return Object.prototype.hasOwnProperty.call(V,H)}function _n(V){for(const H in V)if(Object.prototype.hasOwnProperty.call(V,H))return!1;return!0}function vr(V,H){if(V===H)return!0;const z=Object.keys(V),ve=Object.keys(H);for(const j of z){if(!ve.includes(j))return!1;const J=V[j],Oe=H[j];if(wn(J)&&wn(Oe)){if(!vr(J,Oe))return!1}else if(J!==Oe)return!1}for(const j of ve)if(!z.includes(j))return!1;return!0}function wn(V){return null!==V&&"object"==typeof V}function Ni(V){const H=[];for(const[z,ve]of Object.entries(V))Array.isArray(ve)?ve.forEach(j=>{H.push(encodeURIComponent(z)+"="+encodeURIComponent(j))}):H.push(encodeURIComponent(z)+"="+encodeURIComponent(ve));return H.length?"&"+H.join("&"):""}function ci(V){const H={};return V.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[j,J]=ve.split("=");H[decodeURIComponent(j)]=decodeURIComponent(J)}}),H}function Ei(V){const H=V.indexOf("?");if(!H)return"";const z=V.indexOf("#",H);return V.substring(H,z>0?z:void 0)}function Oi(V,H){const z=new ft(V,H);return z.subscribe.bind(z)}class ft{constructor(H,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{H(this)}).catch(ve=>{this.error(ve)})}next(H){this.forEachObserver(z=>{z.next(H)})}error(H){this.forEachObserver(z=>{z.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,z,ve){let j;if(void 0===H&&void 0===z&&void 0===ve)throw new Error("Missing Observer.");j=function gn(V,H){if("object"!=typeof V||null===V)return!1;for(const z of H)if(z in V&&"function"==typeof V[z])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:z,complete:ve},void 0===j.next&&(j.next=qt),void 0===j.error&&(j.error=qt),void 0===j.complete&&(j.complete=qt);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?j.error(this.finalError):j.complete()}catch(Oe){}}),this.observers.push(j),J}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,H)}sendOne(H,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{z(this.observers[H])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qt(){}function Ft(V,H=1e3,z=2){const ve=H*Math.pow(z,V),j=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+j)}function an(V){return V&&V._delegate?V._delegate:V}},4795:(tt,De,O)=>{var f=O(5e3);let L=null;function R(){return L}const he=new f.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function me(){return(0,f.LFG)(U)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let U=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){re()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){re()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function We(){return new U((0,f.LFG)(he))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,f.LFG)(he).location;return new He((0,f.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const ze=new f.OlP("appBaseHref");let He=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+je(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+je(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae),f.LFG(ze,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ae),f.LFG(ze,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(X(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,X(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=je,n.joinWithSlash=Ae,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(ae))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,f.LFG)(fe),(0,f.LFG)(ae))}()},providedIn:"root"}),n})();function X(n){return n.replace(/\/index.html$/,"")}class _o{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new _o(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),vs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{vs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function vs(n,e){n.context.$implicit=e.item}let Or=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new un,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ql("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ql("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class un{constructor(){this.$implicit=null,this.ngIf=null}}function Ql(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let zs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Dr(n){return"server"===n}let Ua=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Ba((0,f.LFG)(he),window)}),n})();class Ba{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function is(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$u(this.window.history)||$u(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function $u(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Is extends class ta extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){L||(L=n)}(new Is)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ja(){return ln=ln||document.querySelector("base"),ln?ln.getAttribute("href"):null}();return null==t?null:function Ws(n){na=na||document.createElement("a"),na.setAttribute("href",n);const e=na.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ln=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function go(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let na,ln=null;const sr=new f.OlP("TRANSITION_ID"),Rn=[{provide:f.ip1,useFactory:function $a(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=R(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[sr,he,f.zs3],multi:!0}];class ss{static init(){(0,f.VLi)(new ss)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(E){d=d||E,u--,0==u&&r(d)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let or=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Io=new f.OlP("EventManagerPlugins");let Fi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Io),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=R().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ds=(()=>{class n extends Kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(bs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(bs))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function bs(n){R().remove(n)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qs=/%COMP%/g;function Cs(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Cs(n,o,t):(o=o.replace(qs,n),t.push(o))}return t}function Ne(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ga=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new mn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Li(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new zu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Cs(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Fi),f.LFG(Ds),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class mn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=mt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=mt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ne(r)):this.eventManager.addEventListener(e,t,Ne(r))}}class Li extends mn{constructor(e,t,r,o){super(e),this.component=r;const u=Cs(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Do(n){return"_ngcontent-%COMP%".replace(qs,n)}(o+"-"+r.id),this.hostAttr=function Yd(n){return"_nghost-%COMP%".replace(qs,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class zu extends mn{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Cs(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ia=(()=>{class n extends Gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Qd=["alt","control","meta","shift"],hc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ar={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Vi=(()=>{class n extends Gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(Qd.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),d+=E+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function bo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Zs.hasOwnProperty(e)&&(e=Zs[e]))}return hc[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Qd.forEach(u=>{u!=o&&ar[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(he))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const fc=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Co(){Is.makeCurrent(),ss.init()},multi:!0},{provide:he,useFactory:function Jd(){return(0,f.RDi)(document),document},deps:[]}]),sa=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Yr(){return new f.qLn},deps:[]},{provide:Io,useClass:ia,multi:!0,deps:[he,f.R0b,f.Lbi]},{provide:Io,useClass:Vi,multi:!0,deps:[he]},{provide:Ga,useClass:Ga,deps:[Fi,Ds,f.AFp]},{provide:f.FYo,useExisting:Ga},{provide:Kr,useExisting:Ds},{provide:Ds,useClass:Ds,deps:[he]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Fi,useClass:Fi,deps:[Io,f.R0b]},{provide:class hn{},useClass:or,deps:[]}];let Wu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:sr,useExisting:f.AFp},Rn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:sa,imports:[zs,f.hGG]}),n})();"undefined"!=typeof window&&window;var bn=O(8996),Wa=O(7669);function lt(...n){const e=(0,Wa.yG)(n);return(0,bn.D)(n,e)}var Ui=O(7579);class Pr extends Ui.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Di=O(8306);const{isArray:ca}=Array,{getPrototypeOf:Mo,prototype:wc,keys:fn}=Object;function Ic(n){if(1===n.length){const e=n[0];if(ca(e))return{args:e,keys:null};if(function Bi(n){return n&&"object"==typeof n&&Mo(n)===wc}(e)){const t=fn(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ts=O(4671),It=O(4004);const{isArray:Jf}=Array;function qa(n){return(0,It.U)(e=>function Dc(n,e){return Jf(e)?n(...e):n(e)}(n,e))}function bc(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var zn=O(5403),xo=O(9672);function Jr(n,e,t){n?(0,xo.f)(t,n,e):e()}var cs=O(576);function No(n,e){const t=(0,cs.m)(n)?n:()=>n,r=o=>o.error(t());return new Di.y(e?o=>e.schedule(r,0,o):r)}const Oo=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var As=O(8189);function da(...n){return function Xs(){return(0,As.J)(1)}()((0,bn.D)(n,(0,Wa.yG)(n)))}var Qu=O(8421);function Za(n){return new Di.y(e=>{(0,Qu.Xf)(n()).subscribe(e)})}var bi=O(515),Cc=O(727),fr=O(4482);function Ju(){return(0,fr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ji extends Di.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,fr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Cc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Cc.w0.EMPTY)}return e}refCount(){return Ju()(this)}}function pr(n,e){return(0,fr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,zn.x)(r,E=>{null==o||o.unsubscribe();let C=0;const x=u++;(0,Qu.Xf)(n(E,x)).subscribe(o=(0,zn.x)(r,N=>r.next(e?e(E,N,x,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Ss=O(5698);function eo(...n){const e=(0,Wa.yG)(n);return(0,fr.e)((t,r)=>{(e?da(n,t,e):da(n,t)).subscribe(r)})}function Ms(n,e,t,r,o){return(u,d)=>{let m=t,E=e,C=0;u.subscribe((0,zn.x)(d,x=>{const N=C++;E=m?n(E,x,N):(m=!0,x),r&&d.next(E)},o&&(()=>{m&&d.next(E),d.complete()})))}}function $i(n,e){return(0,fr.e)(Ms(n,e,arguments.length>=2,!0))}function Wn(n,e){return(0,fr.e)((t,r)=>{let o=0;t.subscribe((0,zn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function xs(n){return(0,fr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,zn.x)(t,void 0,void 0,d=>{u=(0,Qu.Xf)(n(d,xs(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Kn=O(5577);function Hi(n,e){return(0,cs.m)(e)?(0,Kn.z)(n,e,1):(0,Kn.z)(n,1)}function Po(n){return n<=0?()=>bi.E:(0,fr.e)((e,t)=>{let r=[];e.subscribe((0,zn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function nh(n=Nn){return(0,fr.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Nn(){return new Oo}function rh(n){return(0,fr.e)((e,t)=>{let r=!1;e.subscribe((0,zn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ko(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((o,u)=>n(o,u,r)):Ts.y,(0,Ss.q)(1),t?rh(e):nh(()=>new Oo))}var kr=O(8505);class Rs{constructor(e,t){this.id=e,this.url=t}}class Tc extends Rs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ci extends Rs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class sh extends Rs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class On extends Rs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xu extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fo extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xf extends Rs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ka extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class br extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ya{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class to{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gi{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ha{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qa{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class Ac{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ti(n){return new Ac(n)}const Lr="ngNavigationCancelingError";function Ja(n){const e=Error("NavigationCancelingError: "+n);return e[Lr]=!0,e}function Sc(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ur(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!el(n[o],e[o]))return!1;return!0}function el(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Xa(n){return Array.prototype.concat.apply([],n)}function eu(n){return n.length>0?n[n.length-1]:null}function Cn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Yn(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,bn.D)(Promise.resolve(n)):lt(n)}const oh={exact:function nl(n,e,t){if(!gt(n.segments,e.segments)||!F(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!nl(n.children[r],e.children[r],t))return!1;return!0},subset:b},ds={exact:function tu(n,e){return ur(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>el(n[t],e[t]))},ignored:()=>!0};function Uo(n,e,t){return oh[t.paths](n.root,e.root,t.matrixParams)&&ds[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function b(n,e,t){return M(n,e,e.segments,t)}function M(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!gt(o,t)||e.hasChildren()||!F(o,t,r))}if(n.segments.length===t.length){if(!gt(n.segments,t)||!F(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!b(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(gt(n.segments,o)&&F(n.segments,o,r)&&n.children[Rt])&&M(n.children[Rt],e,u,r)}}function F(n,e,t){return e.every((r,o)=>ds[t](n[o].parameters,r.parameters))}class K{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return Vr.serialize(this)}}class Y{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Cn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tn(this)}}class Fe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ti(this.parameters)),this._parameterMap}toString(){return Rc(this)}}function gt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Vt{}class Et{parse(e){const t=new ah(e);return new K(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${zi(e.root,!0)}`,r=function Nc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ur(t)}=${Ur(o)}`).join("&"):`${Ur(t)}=${Ur(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Os(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Vr=new Et;function Tn(n){return n.segments.map(e=>Rc(e)).join("/")}function zi(n,e){if(!n.hasChildren())return Tn(n);if(e){const t=n.children[Rt]?zi(n.children[Rt],!1):"",r=[];return Cn(n.children,(o,u)=>{u!==Rt&&r.push(`${u}:${zi(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dt(n,e){let t=[];return Cn(n.children,(r,o)=>{o===Rt&&(t=t.concat(e(r,o)))}),Cn(n.children,(r,o)=>{o!==Rt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Rt?[zi(n.children[Rt],!1)]:[`${o}:${zi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${Tn(n)}/${t[0]}`:`${Tn(n)}/(${t.join("//")})`}}function Ns(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ur(n){return Ns(n).replace(/%3B/gi,";")}function Xr(n){return Ns(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bo(n){return decodeURIComponent(n)}function xc(n){return Bo(n.replace(/\+/g,"%20"))}function Rc(n){return`${Xr(n.path)}${function rl(n){return Object.keys(n).map(e=>`;${Xr(e)}=${Xr(n[e])}`).join("")}(n.parameters)}`}const _m=/^[^\/()?;=#]+/;function Oc(n){const e=n.match(_m);return e?e[0]:""}const nu=/^[^=?&#]+/,vm=/^[^&#]+/;class ah{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new Y(e,t)),r}parseSegment(){const e=Oc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Fe(Bo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Oc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Oc(this.remaining);o&&(r=o,this.capture(r))}e[Bo(t)]=Bo(r)}parseQueryParam(e){const t=function pa(n){const e=n.match(nu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function mv(n){const e=n.match(vm);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=xc(t),u=xc(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Oc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Rt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Rt]:new Y([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ep{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=il(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=il(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=uh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return uh(e,this._root).map(t=>t.value)}}function il(n,e){if(n===e.value)return e;for(const t of e.children){const r=il(n,t);if(r)return r}return null}function uh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=uh(n,t);if(r.length)return r.unshift(e),r}return[]}class no{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ru(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sl extends ep{constructor(e,t){super(e),this.snapshot=t,Fc(this,e)}toString(){return this.snapshot.toString()}}function Pc(n,e){const t=function iu(n,e){const d=new ga([],{},{},"",{},Rt,e,null,n.root,-1,{});return new kc("",new no(d,[]))}(n,e),r=new Pr([new Fe("",{})]),o=new Pr({}),u=new Pr({}),d=new Pr({}),m=new Pr(""),E=new su(r,o,d,m,u,Rt,e,t.root);return E.snapshot=t.root,new sl(new no(E,[]),t)}class su{constructor(e,t,r,o,u,d,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>Ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>Ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function np(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ga{constructor(e,t,r,o,u,d,m,E,C,x,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=x,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kc extends ep{constructor(e,t){super(t),this.url=e,Fc(this,t)}toString(){return lh(this._root)}}function Fc(n,e){e.value._routerState=n,e.children.forEach(t=>Fc(n,t))}function lh(n){const e=n.children.length>0?` { ${n.children.map(lh).join(", ")} } `:"";return`${n.value}${e}`}function Lc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ur(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ur(e.params,t.params)||n.params.next(t.params),function Mc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ur(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ur(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ol(n,e){const t=ur(n.params,e.params)&&function Ge(n,e){return gt(n,e)&&n.every((t,r)=>ur(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ol(n.parent,e.parent))}function al(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function wm(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return al(n,r,o);return al(n,r)})}(n,e,t);return new no(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>al(n,m)),d}}const r=function Im(n){return new su(new Pr(n.url),new Pr(n.params),new Pr(n.queryParams),new Pr(n.fragment),new Pr(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>al(n,u));return new no(r,o)}}function hs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function fs(n){return"object"==typeof n&&null!=n&&n.outlets}function dh(n,e,t,r,o){let u={};if(r&&Cn(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new K(t,u,o);const d=rp(n,e,t);return new K(d,u,o)}function rp(n,e,t){const r={};return Cn(n.children,(o,u)=>{r[u]=o===e?t:rp(o,e,t)}),new Y(n.segments,r)}class Dm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hs(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(fs);if(o&&o!==eu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function op(n,e,t){if(n||(n=new Y([],{})),0===n.segments.length&&n.hasChildren())return Vc(n,e,t);const r=function yv(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(fs(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!w(E,C,d))return u;r+=2}else{if(!w(E,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Y(n.segments.slice(0,r.pathIndex),{});return u.children[Rt]=new Y(n.segments.slice(r.pathIndex),n.children),Vc(u,0,o)}return r.match&&0===o.length?new Y(n.segments,{}):r.match&&!n.hasChildren()?_(n,e,t):r.match?Vc(n,0,o):_(n,e,t)}function Vc(n,e,t){if(0===t.length)return new Y(n.segments,{});{const r=function Cm(n){return fs(n[0])?n[0].outlets:{[Rt]:n}}(t),o={};return Cn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=op(n.children[d],e,u))}),Cn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Y(n.segments,o)}}function _(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(fs(u)){const E=p(u.outlets);return new Y(r,E)}if(0===o&&hs(t[0])){r.push(new Fe(n.segments[e].path,g(t[0]))),o++;continue}const d=fs(u)?u.outlets[Rt]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&hs(m)?(r.push(new Fe(d,g(m))),o+=2):(r.push(new Fe(d,{})),o++)}return new Y(r,{})}function p(n){const e={};return Cn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_(new Y([],{}),0,t))}),e}function g(n){const e={};return Cn(n,(t,r)=>e[r]=`${t}`),e}function w(n,e,t){return n==t.path&&ur(e,t.parameters)}class P{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Lc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ru(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Cn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ru(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ru(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ru(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new ha(u.value.snapshot))}),e.children.length&&this.forwardEvent(new to(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Lc(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Lc(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function te(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=E,d.outlet&&d.outlet.activateWith(o,E),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class xe{constructor(e,t){this.routes=e,this.module=t}}function Je(n){return"function"==typeof n}function bt(n){return n instanceof K}const ul=Symbol("INITIAL_VALUE");function au(){return pr(n=>function ls(...n){const e=(0,Wa.yG)(n),t=(0,Wa.jO)(n),{args:r,keys:o}=Ic(n);if(0===r.length)return(0,bn.D)([],e);const u=new Di.y(function Ro(n,e,t=Ts.y){return r=>{Jr(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let E=0;E<o;E++)Jr(e,()=>{const C=(0,bn.D)(n[E],e);let x=!1;C.subscribe((0,zn.x)(r,N=>{u[E]=N,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>bc(o,d):Ts.y));return t?u.pipe(qa(t)):u}(n.map(e=>e.pipe((0,Ss.q)(1),eo(ul)))).pipe($i((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==ul?o:(u===ul&&(r=!0),r||!1!==u&&d!==t.length-1&&!bt(u)?o:u),e)},ul),Wn(e=>e!==ul),(0,It.U)(e=>bt(e)?e:!0===e),(0,Ss.q)(1)))}class fh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new uu,this.attachRef=null}}class uu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new fh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ll=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new ap(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(uu),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ap{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===su?this.route:e===uu?this.childContexts:this.parent.get(e,t)}}let ph=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[ll],encapsulation:2}),n})();function cl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];dl(r,Tm(e,r))}}function dl(n,e){n.children&&cl(n.children,e)}function Tm(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ma(n){const e=n.children&&n.children.map(ma),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=ph),t}function qi(n){return n.outlet||Rt}function lr(n,e){const t=n.filter(r=>qi(r)===e);return t.push(...n.filter(r=>qi(r)!==e)),t}const _v={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function up(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},_v):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Sc)(t,n,e);if(!u)return Object.assign({},_v);const d={};Cn(u.posParams,(E,C)=>{d[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Uc(n,e,t,r,o="corrected"){if(t.length>0&&function FI(n,e,t){return t.some(r=>lp(n,e,r)&&qi(r)!==Rt)}(n,t,r)){const d=new Y(e,function kI(n,e,t,r){const o={};o[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&qi(u)!==Rt){const d=new Y([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[qi(u)]=d}return o}(n,e,r,new Y(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function LI(n,e,t){return t.some(r=>lp(n,e,r))}(n,t,r)){const d=new Y(n.segments,function vv(n,e,t,r,o,u){const d={};for(const m of r)if(lp(n,t,m)&&!o[qi(m)]){const E=new Y([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[qi(m)]=E}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Y(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function lp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ev(n,e,t,r){return!!(qi(n)===r||r!==Rt&&lp(e,t,n))&&("**"===n.path||up(e,n,t).matched)}function VI(n,e,t){return 0===e.length&&!n.children[t]}class Am{constructor(e){this.segmentGroup=e||null}}class Bc{constructor(e){this.urlTree=e}}function Cr(n){return No(new Am(n))}function cp(n){return No(new Bc(n))}class gh{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Uc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Y(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,It.U)(u=>this.createUrlTree(Mm(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xs(u=>{if(u instanceof Bc)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Am?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,It.U)(o=>this.createUrlTree(Mm(o),e.queryParams,e.fragment))).pipe(xs(o=>{throw o instanceof Am?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Y([],{[Rt]:e}):e;return new K(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(u=>new Y([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,bn.D)(o).pipe(Hi(u=>{const d=r.children[u],m=lr(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,It.U)(E=>({segment:E,outlet:u})))}),$i((u,d)=>(u[d.outlet]=d.segment,u),{}),function ym(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wn((o,u)=>n(o,u,r)):Ts.y,Po(1),t?rh(e):nh(()=>new Oo))}())}expandSegment(e,t,r,o,u,d){return(0,bn.D)(r).pipe(Hi(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(xs(C=>{if(C instanceof Am)return lt(null);throw C}))),ko(m=>!!m),xs((m,E)=>{if(m instanceof Oo||"EmptyError"===m.name)return VI(t,o,u)?lt(new Y([],{})):Cr(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Ev(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Cr(t):Cr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?cp(u):this.lineralizeSegments(r,u).pipe((0,Kn.z)(d=>{const m=new Y(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:x}=up(t,o,u);if(!m)return Cr(t);const N=this.applyRedirectCommands(E,o.redirectTo,x);return o.redirectTo.startsWith("/")?cp(N):this.lineralizeSegments(o,N).pipe((0,Kn.z)(q=>this.expandSegment(e,t,r,q.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?lt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(N=>(r._loadedConfig=N,new Y(o,{})))):lt(new Y(o,{}));const{matched:d,consumedSegments:m,remainingSegments:E}=up(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Kn.z)(x=>{const N=x.module,q=x.routes,{segmentGroup:ne,slicedSegments:ye}=Uc(t,m,E,q),$e=new Y(ne.segments,ne.children);if(0===ye.length&&$e.hasChildren())return this.expandChildren(N,q,$e).pipe((0,It.U)(Xt=>new Y(m,Xt)));if(0===q.length&&0===ye.length)return lt(new Y(m,{}));const at=qi(r)===u;return this.expandSegment(N,$e,q,ye,at?Rt:u,!0).pipe((0,It.U)(Yt=>new Y(m.concat(Yt.segments),Yt.children)))})):Cr(t)}getChildConfig(e,t,r){return t.children?lt(new xe(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?lt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Kn.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,It.U)(u=>(t._loadedConfig=u,u))):function Iv(n){return No(Ja(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):lt(new xe([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?lt(o.map(d=>{const m=e.get(d);let E;if(function Pn(n){return n&&Je(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!Je(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return Yn(E)})).pipe(au(),(0,kr.b)(d=>{if(!bt(d))return;const m=Ja(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,It.U)(d=>!0===d)):lt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return lt(r);if(o.numberOfChildren>1||!o.children[Rt])return No(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new K(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Cn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Cn(t.children,(m,E)=>{d[E]=this.createSegmentGroup(e,m,r,o)}),new Y(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Mm(n){const e={};for(const r of Object.keys(n.children)){const u=Mm(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Sm(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new Y(n.segments.concat(e.segments),e.children)}return n}(new Y(n.segments,e))}class xm{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class dp{constructor(e,t){this.component=e,this.route=t}}function Dv(n,e,t){const r=n._root;return yh(r,e?e._root:null,t,[r.value])}function mh(n,e,t){const r=function jI(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function yh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ru(e);return n.children.forEach(d=>{(function Rm(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const E=function $I(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gt(n.url,e.url)||!ur(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ol(n,e)||!ur(n.queryParams,e.queryParams);default:return!ol(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new xm(r)):(u.data=d.data,u._resolvedData=d._resolvedData),yh(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new dp(m.outlet.component,d))}else d&&_h(e,m,o),o.canActivateChecks.push(new xm(r)),yh(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Cn(u,(d,m)=>_h(d,t.getContext(m),o)),o}function _h(n,e,t){const r=ru(n),o=n.value;Cn(r,(u,d)=>{_h(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new dp(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class KI{}function Om(n){return new Di.y(e=>e.error(n))}class QI{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Uc(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new ga([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new no(r,t),u=new kc(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=tp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=lr(e,u),E=this.processSegmentGroup(m,d,u);if(null===E)return null;r.push(...E)}const o=bv(r);return function JI(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return VI(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Ev(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const ne=r.length>0?eu(r).parameters:{};u=new ga(r,ne,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ro(e),qi(e),e.component,e,Cv(t),hl(t)+r.length,tD(e))}else{const ne=up(t,e,r);if(!ne.matched)return null;d=ne.consumedSegments,m=ne.remainingSegments,u=new ga(d,ne.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ro(e),qi(e),e.component,e,Cv(t),hl(t)+d.length,tD(e))}const E=function XI(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=Uc(t,d,m,E.filter(ne=>void 0===ne.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const ne=this.processChildren(E,C);return null===ne?null:[new no(u,ne)]}if(0===E.length&&0===x.length)return[new no(u,[])];const N=qi(e)===o,q=this.processSegment(E,C,x,N?Rt:o);return null===q?null:[new no(u,q)]}}function eD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function bv(n){const e=[],t=new Set;for(const r of n){if(!eD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=bv(r.children);e.push(new no(r.value,o))}return e.filter(r=>!t.has(r))}function Cv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function hl(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ro(n){return n.data||{}}function tD(n){return n.resolve||{}}function fp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function km(n){return pr(e=>{const t=n(e);return t?(0,bn.D)(t).pipe((0,It.U)(()=>e)):lt(e)})}class Sv extends class vh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const pp=new f.OlP("ROUTES");class gp{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new xe(Xa(d.injector.get(pp,void 0,f.XFs.Self|f.XFs.Optional)).map(ma),d)}),xs(u=>{throw t._loader$=void 0,u}));return t._loader$=new ji(o,()=>new Ui.x).pipe(Ju()),t._loader$}loadModuleFactory(e){return Yn(e()).pipe((0,Kn.z)(t=>t instanceof f.YKP?lt(t):(0,bn.D)(this.compiler.compileModuleAsync(t))))}}class Mv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zT(n){throw n}function jc(n,e,t){return e.parse("/")}function mp(n,e){return lt(null)}const xv={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ai=(()=>{class n{constructor(t,r,o,u,d,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ui.x,this.errorHandler=zT,this.malformedUriErrorHandler=jc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:mp,afterPreactivation:mp},this.urlHandlingStrategy=new Mv,this.routeReuseStrategy=new Sv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const N=d.get(f.R0b);this.isNgZoneEnabled=N instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function tl(){return new K(new Y([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gp(d,m,q=>this.triggerEvent(new Fr(q)),q=>this.triggerEvent(new Ya(q))),this.routerState=Pc(this.currentUrlTree,this.rootComponentType),this.transitions=new Pr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Wn(o=>0!==o.id),(0,It.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pr(o=>{let u=!1,d=!1;return lt(o).pipe((0,kr.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pr(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Rv(m.source)&&(this.browserUrlTree=m.extractedUrl),lt(m).pipe(pr(N=>{const q=this.transitions.getValue();return r.next(new Tc(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),q!==this.transitions.getValue()?bi.E:Promise.resolve(N)}),function UI(n,e,t,r){return pr(o=>function mi(n,e,t,r,o){return new gh(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,kr.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function HT(n,e,t,r,o){return(0,Kn.z)(u=>function YI(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new QI(n,e,t,r,o,u).recognize();return null===d?Om(new KI):lt(d)}catch(d){return Om(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,It.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,kr.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const ne=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(ne,N)}this.browserUrlTree=N.urlAfterRedirects}const q=new Xu(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(q)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:ne,source:ye,restoredState:$e,extras:at}=m,Kt=new Tc(q,this.serializeUrl(ne),ye,$e);r.next(Kt);const Yt=Pc(ne,this.rootComponentType).snapshot;return lt(Object.assign(Object.assign({},m),{targetSnapshot:Yt,urlAfterRedirects:ne,extras:Object.assign(Object.assign({},at),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),bi.E}),km(m=>{const{targetSnapshot:E,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:q,replaceUrl:ne}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!q,replaceUrl:!!ne})}),(0,kr.b)(m=>{const E=new Fo(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,It.U)(m=>Object.assign(Object.assign({},m),{guards:Dv(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Nm(n,e){return(0,Kn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?lt(Object.assign(Object.assign({},t),{guardsResult:!0})):function HI(n,e,t,r){return(0,bn.D)(n).pipe((0,Kn.z)(o=>function ZI(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?lt(u.map(m=>{const E=mh(m,e,o);let C;if(function ou(n){return n&&Je(n.canDeactivate)}(E))C=Yn(E.canDeactivate(n,e,t,r));else{if(!Je(E))throw new Error("Invalid CanDeactivate guard");C=Yn(E(n,e,t,r))}return C.pipe(ko())})).pipe(au()):lt(!0)}(o.component,o.route,t,e,r)),ko(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Kn.z)(m=>m&&function pt(n){return"boolean"==typeof n}(m)?function GI(n,e,t,r){return(0,bn.D)(e).pipe(Hi(o=>da(function zI(n,e){return null!==n&&e&&e(new Lo(n)),lt(!0)}(o.route.parent,r),function hp(n,e){return null!==n&&e&&e(new Gi(n)),lt(!0)}(o.route,r),function qI(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function BI(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Za(()=>lt(d.guards.map(E=>{const C=mh(E,d.node,t);let x;if(function Ps(n){return n&&Je(n.canActivateChild)}(C))x=Yn(C.canActivateChild(r,n));else{if(!Je(C))throw new Error("Invalid CanActivateChild guard");x=Yn(C(r,n))}return x.pipe(ko())})).pipe(au())));return lt(u).pipe(au())}(n,o.path,t),function WI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const o=r.map(u=>Za(()=>{const d=mh(u,e,t);let m;if(function Wi(n){return n&&Je(n.canActivate)}(d))m=Yn(d.canActivate(e,n));else{if(!Je(d))throw new Error("Invalid CanActivate guard");m=Yn(d(e,n))}return m.pipe(ko())}));return lt(o).pipe(au())}(n,o.route,t))),ko(o=>!0!==o,!0))}(r,u,n,e):lt(m)),(0,It.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,kr.b)(m=>{if(bt(m.guardsResult)){const C=Ja(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new Xf(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),Wn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),km(m=>{if(m.guards.canActivateChecks.length)return lt(m).pipe((0,kr.b)(E=>{const C=new Ka(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),pr(E=>{let C=!1;return lt(E).pipe(function Tv(n,e){return(0,Kn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return lt(t);let u=0;return(0,bn.D)(o).pipe(Hi(d=>function GT(n,e,t,r){return function jo(n,e,t,r){const o=fp(n);if(0===o.length)return lt({});const u={};return(0,bn.D)(o).pipe((0,Kn.z)(d=>function Pm(n,e,t,r){const o=mh(n,e,r);return Yn(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,kr.b)(m=>{u[d]=m}))),Po(1),(0,Kn.z)(()=>fp(u).length===o.length?lt(u):bi.E))}(n._resolve,n,e,r).pipe((0,It.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),tp(n,t).resolve),null)))}(d.route,r,n,e)),(0,kr.b)(()=>u++),Po(1),(0,Kn.z)(d=>u===o.length?lt(t):bi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,kr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,kr.b)(E=>{const C=new br(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),km(m=>{const{targetSnapshot:E,id:C,extractedUrl:x,rawUrl:N,extras:{skipLocationChange:q,replaceUrl:ne}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:x,rawUrlTree:N,skipLocationChange:!!q,replaceUrl:!!ne})}),(0,It.U)(m=>{const E=function Em(n,e,t){const r=al(n,e._root,t?t._root:void 0);return new sl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,kr.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new P(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,kr.b)({next(){u=!0},complete(){u=!0}}),function ih(n){return(0,fr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),xs(m=>{if(d=!0,function fa(n){return n&&n[Lr]}(m)){const E=bt(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new sh(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Rv(o.source)};this.scheduleNavigation(x,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new On(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return bi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const E=Object.assign({},d);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){cl(t),this.config=t.map(ma),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,x=E?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function ch(n,e,t,r,o){if(0===t.length)return dh(e.root,e.root,e.root,r,o);const u=function ip(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Dm(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Cn(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Dm(t,e,r)}(t);if(u.toRoot())return dh(e.root,e.root,new Y([],{}),r,o);const d=function bm(n,e,t){if(n.isAbsolute)return new sp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new sp(u,u===e.root,0)}const r=hs(n.commands[0])?0:1;return function hh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new sp(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?Vc(d.segmentGroup,d.index,u.commands):op(d.segmentGroup,d.index,u.commands);return dh(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=bt(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function rD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},xv):!1===r?Object.assign({},nD):r,bt(t))return Uo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Uo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ci(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,E;if(this.disposed)return Promise.resolve(!1);let C,x,N;d?(C=d.resolve,x=d.reject,N=d.promise):N=new Promise((ye,$e)=>{C=ye,x=$e});const q=++this.navigationId;let ne;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ne=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):ne=0,this.setTransition({id:q,targetPageId:ne,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:x,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ye=>Promise.reject(ye))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new sh(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Rv(n){return"imperative"!==n}let yp=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Ui.x,this.subscription=t.events.subscribe(u=>{u instanceof Ci&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:$c(this.skipLocationChange),replaceUrl:$c(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:$c(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ai),f.Y36(su),f.Y36(fe))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function $c(n){return""===n||!!n}class _p{}class vp{preload(e,t){return lt(null)}}let Pv=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new gp(o,r,E=>t.triggerEvent(new Fr(E)),E=>t.triggerEvent(new Ya(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(t=>t instanceof Ci),Hi(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,bn.D)(o).pipe((0,As.J)(),(0,It.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?lt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Kn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ai),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(_p))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Vm=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Tc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ci&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qa&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Qa(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const lu=new f.OlP("ROUTER_CONFIGURATION"),cu=new f.OlP("ROUTER_FORROOT_GUARD"),kv=[Me,{provide:Vt,useClass:Et},{provide:Ai,useFactory:function Uv(n,e,t,r,o,u,d={},m,E){const C=new Ai(null,n,e,t,r,o,Xa(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function Bm(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var N,q;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(q=console.groupEnd)||void 0===q||q.call(console)}),C},deps:[Vt,uu,Me,f.zs3,f.Sil,pp,lu,[class Fm{},new f.FiY],[class Av{},new f.FiY]]},uu,{provide:su,useFactory:function Bv(n){return n.routerState.root},deps:[Ai]},Pv,vp,class Ov{preload(e,t){return t().pipe(xs(()=>lt(null)))}},{provide:lu,useValue:{enableTracing:!1}}];function Fv(){return new f.PXZ("Router",Ai)}let Lv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[kv,Um(t),{provide:cu,useFactory:Vv,deps:[[Ai,new f.FiY,new f.tp0]]},{provide:lu,useValue:r||{}},{provide:fe,useFactory:oD,deps:[ae,[new f.tBr(ze),new f.FiY],lu]},{provide:Vm,useFactory:Ep,deps:[Ai,Ua,lu]},{provide:_p,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:vp},{provide:f.PXZ,multi:!0,useFactory:Fv},[Hc,{provide:f.ip1,multi:!0,useFactory:wp,deps:[Hc]},{provide:Ip,useFactory:jv,deps:[Hc]},{provide:f.tb,multi:!0,useExisting:Ip}]]}}static forChild(t){return{ngModule:n,providers:[Um(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(cu,8),f.LFG(Ai,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Ep(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Vm(n,e,t)}function oD(n,e,t={}){return t.useHash?new Se(n,e):new He(n,e)}function Vv(n){return"guarded"}function Um(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:pp,multi:!0,useValue:n}]}let Hc=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ui.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(Ai),d=this.injector.get(lu);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?lt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(lu),o=this.injector.get(Pv),u=this.injector.get(Vm),d=this.injector.get(Ai),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function wp(n){return n.appInitializer.bind(n)}function jv(n){return n.bootstrapListener.bind(n)}const Ip=new f.OlP("Router Initializer");let Eh=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-index"]],decls:26,vars:0,consts:[["aria-label","introduction","id","introduction"],[1,"container"],["aria-label","WhoWeAre?","id","whoWeAre"],["id","projectImg","src","https://www.lonestarpark.com/wp-content/uploads/2019/04/image-placeholder-500x500.jpg"],["aria-label","trainings","id","trainings"],["href","#"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h1"),f._uU(3,"Coisas sobre o projeto..."),f.qZA(),f.TgZ(4,"p"),f._uU(5,"(Achar alguma imagem de fundo melhor ou manter essa)"),f.qZA()()(),f._UZ(6,"br"),f.TgZ(7,"div",2)(8,"div",1)(9,"h1"),f._uU(10,"Quem somos?"),f.qZA(),f._UZ(11,"img",3),f.TgZ(12,"div")(13,"p"),f._uU(14,"Somos o projeto mais brabo dos brabos..."),f.qZA()()()(),f.TgZ(15,"div",4)(16,"div",1)(17,"h1"),f._uU(18,"Treinamentos"),f.qZA(),f.TgZ(19,"p"),f._uU(20,"Possuimos diversos treinamentos em rela\xe7\xe3o a prevencao..."),f.qZA(),f.TgZ(21,"p"),f._uU(22,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In sit amet massa in massa vehicula fermentum facilisis in quam. Ut tristique facilisis blandit. Suspendisse vehicula auctor nibh, in placerat quam. Nulla venenatis lorem a venenatis ornare. Curabitur feugiat, risus in mollis mattis, urna mauris ornare urna, nec laoreet magna orci ac elit. Nullam pharetra tincidunt neque, ut faucibus ligula dapibus vel. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam iaculis nibh id mauris tempor, vel lacinia ipsum dapibus. Maecenas ac sem porttitor, accumsan urna a, molestie dui. Maecenas dignissim nunc imperdiet, tempus ipsum ac, maximus ipsum. Curabitur nibh libero, ultrices vitae metus eu, rutrum volutpat neque. In in tristique eros. "),f.qZA(),f.TgZ(23,"a",5),f._uU(24,"Clique aqui para se inscrever"),f.qZA()()(),f._UZ(25,"br"))},styles:["#introduction[_ngcontent-%COMP%]{background:url(indexBackground.0f71f398d4b336e4.jpg);background-size:cover;padding:180px 0;color:#fff}#projectImg[_ngcontent-%COMP%]{float:right;margin-bottom:2em;width:600px;height:200px;max-width:100%}@media only screen and (max-width: 600px){#projectImg[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;margin-bottom:2em;width:600px;height:200px;max-width:100%}}"]}),n})();var be=O(5861);let zv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),fl=(()=>{class n extends zv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const io=new f.OlP("NgValueAccessor"),WT={provide:io,useExisting:(0,f.Gpc)(()=>wh),multi:!0},aD=new f.OlP("CompositionEventMode");let wh=(()=>{class n extends zv{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Wv(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(aD,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([WT]),f.qOj]}),n})();function du(n){return null==n||0===n.length}function qv(n){return null!=n&&"number"==typeof n.length}const An=new f.OlP("NgValidators"),hu=new f.OlP("NgAsyncValidators"),Zv=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ei{static min(e){return function Kv(n){return e=>{if(du(e.value)||du(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Yv(n){return e=>{if(du(e.value)||du(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Qv(n){return du(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Hm(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Jv(n){return du(n.value)||Zv.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Xv(n){return e=>du(e.value)||!qv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function e0(n){return e=>qv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Mt(n){if(!n)return Ih;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(du(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return Dp(e)}static composeAsync(e){return bp(e)}}function Ih(n){return null}function Gm(n){return null!=n}function zm(n){const e=(0,f.QGY)(n)?(0,bn.D)(n):n;return(0,f.CqO)(e),e}function Dh(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ks(n,e){return e.map(t=>t(n))}function n0(n){return n.map(e=>function t0(n){return!n.validate}(e)?e:t=>e.validate(t))}function Dp(n){if(!n)return null;const e=n.filter(Gm);return 0==e.length?null:function(t){return Dh(ks(t,e))}}function so(n){return null!=n?Dp(n0(n)):null}function bp(n){if(!n)return null;const e=n.filter(Gm);return 0==e.length?null:function(t){return function Gv(...n){const e=(0,Wa.jO)(n),{args:t,keys:r}=Ic(n),o=new Di.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let E=d,C=d;for(let x=0;x<d;x++){let N=!1;(0,Qu.Xf)(t[x]).subscribe((0,zn.x)(u,q=>{N||(N=!0,C--),m[x]=q},()=>E--,void 0,()=>{(!E||!N)&&(C||u.next(r?bc(r,m):m),u.complete())}))}});return e?o.pipe(qa(e)):o}(ks(t,e).map(zm)).pipe((0,It.U)(Dh))}}function Cp(n){return null!=n?bp(n0(n)):null}function Tp(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uD(n){return n._rawValidators}function Wm(n){return n._rawAsyncValidators}function r0(n){return n?Array.isArray(n)?n:[n]:[]}function pl(n,e){return Array.isArray(n)?n.includes(e):n===e}function bh(n,e){const t=r0(e);return r0(n).forEach(o=>{pl(t,o)||t.push(o)}),t}function Ap(n,e){return r0(e).filter(t=>!pl(n,t))}class Sp{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=so(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $o extends Sp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Zi extends Sp{get formDirective(){return null}get path(){return null}}class s0{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let o0=(()=>{class n extends s0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($o,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),qm=(()=>{class n extends s0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zi,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function Fs(n,e){Ch(n,e),e.valueAccessor.writeValue(n.value),function Km(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ya(n,e)})}(n,e),function d0(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function cD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ya(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function c0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Gc(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Th(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Rp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ch(n,e){const t=uD(n);null!==e.validator?n.setValidators(Tp(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Wm(n);null!==e.asyncValidator?n.setAsyncValidators(Tp(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Rp(e._rawValidators,o),Rp(e._rawAsyncValidators,o)}function Th(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=uD(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Wm(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Rp(e._rawValidators,r),Rp(e._rawAsyncValidators,r),t}function ya(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ml(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Wc="VALID",Sh="INVALID",pu="PENDING",yl="DISABLED";function qc(n){return(Mh(n)?n.validators:n)||null}function m0(n){return Array.isArray(n)?so(n):n||null}function Op(n,e){return(Mh(e)?e.asyncValidators:n)||null}function dD(n){return Array.isArray(n)?Cp(n):n||null}function Mh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Jm=n=>n instanceof Tr,Xm=n=>n instanceof ty;function _0(n){return Jm(n)?n.value:n.getRawValue()}function v0(n,e){const t=Xm(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function Ki(n,e){Xm(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class ey{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=m0(this._rawValidators),this._composedAsyncValidatorFn=dD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Wc}get invalid(){return this.status===Sh}get pending(){return this.status==pu}get disabled(){return this.status===yl}get enabled(){return this.status!==yl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=m0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=dD(e)}addValidators(e){this.setValidators(bh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(bh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ap(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ap(e,this._rawAsyncValidators))}hasValidator(e){return pl(this._rawValidators,e)}hasAsyncValidator(e){return pl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yl,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wc,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wc||this.status===pu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yl:Wc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pu,this._hasOwnPendingAsyncValidator=!0;const t=zm(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function g0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Xm(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof rA)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?yl:this.errors?Sh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pu)?pu:this._anyControlsHaveStatus(Sh)?Sh:Wc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Tr extends ey{constructor(e=null,t,r){super(qc(t),Op(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mh(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ml(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ml(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ty extends ey{constructor(e,t,r){super(qc(t),Op(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ki(this,e),Object.keys(e).forEach(r=>{v0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=_0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class rA extends ey{constructor(e,t,r){super(qc(t),Op(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ki(this,e),e.forEach((r,o)=>{v0(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>_0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let ry=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Ho={provide:io,useExisting:(0,f.Gpc)(()=>x0),multi:!0};let M0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),fD=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:M0}),n})(),x0=(()=>{class n extends fl{constructor(t,r,o,u){super(t,r),this._registry=o,this._injector=u,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get($o),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(fD),f.Y36(f.zs3))},n.\u0275dir=f.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[f._Bn([Ho]),f.qOj]}),n})();const iy=new f.OlP("NgModelWithFormControlWarning"),gD={provide:Zi,useExisting:(0,f.Gpc)(()=>Lp)};let Lp=(()=>{class n extends Zi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Th(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Fs(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Gc(t.control||null,t,!1),ml(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Np(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Gc(r||null,t),Jm(o)&&(Fs(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function h0(n,e){Ch(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Ym(n,e){return Th(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ch(this.form,this),this._oldForm&&Th(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(An,10),f.Y36(hu,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([gD]),f.qOj,f.TTD]}),n})();const O0={provide:$o,useExisting:(0,f.Gpc)(()=>P0)};let P0=(()=>{class n extends $o{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function fu(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===wh?t=u:function zc(n){return Object.getPrototypeOf(n.constructor)===fl}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function gl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Zm(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Zi,13),f.Y36(An,10),f.Y36(hu,10),f.Y36(io,10),f.Y36(iy,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([O0]),f.qOj,f.TTD]}),n})(),W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[M0]]}),n})(),ID=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[W0]}),n})(),DD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iy,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[W0]}),n})();var Z0=O(4986),En=O(5813);function zp(){return(0,fr.e)((n,e)=>{let t,r=!1;n.subscribe((0,zn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function TD(n,e){return n===e}var rt,ao=O(2011),K0=(O(5881),O(3942)),gu=O(9681),Ph=O(4859),mu=O(1877),Ht=O(2090),hA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yu={},ly=ly||{},Tt=hA||self;function kh(){}function Y0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Si(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Q0="closure_uid_"+(1e9*Math.random()>>>0),J0=0;function X0(n,e,t){return n.call.apply(n.bind,arguments)}function eE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ti(n,e,t){return(ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?X0:eE).apply(null,arguments)}function cy(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Br(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Go(){this.s=this.s,this.o=this.o}var dy={};Go.prototype.s=!1,Go.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function fA(n){return Object.prototype.hasOwnProperty.call(n,Q0)&&n[Q0]||(n[Q0]=++J0)}(this);delete dy[n]}},Go.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},nE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function rE(n){return Array.prototype.concat.apply([],arguments)}function hy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Wp(n){return/^[\s\xa0]*$/.test(n)}var Ar,Fh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gr(n,e){return-1!=n.indexOf(e)}function fy(n,e){return n<e?-1:n>e?1:0}e:{var iE=Tt.navigator;if(iE){var sE=iE.userAgent;if(sE){Ar=sE;break e}}Ar=""}function Lh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function uo(n){const e={};for(const t in n)e[t]=n[t];return e}var Zc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ni(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Zc.length;u++)t=Zc[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ea(n){return Ea[" "](n),n}Ea[" "]=kh;var wa,n,Ls=gr(Ar,"Opera"),_u=gr(Ar,"Trident")||gr(Ar,"MSIE"),vl=gr(Ar,"Edge"),vu=vl||_u,El=gr(Ar,"Gecko")&&!(gr(Ar.toLowerCase(),"webkit")&&!gr(Ar,"Edge"))&&!(gr(Ar,"Trident")||gr(Ar,"MSIE"))&&!gr(Ar,"Edge"),Kc=gr(Ar.toLowerCase(),"webkit")&&!gr(Ar,"Edge");function wl(){var n=Tt.document;return n?n.documentMode:void 0}e:{var Eu="",wu=(n=Ar,El?/rv:([^\);]+)(\)|;)/.exec(n):vl?/Edge\/([\d\.]+)/.exec(n):_u?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Kc?/WebKit\/(\S+)/.exec(n):Ls?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(wu&&(Eu=wu?wu[1]:""),_u){var Iu=wl();if(null!=Iu&&Iu>parseFloat(Eu)){wa=String(Iu);break e}}wa=Eu}var oE={};var uE=Tt.document&&_u&&(wl()||parseInt(wa,10))||void 0,lE=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Tt.addEventListener("test",kh,e),Tt.removeEventListener("test",kh,e)}catch(t){}return n}();function ri(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Yc(n,e){if(ri.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(El){e:{try{Ea(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:cE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yc.Z.h.call(this)}}ri.prototype.h=function(){this.defaultPrevented=!0},Br(Yc,ri);var cE={2:"touch",3:"pen",4:"mouse"};Yc.prototype.h=function(){Yc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vh="closure_listenable_"+(1e6*Math.random()|0),dE=0;function MD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++dE,this.ca=this.fa=!1}function Uh(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Bh(n){this.src=n,this.g={},this.h=0}function gy(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=tE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Uh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function my(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Bh.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=my(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new MD(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Kp="closure_lm_"+(1e6*Math.random()|0),yy={};function _y(n,e,t,r,o){if(r&&r.once)return RD(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)_y(n,e[u],t,r,o);return null}return t=mE(t),n&&n[Vh]?n.N(e,t,Si(r)?!!r.capture:!!r,o):hE(n,e,t,!1,r,o)}function hE(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=Si(o)?!!o.capture:!!o,m=pE(n);if(m||(n[Kp]=m=new Bh(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function xD(){var e=ND;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)lE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Yp(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function RD(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)RD(n,e[u],t,r,o);return null}return t=mE(t),n&&n[Vh]?n.O(e,t,Si(r)?!!r.capture:!!r,o):hE(n,e,t,!0,r,o)}function fE(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)fE(n,e[u],t,r,o);else r=Si(r)?!!r.capture:!!r,t=mE(t),n&&n[Vh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=my(u=n.g[e],t,r,o))&&(Uh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=my(e,t,r,o)),(t=-1<n?e[n]:null)&&jh(t))}function jh(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Vh])gy(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Yp(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pE(e))?(gy(t,n),0==t.h&&(t.src=null,e[Kp]=null)):Uh(n)}}}function Yp(n){return n in yy?yy[n]:yy[n]="on"+n}function ND(n,e){if(n.ca)n=!0;else{e=new Yc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&jh(n),n=t.call(r,e)}return n}function pE(n){return(n=n[Kp])instanceof Bh?n:null}var gE="__closure_events_fn_"+(1e9*Math.random()>>>0);function mE(n){return"function"==typeof n?n:(n[gE]||(n[gE]=function(e){return n.handleEvent(e)}),n[gE])}function jr(){Go.call(this),this.i=new Bh(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ri(e,n);else if(e instanceof ri)e.target=e.target||n;else{var o=e;ni(e=new ri(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=vy(d,r,!0,e)&&o}if(o=vy(d=e.g=n,r,!0,e)&&o,o=vy(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=vy(d=e.g=t[u],r,!1,e)&&o}function vy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,E=d.ia||d.src;d.fa&&gy(n.i,d),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}Br(jr,Go),jr.prototype[Vh]=!0,jr.prototype.removeEventListener=function(n,e,t,r){fE(this,n,e,t,r)},jr.prototype.M=function(){if(jr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Uh(t[r]);delete n.g[e],n.h--}}this.I=null},jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ey=Tt.JSON.stringify;function Qc(){var n=vE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Iy,wy=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new PD,n=>n.reset());class PD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yE(n){Tt.setTimeout(()=>{throw n},0)}function Jc(n,e){Iy||function _E(){var n=Tt.Promise.resolve(void 0);Iy=function(){n.then(kD)}}(),Dy||(Iy(),Dy=!0),vE.add(n,e)}var Dy=!1,vE=new class OD{constructor(){this.h=this.g=null}add(e,t){const r=wy.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function kD(){for(var n;n=Qc();){try{n.h.call(n.g)}catch(t){yE(t)}var e=wy;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dy=!1}function Qp(n,e){jr.call(this),this.h=n||1,this.g=e||Tt,this.j=ti(this.kb,this),this.l=Date.now()}function by(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Jp(n,e,t){if("function"==typeof n)t&&(n=ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:Tt.setTimeout(n,e||0)}function EE(n){n.g=Jp(()=>{n.g=null,n.i&&(n.i=!1,EE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Br(Qp,jr),(rt=Qp.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$r(this,"tick"),this.da&&(by(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Qp.Z.M.call(this),by(this),delete this.g};class wE extends Go{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:EE(this)}M(){super.M(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xc(n){Go.call(this),this.h=n,this.g={}}Br(Xc,Go);var Xp=[];function FD(n,e,t,r){Array.isArray(t)||(t&&(Xp[0]=t.toString()),t=Xp);for(var o=0;o<t.length;o++){var u=_y(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function eg(n){Lh(n.g,function(e,t){this.g.hasOwnProperty(t)&&jh(e)},n),n.g={}}function tg(){this.g=!0}function Il(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ty(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Ey(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Xc.prototype.M=function(){Xc.Z.M.call(this),eg(this)},Xc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tg.prototype.Aa=function(){this.g=!1},tg.prototype.info=function(){};var Dl={},Hh=null;function bl(){return Hh=Hh||new jr}function ng(n){ri.call(this,Dl.Ma,n)}function rg(n){const e=bl();$r(e,new ng(e,n))}function IE(n,e){ri.call(this,Dl.STAT_EVENT,n),this.stat=e}function ii(n){const e=bl();$r(e,new IE(e,n))}function ig(n,e){ri.call(this,Dl.Na,n),this.size=e}function ed(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){n()},e)}Dl.Ma="serverreachability",Br(ng,ri),Dl.STAT_EVENT="statevent",Br(IE,ri),Dl.Na="timingevent",Br(ig,ri);var Gh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},sg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function og(){}function ag(){}og.prototype.h=null;var lg,td={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sy(){ri.call(this,"d")}function ug(){ri.call(this,"c")}function nd(){}function rd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Xc(this),this.P=LD,this.W=new Qp(n=vu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new DE}function DE(){this.i=null,this.g="",this.h=!1}Br(Sy,ri),Br(ug,ri),Br(nd,og),nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},lg=new nd;var LD=45e3,My={},id={};function zh(n,e,t){n.K=1,n.v=Kh(Ia(e)),n.s=t,n.U=!0,xy(n,null)}function xy(n,e){n.F=Date.now(),sd(n),n.A=Ia(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ME(t.h,"t",r),n.C=0,t=n.l.H,n.h=new DE,n.g=qy(n.l,t?e:null,!n.s),0<n.O&&(n.L=new wE(ti(n.Ia,n,n.g),n.O)),FD(n.V,n.g,"readystatechange",n.gb),e=n.H?uo(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),rg(1),function pA(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var x=C[0];C=C[1];var N=x.split("_");d=2<=N.length&&"type"==N[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ry(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ny(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=bE(n,t),o==id){4==e&&(n.o=4,ii(14),r=!1),Il(n.j,n.m,null,"[Incomplete Response]");break}if(o==My){n.o=4,ii(15),Il(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Il(n.j,n.m,o,null),Py(n,o)}Ry(n)&&o!=id&&o!=My&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Eg(e),e.L=!0,ii(11))):(Il(n.j,n.m,t,"[Invalid Chunked Response]"),ad(n),od(n))}function bE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?id:(t=Number(e.substring(t,r)),isNaN(t)?My:(r+=1)+t>e.length?id:(e=e.substr(r,t),n.C=r+t,e))}function sd(n){n.Y=Date.now()+n.P,Oy(n,n.P)}function Oy(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ed(ti(n.eb,n),e)}function Wh(n){n.B&&(Tt.clearTimeout(n.B),n.B=null)}function od(n){0==n.l.G||n.I||$E(n.l,n)}function ad(n){Wh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,by(n.W),eg(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Py(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||hg(t.i,n)))if(t.I=n.N,!n.J&&hg(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=ed(ti(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;wg(t),Xh(t)}vg(t),ii(18)}if(1>=xE(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else yd(t,11)}else if((n.J||t.g==n)&&wg(t),!Wp(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const q=C[5];null!=q&&"number"==typeof q&&0<q&&(t.K=r=1.5*q,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ne=n.g;if(ne){const ye=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ye){var u=r.i;!u.g&&(gr(ye,"spdy")||gr(ye,"quic")||gr(ye,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(fg(u,u.h),u.h=null))}if(r.D){const $e=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;$e&&(r.sa=$e,Un(r.F,r.D,$e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=YD(r,r.H?r.la:null,r.W),d.J){Yh(r.i,d);var m=d,E=r.K;E&&m.setTimeout(E),m.B&&(Wh(m),sd(m)),r.g=d}else Wy(r);0<t.l.length&&ef(t)}else"stop"!=C[0]&&"close"!=C[0]||yd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?yd(t,7):$y(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}rg(4)}catch(C){}}function cg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Y0(n)||"string"==typeof n)nE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Y0(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function VD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Y0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function ud(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ud)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function cr(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Du(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Du(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Du(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=rd.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==Ca(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const x=Ca(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>x)&&(3!=x||vu||this.g&&(this.h.h||this.g.ga()||UE(this.g)))){this.I||4!=x||7==e||rg(8==e||0>=N?3:2),Wh(this);var t=this.g.ba();this.N=t;t:if(Ry(this)){var r=UE(this.g);n="";var o=r.length,u=4==Ca(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ad(this),od(this);var d="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function $h(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wp(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ii(12),ad(this),od(this);break e}Il(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Py(this,t)}this.U?(Ny(this,x,d),vu&&this.i&&3==x&&(FD(this.V,this.W,"tick",this.fb),this.W.start())):(Il(this.j,this.m,d,null),Py(this,d)),4==x&&ad(this),this.i&&!this.I&&(4==x?$E(this.l,this):(this.i=!1,sd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ii(12)):(this.o=0,ii(13)),ad(this),od(this)}}}catch(x){}},rt.fb=function(){if(this.g){var n=Ca(this.g),e=this.g.ga();this.C<e.length&&(Wh(this),Ny(this,n,e),this.i&&4!=n&&sd(this))}},rt.cancel=function(){this.I=!0,ad(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Cy(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(rg(3),ii(17)),ad(this),this.o=2,od(this)):Oy(this,this.Y-n)},(rt=ud.prototype).R=function(){cr(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return cr(this),this.g.concat()},rt.get=function(n,e){return Du(this.h,n)?this.h[n]:e},rt.set=function(n,e){Du(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var CE=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof bu){this.g=void 0!==e?e:n.g,qh(this,n.j),this.s=n.s,Zh(this,n.i),Da(this,n.m),this.l=n.l,e=n.h;var t=new Mi;t.i=e.i,e.g&&(t.g=new ud(e.g),t.h=e.h),TE(this,t),this.o=n.o}else n&&(t=String(n).match(CE))?(this.g=!!e,qh(this,t[1]||"",!0),this.s=dg(t[2]||""),Zh(this,t[3]||"",!0),Da(this,t[4]),this.l=dg(t[5]||"",!0),TE(this,t[6]||"",!0),this.o=dg(t[7]||"")):(this.g=!!e,this.h=new Mi(null,this.g))}function Ia(n){return new bu(n)}function qh(n,e,t){n.j=t?dg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zh(n,e,t){n.i=t?dg(e,!0):e}function Da(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function TE(n,e,t){e instanceof Mi?(n.h=e,function HD(n,e){e&&!n.j&&(ba(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Fy(this,r),ME(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ld(e,zo)),n.h=new Mi(e,n.g))}function Un(n,e,t){n.h.set(e,t)}function Kh(n){return Un(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function dg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ld(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ky),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ky(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}bu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ld(e,lo,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ld(e,lo,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ld(t,"/"==t.charAt(0)?$D:jD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ld(t,co)),n.join("")};var lo=/[#\/\?@]/g,jD=/[#\?:]/g,$D=/[#\?]/g,zo=/[#\?@]/g,co=/#/g;function Mi(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ba(n){n.g||(n.g=new ud,n.h=0,n.i&&function UD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Fy(n,e){ba(n),e=cd(n,e),Du(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Du((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&cr(n)))}function SE(n,e){return ba(n),e=cd(n,e),Du(n.g.h,e)}function ME(n,e,t){Fy(n,e),0<t.length&&(n.i=null,n.g.set(cd(n,e),hy(t)),n.h+=t.length)}function cd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dd(n){this.l=n||GD,n=Tt.PerformanceNavigationTiming?0<(n=Tt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ea&&Tt.g.Ea()&&Tt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Mi.prototype).add=function(n,e){ba(this),this.i=null,n=cd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){ba(this),this.g.forEach(function(t,r){nE(t,function(o){n.call(e,o,r,this)},this)},this)},rt.T=function(){ba(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},rt.R=function(n){ba(this);var e=[];if("string"==typeof n)SE(this,n)&&(e=rE(e,this.g.get(cd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=rE(e,n[t])}return e},rt.set=function(n,e){return ba(this),this.i=null,SE(this,n=cd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var GD=10;function Vy(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xE(n){return n.h?1:n.g?n.g.size:0}function hg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function fg(n,e){n.g?n.g.add(e):n.h=e}function Yh(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function RE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return hy(n.i)}function pg(){}function NE(){this.g=new pg}function Uy(n,e,t){const r=t||"";try{cg(n,function(o,u){let d=o;Si(o)&&(d=Ey(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function hd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function fd(n){this.l=n.$b||null,this.j=n.ib||!1}function Qh(n,e){jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=mg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dd.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},pg.prototype.stringify=function(n){return Tt.JSON.stringify(n,void 0)},pg.prototype.parse=function(n){return Tt.JSON.parse(n,void 0)},Br(fd,og),fd.prototype.g=function(){return new Qh(this.l,this.j)},fd.prototype.i=function(n){return function(){return n}}({}),Br(Qh,jr);var mg=0;function By(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function pd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,gd(n)}function gd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=Qh.prototype).open=function(n,e){if(this.readyState!=mg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,gd(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Tt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pd(this)),this.readyState=mg},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,gd(this)),this.g&&(this.readyState=3,gd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Tt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;By(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?pd(this):gd(this),3==this.readyState&&By(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,pd(this))},rt.Ta=function(n){this.g&&(this.response=n,pd(this))},rt.ha=function(){this.g&&pd(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Qh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var OE=Tt.JSON.parse;function mr(n){jr.call(this),this.headers=new ud,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=PE,this.K=this.L=!1}Br(mr,jr);var PE="",zD=/^https?$/i,WD=["POST","PUT"];function ZD(n){return"content-type"==n.toLowerCase()}function kE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,FE(n),yg(n)}function FE(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function LE(n){if(n.h&&void 0!==ly&&(!n.C[1]||4!=Ca(n)||2!=n.ba()))if(n.v&&4==Ca(n))Jp(n.Fa,0,n);else if($r(n,"readystatechange"),4==Ca(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(CE)[1]||null;if(!o&&Tt.self&&Tt.self.location){var u=Tt.self.location.protocol;o=u.substr(0,u.length-1)}r=!zD.test(o?o.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var d=2<Ca(n)?n.g.statusText:""}catch(E){d=""}n.j=d+" ["+n.ba()+"]",FE(n)}}finally{yg(n)}}}function yg(n,e){if(n.g){VE(n);const t=n.g,r=n.C[0]?kh:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function VE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Tt.clearTimeout(n.A),n.A=null)}function Ca(n){return n.g?n.g.readyState:0}function UE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case PE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function jy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function KD(n){let e="";return Lh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Un(n,e,t))}function Jh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function BE(n){this.za=0,this.l=[],this.h=new tg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jh("baseRetryDelayMs",5e3,n),this.$a=Jh("retryDelaySeedMs",1e4,n),this.Ya=Jh("forwardChannelMaxRetries",2,n),this.ra=Jh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new dd(n&&n.concurrentRequestLimit),this.Ca=new NE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function $y(n){if(Hy(n),3==n.G){var e=n.V++,t=Ia(n.F);Un(t,"SID",n.J),Un(t,"RID",e),Un(t,"TYPE","terminate"),md(n,t),(e=new rd(n,n.h,e,void 0)).K=2,e.v=Kh(Ia(t)),t=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(t=Tt.navigator.sendBeacon(e.v.toString(),"")),!t&&Tt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qy(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sd(e)}Ig(n)}function Xh(n){n.g&&(Eg(n),n.g.cancel(),n.g=null)}function Hy(n){Xh(n),n.u&&(Tt.clearTimeout(n.u),n.u=null),wg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Tt.clearTimeout(n.m),n.m=null)}function _g(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&ef(n)}function ef(n){Vy(n.i)||n.m||(n.m=!0,Jc(n.Ha,n),n.C=0)}function Gy(n,e){var t;t=e?e.m:n.V++;const r=Ia(n.F);Un(r,"SID",n.J),Un(r,"RID",t),Un(r,"AID",n.U),md(n,r),n.o&&n.s&&jy(r,n.o,n.s),t=new rd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=zy(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),fg(n.i,t),zh(t,r,e)}function md(n,e){n.j&&cg({},function(t,r){Un(e,r,t)})}function zy(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ti(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const x=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{Uy(x,d,"req"+C+"_")}catch(N){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Wy(n){n.g||n.u||(n.Y=1,Jc(n.Ga,n),n.A=0)}function vg(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ed(ti(n.Ga,n),Cl(n,n.A)),n.A++,0))}function Eg(n){null!=n.B&&(Tt.clearTimeout(n.B),n.B=null)}function Cu(n){n.g=new rd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ia(n.oa);Un(e,"RID","rpc"),Un(e,"SID",n.J),Un(e,"CI",n.N?"0":"1"),Un(e,"AID",n.U),md(n,e),Un(e,"TYPE","xmlhttp"),n.o&&n.s&&jy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Kh(Ia(e)),t.s=null,t.U=!0,xy(t,n)}function wg(n){null!=n.v&&(Tt.clearTimeout(n.v),n.v=null)}function $E(n,e){var t=null;if(n.g==e){wg(n),Eg(n),n.g=null;var r=2}else{if(!hg(n.i,e))return;t=e.D,Yh(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;$r(r=bl(),new ig(r,t,e,o)),ef(n)}else Wy(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function jE(n,e){return!(xE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ed(ti(n.Ha,n,e),Cl(n,n.C)),n.C++,0)))}(n,e)||2==r&&vg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:yd(n,5);break;case 4:yd(n,10);break;case 3:yd(n,6);break;default:yd(n,2)}}function Cl(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function yd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ti(n.jb,n);t||(t=new bu("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||qh(t,"https"),Kh(t)),function gg(n,e){const t=new tg;if(Tt.Image){const r=new Image;r.onload=cy(hd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cy(hd,t,r,"TestLoadImage: error",!1,e),r.onabort=cy(hd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cy(hd,t,r,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ii(2);n.G=0,n.j&&n.j.va(e),Ig(n),Hy(n)}function Ig(n){n.G=0,n.I=-1,n.j&&((0!=RE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,hy(n.l),n.l.length=0),n.j.ua())}function YD(n,e,t){let r=function BD(n){return n instanceof bu?Ia(n):new bu(n,void 0)}(t);if(""!=r.i)e&&Zh(r,e+"."+r.i),Da(r,r.m);else{const o=Tt.location;r=function AE(n,e,t,r){var o=new bu(null,void 0);return n&&qh(o,n),e&&Zh(o,e),t&&Da(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Lh(n.aa,function(o,u){Un(r,u,o)}),t=n.sa,(e=n.D)&&t&&Un(r,e,t),Un(r,"VER",n.ma),md(n,r),r}function qy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mr(t&&n.Ba&&!n.qa?new fd({ib:!0}):n.qa)).L=n.H,e}function Zy(){}function Ky(){if(_u&&!(10<=Number(uE)))throw Error("Environmental error: no available transport.")}function st(n,e){jr.call(this),this.g=new BE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Wp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _d(this)}function HE(n){Sy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function GE(){ug.call(this),this.status=1}function _d(n){this.g=n}(rt=mr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lg.g(),this.C=function Ay(n){return n.h||(n.h=n.i())}(this.u?this.u:lg),this.g.onreadystatechange=ti(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void kE(this,u)}n=t||"";const o=new ud(this.headers);r&&cg(r,function(u,d){o.set(d,u)}),r=function SD(n){e:{var e=ZD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Tt.FormData&&n instanceof Tt.FormData,!(0<=tE(WD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{VE(this),0<this.B&&((this.K=function qD(n){return _u&&function aE(){return function qp(n){var e=oE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Fh(String(wa)).split("."),t=Fh("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=fy(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||fy(0==o[2].length,0==u[2].length)||fy(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ti(this.pa,this)):this.A=Jp(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){kE(this,u)}},rt.pa=function(){void 0!==ly&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),yg(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yg(this,!0)),mr.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?LE(this):this.cb())},rt.cb=function(){LE(this)},rt.ba=function(){try{return 2<Ca(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),OE(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=BE.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new rd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=uo(u),ni(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zy(this,o,e),Un(t=Ia(this.F),"RID",n),Un(t,"CVER",22),this.D&&Un(t,"X-HTTP-Session-Id",this.D),md(this,t),this.o&&u&&jy(t,this.o,u),fg(this.i,o),this.Ra&&Un(t,"TYPE","init"),this.ja?(Un(t,"$req",e),Un(t,"SID","null"),o.$=!0,zh(o,t,null)):zh(o,t,e),this.G=2}}else 3==this.G&&(n?Gy(this,n):0==this.l.length||Vy(this.i)||Gy(this))},rt.Ga=function(){if(this.u=null,Cu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ed(ti(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ii(10),Xh(this),Cu(this))},rt.ab=function(){null!=this.v&&(this.v=null,Xh(this),vg(this),ii(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ii(2)):(this.h.info("Failed to ping google.com"),ii(1))},(rt=Zy.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},Ky.prototype.g=function(n,e){return new st(n,e)},Br(st,jr),st.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Jc(ti(n.hb,n,e))),ii(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=YD(n,null,n.W),ef(n)},st.prototype.close=function(){$y(this.g)},st.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,_g(this.g,e)}else this.v?((e={}).__data__=Ey(n),_g(this.g,e)):_g(this.g,n)},st.prototype.M=function(){this.g.j=null,delete this.j,$y(this.g),delete this.g,st.Z.M.call(this)},Br(HE,Sy),Br(GE,ug),Br(_d,Zy),_d.prototype.xa=function(){$r(this.g,"a")},_d.prototype.wa=function(n){$r(this.g,new HE(n))},_d.prototype.va=function(n){$r(this.g,new GE(n))},_d.prototype.ua=function(){$r(this.g,"b")},Ky.prototype.createWebChannel=Ky.prototype.g,st.prototype.send=st.prototype.u,st.prototype.open=st.prototype.m,st.prototype.close=st.prototype.close,Gh.NO_ERROR=0,Gh.TIMEOUT=8,Gh.HTTP_ERROR=6,sg.COMPLETE="complete",ag.EventType=td,td.OPEN="a",td.CLOSE="b",td.ERROR="c",td.MESSAGE="d",jr.prototype.listen=jr.prototype.N,mr.prototype.listenOnce=mr.prototype.O,mr.prototype.getLastError=mr.prototype.La,mr.prototype.getLastErrorCode=mr.prototype.Da,mr.prototype.getStatus=mr.prototype.ba,mr.prototype.getResponseJson=mr.prototype.Qa,mr.prototype.getResponseText=mr.prototype.ga,mr.prototype.send=mr.prototype.ea;var Dg=yu.createWebChannelTransport=function(){return new Ky},QD=yu.getStatEventTarget=function(){return bl()},vd=yu.ErrorCode=Gh,bg=yu.EventType=sg,Qn=yu.Event=Dl,JD=yu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zE=yu.FetchXmlHttpFactory=fd,Cg=yu.WebChannel=ag,XD=yu.XhrIo=mr;const Yy="@firebase/firestore";class Hr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");let Tl="9.8.0";const Ta=new mu.Yd("@firebase/firestore");function Qy(){return Ta.logLevel}function Ve(n,...e){if(Ta.logLevel<=mu.in.DEBUG){const t=e.map(Jy);Ta.debug(`Firestore (${Tl}): ${n}`,...t)}}function Bn(n,...e){if(Ta.logLevel<=mu.in.ERROR){const t=e.map(Jy);Ta.error(`Firestore (${Tl}): ${n}`,...t)}}function tf(n,...e){if(Ta.logLevel<=mu.in.WARN){const t=e.map(Jy);Ta.warn(`Firestore (${Tl}): ${n}`,...t)}}function Jy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: `+n;throw Bn(e),new Error(e)}function wt(n,e){n||ot()}function et(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends Ht.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ed{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Hr.UNAUTHENTICATED))}shutdown(){}}class nb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rb{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Jn,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,be.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Jn)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new Ed(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Hr(e)}}class qE{constructor(e,t,r){this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ZE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ib{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.p=t.token,new Xy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ps{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ob(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ps.A=-1;class ab{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=ob(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ut(n,e){return n<e?-1:n>e?1:0}function nf(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function ub(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Xn(0,0))}static max(){return new _t(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function KE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Al(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function e_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Aa{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Aa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Aa?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class en extends Aa{construct(e,t,r){return new en(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new en(t)}static emptyPath(){return new en([])}}const lb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends Aa{construct(e,t,r){return new Sr(e,t,r)}static isValidIdentifier(e){return lb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Pe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Pe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Pe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class wd{constructor(e){this.fields=e,e.sort(Sr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const db=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tu(n){if(wt(!!n),"string"==typeof n){let e=0;const t=db.exec(n);if(wt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:In(n.seconds),nanos:In(n.nanos)}}function In(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Sl(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function Tg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function YE(n){const e=n.mapValue.fields.__previous_value__;return Tg(e)?YE(e):e}function Id(n){const e=Tu(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}class hb{constructor(e,t,r,o,u,d,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Wo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}function rf(n){return null==n}function Ml(n){return 0===n&&1/n==-1/0}function QE(n){return"number"==typeof n&&Number.isInteger(n)&&!Ml(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(en.fromString(e))}static fromName(e){return new Qe(en.fromString(e).popFirst(5))}static empty(){return new Qe(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new en(e.slice()))}}const Sa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ag={nullValue:"NULL_VALUE"};function xl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tg(n)?4:i_(n)?9007199254740991:10:ot()}function qo(n,e){if(n===e)return!0;const t=xl(n);if(t!==xl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Id(n).isEqual(Id(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Tu(r.timestampValue),d=Tu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Sl(n.bytesValue).isEqual(Sl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return In(r.geoPointValue.latitude)===In(o.geoPointValue.latitude)&&In(r.geoPointValue.longitude)===In(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return In(r.integerValue)===In(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=In(r.doubleValue),d=In(o.doubleValue);return u===d?Ml(u)===Ml(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return nf(n.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(KE(u)!==KE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!qo(u[m],d[m])))return!1;return!0}(n,e);default:return ot()}var o}function Rl(n,e){return void 0!==(n.values||[]).find(t=>qo(t,e))}function Au(n,e){if(n===e)return 0;const t=xl(n),r=xl(e);if(t!==r)return Ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=In(o.integerValue||o.doubleValue),m=In(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return t_(n.timestampValue,e.timestampValue);case 4:return t_(Id(n),Id(e));case 5:return Ut(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Sl(o),m=Sl(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let E=0;E<d.length&&E<m.length;E++){const C=Ut(d[E],m[E]);if(0!==C)return C}return Ut(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Ut(In(o.latitude),In(u.latitude));return 0!==d?d:Ut(In(o.longitude),In(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let E=0;E<d.length&&E<m.length;++E){const C=Au(d[E],m[E]);if(C)return C}return Ut(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Sa.mapValue&&u===Sa.mapValue)return 0;if(o===Sa.mapValue)return 1;if(u===Sa.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const N=Ut(m[x],C[x]);if(0!==N)return N;const q=Au(d[m[x]],E[C[x]]);if(0!==q)return q}return Ut(m.length,C.length)}(n.mapValue,e.mapValue);default:throw ot()}}function t_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ut(n,e);const t=Tu(n),r=Tu(e),o=Ut(t.seconds,r.seconds);return 0!==o?o:Ut(t.nanos,r.nanos)}function Dd(n){return n_(n)}function n_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Tu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Sl(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=n_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${n_(r.fields[m])}`;return u+"}"}(n.mapValue):ot();var e}function Nl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function r_(n){return!!n&&"integerValue"in n}function sf(n){return!!n&&"arrayValue"in n}function JE(n){return!!n&&"nullValue"in n}function XE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sg(n){return!!n&&"mapValue"in n}function bd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Al(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function i_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function fb(n){return"nullValue"in n?Ag:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nl(Wo.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function pb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nl(Wo.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Sa:ot()}function s_(n,e){const t=Au(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ew(n,e){const t=Au(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bd(t)}setAll(e){let t=Sr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=bd(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Sg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Sg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Al(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new yi(bd(this.value))}}function tw(n){const e=[];return Al(n.fields,(t,r)=>{const o=new Sr([t]);if(Sg(r)){const u=tw(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new wd(e)}class Dn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Dn(e,0,_t.min(),_t.min(),yi.empty(),0)}static newFoundDocument(e,t,r){return new Dn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Dn(e,2,t,_t.min(),yi.empty(),0)}static newUnknownDocument(e,t){return new Dn(e,3,t,_t.min(),yi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cd{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Mg(n){return n.fields.find(e=>2===e.kind)}function Ma(n){return n.fields.filter(e=>2!==e.kind)}Cd.UNKNOWN_ID=-1;class xg{constructor(e,t){this.fieldPath=e,this.kind=t}}class of{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new of(0,Vs.min())}}function Rg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new Xn(t+1,0):new Xn(t,r));return new Vs(o,Qe.empty(),e)}function gb(n){return new Vs(n.readTime,n.key,-1)}class Vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vs(_t.min(),Qe.empty(),-1)}static max(){return new Vs(_t.max(),Qe.empty(),-1)}}function nw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ut(n.largestBatchId,e.largestBatchId))}class er{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ng(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ng(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ng(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ng(this.root,e,this.comparator,!0)}}class Ng{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Gr.RED,this.left=null!=o?o:Gr.EMPTY,this.right=null!=u?u:Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Gr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Gr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1,Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Gr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rw(this.data.getIterator())}getIteratorFrom(e){return new rw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class rw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xa(n){return n.hasNext()?n.getNext():void 0}class mb{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function Ol(n,e=null,t=[],r=[],o=null,u=null,d=null){return new mb(n,e,t,r,o,u,d)}function ho(n){const e=et(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Dd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),rf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Dd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Dd(r)).join(",")),e.P=t}return e.P}function Og(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!a_(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!qo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vb(n.startAt,e.startAt)&&vb(n.endAt,e.endAt)}function af(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Pg(n,e){return n.filters.filter(t=>t instanceof si&&t.field.isEqual(e))}function iw(n,e,t){let r=Ag,o=!0;for(const u of Pg(n,e)){let d=Ag,m=!0;switch(u.op){case"<":case"<=":d=fb(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Ag}s_({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];s_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function sw(n,e,t){let r=Sa,o=!0;for(const u of Pg(n,e)){let d=Sa,m=!0;switch(u.op){case">=":case">":d=pb(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Sa}ew({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];ew({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class si extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new ow(e,t,r):"array-contains"===t?new lf(e,r):"in"===t?new _b(e,r):"not-in"===t?new uw(e,r):"array-contains-any"===t?new lw(e,r):new si(e,t,r)}static V(e,t,r){return"in"===t?new aw(e,r):new o_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Au(t,this.value)):null!==t&&xl(this.value)===xl(t)&&this.v(Au(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ow extends si{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.v(t)}}class aw extends si{constructor(e,t){super(e,"in",t),this.keys=uf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class o_ extends si{constructor(e,t){super(e,"not-in",t),this.keys=uf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uf(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class lf extends si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sf(t)&&Rl(t.arrayValue,this.value)}}class _b extends si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rl(this.value.arrayValue,t)}}class uw extends si{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rl(this.value.arrayValue,t)}}class lw extends si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rl(this.value.arrayValue,r))}}class Su{constructor(e,t){this.position=e,this.inclusive=t}}class Td{constructor(e,t="asc"){this.field=e,this.dir=t}}function a_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function cw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Qe.comparator(Qe.fromName(d.referenceValue),t.key):Au(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function vb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qo(n.position[t],e.position[t]))return!1;return!0}class Ra{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function dw(n,e,t,r,o,u,d,m){return new Ra(n,e,t,r,o,u,d,m)}function fo(n){return new Ra(n)}function Mu(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function fw(n){for(const e of n.filters)if(e.S())return e.field;return null}function kg(n){return null!==n.collectionGroup}function Ad(n){const e=et(n);if(null===e.D){e.D=[];const t=fw(e),r=Mu(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Td(t)),e.D.push(new Td(Sr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Td(Sr.keyField(),u))}}}return e.D}function po(n){const e=et(n);if(!e.C)if("F"===e.limitType)e.C=Ol(e.path,e.collectionGroup,Ad(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ad(e))t.push(new Td(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Su(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Su(e.startAt.position,e.startAt.inclusive):null;e.C=Ol(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function u_(n,e,t){return new Ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fg(n,e){return Og(po(n),po(e))&&n.limitType===e.limitType}function l_(n){return`${ho(po(n))}|lt:${n.limitType}`}function cf(n){return`Query(target=${function yb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Dd(r.value)}`;var r}).join(", ")}]`),rf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Dd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Dd(t)).join(",")),`Target(${e})`}(po(n))}; limitType=${n.limitType})`}function c_(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=cw(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Ad(t),r)||t.endAt&&!function(o,u,d){const m=cw(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Ad(t),r)));var t,r}function pw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gw(n){return(e,t)=>{let r=!1;for(const o of Ad(n)){const u=Eb(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Eb(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),E=d.data.field(o);return null!==m&&null!==E?Au(m,E):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function mw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(e)?"-0":e}}function yw(n){return{integerValue:""+n}}function _w(n,e){return QE(e)?yw(e):mw(n,e)}class Lg{constructor(){this._=void 0}}function wb(n,e,t){return n instanceof Pl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof xu?d_(n,e):n instanceof Ru?h_(n,e):function(r,o){const u=Sd(r,o),d=vw(u)+vw(r.k);return r_(u)&&r_(r.k)?yw(d):mw(r.M,d)}(n,e)}function Ib(n,e,t){return n instanceof xu?d_(n,e):n instanceof Ru?h_(n,e):t}function Sd(n,e){return n instanceof Md?r_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Pl extends Lg{}class xu extends Lg{constructor(e){super(),this.elements=e}}function d_(n,e){const t=Ew(e);for(const r of n.elements)t.some(o=>qo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ru extends Lg{constructor(e){super(),this.elements=e}}function h_(n,e){let t=Ew(e);for(const r of n.elements)t=t.filter(o=>!qo(o,r));return{arrayValue:{values:t}}}class Md extends Lg{constructor(e,t){super(),this.M=e,this.k=t}}function vw(n){return In(n.integerValue||n.doubleValue)}function Ew(n){return sf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class df{constructor(e,t){this.field=e,this.transform=t}}class bb{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nu(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Vg{}function f_(n,e,t){n instanceof hf?function(r,o,u){const d=r.value.clone(),m=ff(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof kl?function(r,o,u){if(!Nu(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=ff(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(ww(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Us(n,e,t){var o;n instanceof hf?function(r,o,u){if(!Nu(r.precondition,o))return;const d=r.value.clone(),m=pf(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(xd(o),d).setHasLocalMutations()}(n,e,t):n instanceof kl?function(r,o,u){if(!Nu(r.precondition,o))return;const d=pf(r.fieldTransforms,u,o),m=o.data;m.setAll(ww(r)),m.setAll(d),o.convertToFoundDocument(xd(o),m).setHasLocalMutations()}(n,e,t):Nu(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function Cb(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Sd(r.transform,o||null);null!=u&&(null==t&&(t=yi.empty()),t.set(r.field,u))}return t||null}function Ug(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&nf(t,r,(o,u)=>function Db(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof xu&&r instanceof xu||t instanceof Ru&&r instanceof Ru?nf(t.elements,r.elements,qo):t instanceof Md&&r instanceof Md?qo(t.k,r.k):t instanceof Pl&&r instanceof Pl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function xd(n){return n.isFoundDocument()?n.version:_t.min()}class hf extends Vg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class kl extends Vg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function ww(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ff(n,e,t){const r=new Map;wt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Ib(d,m,t[o]))}return r}function pf(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,wb(u,d,e))}return r}class gf extends Vg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class p_ extends Vg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Iw{constructor(e){this.count=e}}var dr,Zt;function g_(n){switch(n){default:return ot();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function Dw(n){if(void 0===n)return Bn("GRPC error has no .code"),de.UNKNOWN;switch(n){case dr.OK:return de.OK;case dr.CANCELLED:return de.CANCELLED;case dr.UNKNOWN:return de.UNKNOWN;case dr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case dr.INTERNAL:return de.INTERNAL;case dr.UNAVAILABLE:return de.UNAVAILABLE;case dr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case dr.NOT_FOUND:return de.NOT_FOUND;case dr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case dr.ABORTED:return de.ABORTED;case dr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case dr.DATA_LOSS:return de.DATA_LOSS;default:return ot()}}(Zt=dr||(dr={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class Ou{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Al(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return e_(this.inner)}size(){return this.innerSize}}const gA=new er(Qe.comparator);function Yi(){return gA}const m_=new er(Qe.comparator);function Bg(...n){let e=m_;for(const t of n)e=e.insert(t.key,t);return e}function Fl(){return new Ou(n=>n.toString(),(n,e)=>n.isEqual(e))}const y_=new er(Qe.comparator),Tb=new kn(Qe.comparator);function pn(...n){let e=Tb;for(const t of n)e=e.add(t);return e}const Ab=new kn(Ut);function jg(){return Ab}class Rd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ll.createSynthesizedTargetChangeForCurrentChange(e,t)),new Rd(_t.min(),r,jg(),Yi(),pn())}}class Ll{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ll(yr.EMPTY_BYTE_STRING,t,pn(),pn(),pn())}}class mf{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class bw{constructor(e,t){this.targetId=e,this.$=t}}class __{constructor(e,t,r=yr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class v_{constructor(){this.B=0,this.L=w_(),this.U=yr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=pn(),t=pn(),r=pn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ot()}}),new Ll(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=w_()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Sb{constructor(e){this.nt=e,this.st=new Map,this.it=Yi(),this.rt=E_(),this.ot=new kn(Ut)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(af(u))if(0===r){const d=new Qe(u.path);this.ct(t,d,Dn.newNoDocument(d,_t.min()))}else wt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&af(m.target)){const E=new Qe(m.target.path);null!==this.it.get(E)||this.It(d,E)||this.ct(d,E,Dn.newNoDocument(E,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=pn();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Rd(e,t,this.ot,this.it,r);return this.it=Yi(),this.rt=E_(),this.ot=new kn(Ut),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new v_,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new kn(Ut),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new v_),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function E_(){return new er(Qe.comparator)}function w_(){return new er(Qe.comparator)}const Mb={asc:"ASCENDING",desc:"DESCENDING"},Cw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class xb{constructor(e,t){this.databaseId=e,this.N=t}}function Mr(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vl(n,e){return n.N?e.toBase64():e.toUint8Array()}function Rb(n,e){return Mr(n,e.toTimestamp())}function zr(n){return wt(!!n),_t.fromTimestamp(function(e){const t=Tu(e);return new Xn(t.seconds,t.nanos)}(n))}function Tw(n,e){return(t=n,new en(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Nd(n){const e=en.fromString(n);return wt(Fw(e)),e}function yf(n,e){return Tw(n.databaseId,e.path)}function Bs(n,e){const t=Nd(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(Aw(t))}function I_(n,e){return Tw(n.databaseId,e)}function D_(n){const e=Nd(n);return 4===e.length?en.emptyPath():Aw(e)}function _f(n){return new en(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Aw(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function $g(n,e,t){return{name:yf(n,e),fields:t.value.mapValue.fields}}function b_(n,e,t){const r=Bs(n,e.name),o=zr(e.updateTime),u=new yi({mapValue:{fields:e.fields}}),d=Dn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Ul(n,e){let t;if(e instanceof hf)t={update:$g(n,e.key,e.value)};else if(e instanceof gf)t={delete:yf(n,e.key)};else if(e instanceof kl)t={update:$g(n,e.key,e.data),updateMask:kw(e.fieldMask)};else{if(!(e instanceof p_))return ot();t={verify:yf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof Pl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof xu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ru)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Md)return{fieldPath:u.field.canonicalString(),increment:d.k};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Rb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ot()),t;var o}function Mw(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?_r.updateTime(zr(o.updateTime)):void 0!==o.exists?_r.exists(o.exists):_r.none():_r.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(wt("REQUEST_TIME"===d.setToServerValue),m=new Pl):"appendMissingElements"in d?m=new xu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Ru(d.removeAllFromArray.values||[]):"increment"in d?m=new Md(u,d.increment):ot();const E=Sr.fromServerFormat(d.fieldPath);return new df(E,m)}(n,o)):[];var o;if(e.update){const o=Bs(n,e.update.name),u=new yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new wd((e.updateMask.fieldPaths||[]).map(C=>Sr.fromServerFormat(C)));return new kl(o,u,d,t,r)}return new hf(o,u,t,r)}if(e.delete){const o=Bs(n,e.delete);return new gf(o,t)}if(e.verify){const o=Bs(n,e.verify);return new p_(o,t)}return ot()}function Rw(n,e){return{documents:[I_(n,e.path)]}}function C_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=I_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=I_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(x=>function(N){if("=="===N.op){if(XE(N.value))return{unaryFilter:{field:Ef(N.field),op:"IS_NAN"}};if(JE(N.value))return{unaryFilter:{field:Ef(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(XE(N.value))return{unaryFilter:{field:Ef(N.field),op:"IS_NOT_NAN"}};if(JE(N.value))return{unaryFilter:{field:Ef(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ef(N.field),op:A_(N.op),value:N.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:Ef((x=C).field),direction:T_(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||rf(C)?C:{value:C});var C,m,E;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function vf(n){let e=D_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){wt(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=Ow(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new Td(Od((N=x).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(x){let N;return N="object"==typeof x?x.value:x,rf(N)?null:N}(t.limit));let E=null;var x;t.startAt&&(E=new Su((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new Su(x.values||[],!x.before)}(t.endAt)),dw(e,o,d,u,m,"F",E,C)}function Ow(n){return n?void 0!==n.unaryFilter?[Pw(n)]:void 0!==n.fieldFilter?[Nb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Ow(e)).reduce((e,t)=>e.concat(t)):ot():[]}function T_(n){return Mb[n]}function A_(n){return Cw[n]}function Ef(n){return{fieldPath:n.canonicalString()}}function Od(n){return Sr.fromServerFormat(n.fieldPath)}function Nb(n){return si.create(Od(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(n.fieldFilter.op),n.fieldFilter.value)}function Pw(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Od(n.unaryFilter.field);return si.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Od(n.unaryFilter.field);return si.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Od(n.unaryFilter.field);return si.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Od(n.unaryFilter.field);return si.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}function kw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Fw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Vw(e)),e=Lw(n.get(t),e);return Vw(e)}function Lw(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Vw(n){return n+"\x01\x01"}function Zo(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),en.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&ot(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:ot()}u=d+2}return new en(r)}const S_=["userId","batchId"];function Gg(n,e){return[n,_i(e)]}function M_(n,e,t){return[n,_i(e),t]}const Uw={},Bw=["prefixPath","collectionGroup","readTime","documentId"],jw=["prefixPath","collectionGroup","documentId"],Ob=["collectionGroup","readTime","prefixPath","documentId"],Pb=["canonicalId","targetId"],mA=["targetId","path"],$w=["path","targetId"],yA=["collectionId","parent"],_A=["indexId","uid"],vA=["uid","sequenceNumber"],EA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wA=["indexId","uid","orderedDocumentKey"],IA=["userId","collectionPath","documentId"],DA=["userId","collectionPath","largestBatchId"],bA=["userId","collectionGroup","largestBatchId"],wf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CA=[...wf,"documentOverlays"],x_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],R_=[...x_,"indexConfiguration","indexState","indexEntries"],N_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},E=>r(E))}),d=!0,u===o&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(o=>o?pe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Pd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Jn,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new kd(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=P_(r.target.error);this.At.reject(new kd(e,o))}}static open(e,t,r,o){try{return new Pd(t,e.transaction(o,r))}catch(u){throw new kd(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Fb(t)}}class js{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===js.Vt((0,Ht.z$)())&&Bn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Bl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Ht.hl)())return!1;if(js.St())return!0;const e=(0,Ht.z$)(),t=js.Vt(e),r=0<t&&t<10,o=js.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new kd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Pe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Pe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new kd(e,m))},u.onupgradeneeded=d=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,be.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=Pd.open(u.db,e,d?"readonly":"readwrite",r),C=o(E).next(x=>(E.bt(),x)).catch(x=>(E.abort(x),pe.reject(x))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Ve("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Bl(this.Ft.delete())}}class kd extends Pe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fd(n){return"IndexedDbTransactionError"===n.name}class Fb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bl(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Bl(this.store.add(e))}get(e){return Bl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Bl(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Bl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new pe((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new pe((r,o)=>{t.onerror=u=>{const d=P_(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new pe((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const E=new kb(m),C=t(m.primaryKey,m.value,E);if(C instanceof pe){const x=C.catch(N=>(E.done(),pe.reject(N)));r.push(x)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bl(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=P_(r.target.error);t(o)}})}let zg=!1;function P_(n){const e=js.Vt((0,Ht.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zg||(zg=!0,setTimeout(()=>{throw r},0)),r}}return n}class Lb extends O_{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function oi(n,e){const t=et(n);return js.xt(t.Ht,e)}class Hw{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&f_(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Us(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Us(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pn())}isEqual(e){return this.batchId===e.batchId&&nf(this.mutations,e.mutations,(t,r)=>Ug(t,r))&&nf(this.baseMutations,e.baseMutations,(t,r)=>Ug(t,r))}}class k_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){wt(e.mutations.length===r.length);let o=y_;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new k_(e,t,r,o)}}class F_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pu{constructor(e,t,r,o,u=_t.min(),d=_t.min(),m=yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Vb{constructor(e){this.Jt=e}}function Wg(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:yf(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Mr(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ai(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:ai(e.version)}}var o,u;return r}function qg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ai(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jl(n){const e=new Xn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function ku(n,e){const t=(e.baseMutations||[]).map(u=>Mw(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Mw(n.Jt,u)),o=Xn.fromMillis(e.localWriteTimeMs);return new Hw(e.batchId,o,t,r)}function If(n){const e=jl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jl(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(wt(1===(o=n.query).documents.length),r=po(fo(D_(o.documents[0])))):r=po(vf(n.query)),new Pu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,yr.fromBase64String(n.resumeToken))}function Gw(n,e){const t=ai(e.snapshotVersion),r=ai(e.lastLimboFreeSnapshotVersion);let o;o=af(e.target)?Rw(n.Jt,e.target):C_(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ho(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Df(n){const e=vf({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?u_(e,e.limit,"L"):e}function Zg(n,e){return new F_(e.largestBatchId,Mw(n.Jt,e.overlayMutation))}function L_(n,e){const t=e.path.lastSegment();return[n,_i(e.path.popLast()),t]}class Bb{getBundleMetadata(e,t){return V_(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:jl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return V_(e).put({bundleId:(r=t).id,createTime:ai(zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zw(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Df(o.bundledQuery),readTime:jl(o.readTime)};var o})}saveNamedQuery(e,t){return zw(e).put({name:(r=t).name,readTime:ai(zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function V_(n){return oi(n,"bundles")}function zw(n){return oi(n,"namedQueries")}class U_{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new U_(e,t.uid||"")}getOverlay(e,t){return bf(e).get(L_(this.userId,t)).next(r=>r?Zg(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new F_(t,d);o.push(this.Xt(e,m))}),pe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(_i(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(bf(e).Qt("collectionPathOverlayIndex",m))}),pe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Fl(),u=_i(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return bf(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const E of m){const C=Zg(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Fl();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bf(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,x)=>{const N=Zg(this.M,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return bf(e).put(function(r,o,u){const[d,m,E]=L_(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Ul(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function bf(n){return oi(n,"documentOverlays")}class Na{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(In(e.integerValue));else if("doubleValue"in e){const r=In(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Ml(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Sl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?i_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ot()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Qe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function $l(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function B_(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=$l(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Na.fe=new Na;class Ww{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=B_(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=B_(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class jb{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class TA{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Cf{constructor(){this.De=new Ww,this.Ce=new jb(this.De),this.xe=new TA(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Hl{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Hl(this.indexId,this.documentKey,this.arrayValue,r)}}function Gl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=j_(n.arrayValue,e.arrayValue),0!==t?t:(t=j_(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function j_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class $b{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Mg(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ma(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Hb{constructor(){this.qe=new qw}addToCollectionParentIndex(e,t){return this.qe.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Vs.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class qw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new kn(en.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new kn(en.comparator)).toArray()}}const Ld=new Uint8Array(0);class Zw{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new qw,this.Ge=new Ou(r=>ho(r),(r,o)=>Og(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:_i(o)};return Kw(e).put(u)}return pe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[ub(t),""],!1,!0);return Kw(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Zo(d.parent))}return r})}addFieldIndex(e,t){const r=Af(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Af(e),o=Vd(e),u=Tf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Tf(e);let o=!0;const u=new Map;return pe.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=pn();const m=[];return pe.forEach(u,(E,C)=>{var x;Ve("IndexedDbIndexManager",`Using index ${x=E,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(Xt=>`${Xt.fieldPath}:${Xt.kind}`).join(",")}`} to execute ${ho(t)}`);const N=function(Xt,Bt){const Qt=Mg(Bt);if(void 0===Qt)return null;for(const yn of Pg(Xt,Qt.fieldPath))switch(yn.op){case"array-contains-any":return yn.value.arrayValue.values||[];case"array-contains":return[yn.value]}return null}(C,E),q=function(Xt,Bt){const Qt=new Map;for(const yn of Ma(Bt))for(const Ji of Pg(Xt,yn.fieldPath))switch(Ji.op){case"==":case"in":Qt.set(yn.fieldPath.canonicalString(),Ji.value);break;case"not-in":case"!=":return Qt.set(yn.fieldPath.canonicalString(),Ji.value),Array.from(Qt.values())}return null}(C,E),ne=function(Xt,Bt){const Qt=[];let yn=!0;for(const Ji of Ma(Bt)){const pv=0===Ji.kind?iw(Xt,Ji.fieldPath,Xt.startAt):sw(Xt,Ji.fieldPath,Xt.startAt);Qt.push(pv.value),yn&&(yn=pv.inclusive)}return new Su(Qt,yn)}(C,E),ye=function(Xt,Bt){const Qt=[];let yn=!0;for(const Ji of Ma(Bt)){const pv=0===Ji.kind?sw(Xt,Ji.fieldPath,Xt.endAt):iw(Xt,Ji.fieldPath,Xt.endAt);Qt.push(pv.value),yn&&(yn=pv.inclusive)}return new Su(Qt,yn)}(C,E),$e=this.We(E,C,ne),at=this.We(E,C,ye),Kt=this.ze(E,C,q),Yt=this.He(E.indexId,N,$e,ne.inclusive,at,ye.inclusive,Kt);return pe.forEach(Yt,Xt=>r.Gt(Xt,t.limit).next(Bt=>{Bt.forEach(Qt=>{const yn=Qe.fromSegments(Qt.documentKey);d.has(yn)||(d=d.add(yn),m.push(yn))})}))}).next(()=>m)}return pe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const E=(null!=t?t.length:1)*Math.max(r.length,u.length),C=E/(null!=t?t.length:1),x=[];for(let N=0;N<E;++N){const q=t?this.Je(t[N/C]):Ld,ne=this.Ye(e,q,r[N%C],o),ye=this.Xe(e,q,u[N%C],d),$e=m.map(at=>this.Ye(e,q,at,!0));x.push(...this.createRange(ne,ye,$e))}return x}Ye(e,t,r,o){const u=new Hl(e,Qe.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Hl(e,Qe.empty(),t,r);return o?u.ke():u}je(e,t){const r=new $b(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return pe.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new kn(Sr.comparator),E=!1;for(const C of d.filters){const x=C;x.field.isKeyField()||("array-contains"===x.op||"array-contains-any"===x.op?E=!0:m=m.add(x.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(E?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Cf;for(const o of Ma(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);Na.fe.Zt(u,d)}return r.Se()}Je(e){const t=new Cf;return Na.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Cf;return Na.fe.Zt(Nl(this.databaseId,t),r.Ne(function(o){const u=Ma(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Cf);let u=0;for(const d of Ma(e)){const m=r[u++];for(const E of o)if(this.en(t,d.fieldPath)&&sf(m))o=this.nn(o,d,m);else{const C=E.Ne(d.kind);Na.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const E=new Cf;E.seed(m.Se()),Na.fe.Zt(d,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof si&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Af(e),o=Vd(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return pe.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{d.push(function(C,x){const N=x?new of(x.sequenceNumber,new Vs(jl(x.readTime),new Qe(Zo(x.documentKey)),x.largestBatchId)):of.empty(),q=C.fields.map(([ne,ye])=>new xg(Sr.fromServerFormat(ne),ye));return new Cd(C.indexId,C.collectionGroup,q,N)}(m,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ut(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Af(e),u=Vd(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>pe.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:ai((q=r).readTime),documentKey:_i(q.documentKey.path),largestBatchId:q.largestBatchId});var q})))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?pe.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),pe.forEach(m,E=>this.on(e,o,E).next(C=>{const x=this.un(u,E);return C.isEqual(x)?pe.resolve():this.an(e,u,E,C,x)}))))})}cn(e,t,r,o){return Tf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Tf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Tf(e);let u=new kn(Gl);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Hl(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new kn(Gl);const o=this.Ze(t,e);if(null==o)return r;const u=Mg(t);if(null!=u){const d=e.data.field(u.fieldPath);if(sf(d))for(const m of d.arrayValue.values||[])r=r.add(new Hl(t.indexId,e.key,this.Je(m),o))}else r=r.add(new Hl(t.indexId,e.key,Ld,o));return r}an(e,t,r,o,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,E,C,x,N){const q=m.getIterator(),ne=E.getIterator();let ye=xa(q),$e=xa(ne);for(;ye||$e;){let at=!1,Kt=!1;if(ye&&$e){const Yt=C(ye,$e);Yt<0?Kt=!0:Yt>0&&(at=!0)}else null!=ye?Kt=!0:at=!0;at?(x($e),$e=xa(ne)):Kt?(N(ye),ye=xa(q)):(ye=xa(q),$e=xa(ne))}}(o,u,Gl,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),pe.waitFor(d)}rn(e){let t=1;return Vd(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>Gl(d,m)).filter((d,m,E)=>!m||0!==Gl(d,E[m-1]));const o=[];o.push(e);for(const d of r){const m=Gl(d,e),E=Gl(d,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(d),o.push(d.ke());else if(E>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,Ld,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,Ld,[]]));return u}getMinOffset(e,t){let r;return pe.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||nw(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Vs.min()})).next(()=>r)}}function Kw(n){return oi(n,"collectionParents")}function Tf(n){return oi(n,"indexEntries")}function Af(n){return oi(n,"indexConfiguration")}function Vd(n){return oi(n,"indexState")}const Kg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xi(e,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Yw(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:d},(x,N,q)=>(m++,q.delete()));u.push(E.next(()=>{wt(1===m)}));const C=[];for(const x of t.mutations){const N=M_(e,x.key.path,t.batchId);u.push(o.delete(N)),C.push(x.key)}return pe.waitFor(u).next(()=>C)}function Sf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}xi.DEFAULT_COLLECTION_PERCENTILE=10,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xi.DEFAULT=new xi(41943040,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xi.DISABLED=new xi(-1,0,0);class Yg{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){wt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Yg(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Mf(e),d=Fu(e);return d.add({}).next(m=>{wt("number"==typeof m);const E=new Hw(m,t,r,o),C=function(q,ne,ye){const $e=ye.baseMutations.map(Kt=>Ul(q.Jt,Kt)),at=ye.mutations.map(Kt=>Ul(q.Jt,Kt));return{userId:ne,batchId:ye.batchId,localWriteTimeMs:ye.localWriteTime.toMillis(),baseMutations:$e,mutations:at}}(this.M,this.userId,E),x=[];let N=new kn((q,ne)=>Ut(q.canonicalString(),ne.canonicalString()));for(const q of o){const ne=M_(this.userId,q.key.path,m);N=N.add(q.key.path.popLast()),x.push(d.put(C)),x.push(u.put(ne,Uw))}return N.forEach(q=>{x.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.ln[m]=E.keys()}),pe.waitFor(x).next(()=>E)})}lookupMutationBatch(e,t){return Fu(e).get(t).next(r=>r?(wt(r.userId===this.userId),ku(this.M,r)):null)}fn(e,t){return this.ln[t]?pe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Fu(e).Wt({index:"userMutationsIndex",range:o},(d,m,E)=>{m.userId===this.userId&&(wt(m.batchId>=r),u=ku(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fu(e).qt("userMutationsIndex",t).next(r=>r.map(o=>ku(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gg(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Mf(e).Wt({range:o},(d,m,E)=>{const[C,x,N]=d,q=Zo(x);if(C===this.userId&&t.path.isEqual(q))return Fu(e).get(N).next(ne=>{if(!ne)throw ot();wt(ne.userId===this.userId),u.push(ku(this.M,ne))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Ut);const o=[];return t.forEach(u=>{const d=Gg(this.userId,u.path),m=IDBKeyRange.lowerBound(d),E=Mf(e).Wt({range:m},(C,x,N)=>{const[q,ne,ye]=C,$e=Zo(ne);q===this.userId&&u.path.isEqual($e)?r=r.add(ye):N.done()});o.push(E)}),pe.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Gg(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new kn(Ut);return Mf(e).Wt({range:d},(E,C,x)=>{const[N,q,ne]=E,ye=Zo(q);N===this.userId&&r.isPrefixOf(ye)?ye.length===o&&(m=m.add(ne)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Fu(e).get(u).next(d=>{if(null===d)throw ot();wt(d.userId===this.userId),r.push(ku(this.M,d))}))}),pe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Yw(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),pe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Mf(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const E=Zo(u[1]);o.push(E)}else m.done()}).next(()=>{wt(0===o.length)})})}containsKey(e,t){return Qw(e,this.userId,t)}wn(e){return Gb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Qw(n,e,t){const r=Gg(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Mf(n).Wt({range:u,jt:!0},(m,E,C)=>{const[x,N,q]=m;x===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function Fu(n){return oi(n,"mutations")}function Mf(n){return oi(n,"documentMutations")}function Gb(n){return oi(n,"mutationQueues")}class Lu{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Lu(0)}static yn(){return new Lu(-1)}}class zb{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Lu(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>_t.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ud(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Ud(e).Wt((d,m)=>{const E=If(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>pe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Ud(e).Wt((r,o)=>{const u=If(o);t(u)})}pn(e){return Jw(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}In(e,t){return Jw(e).put("targetGlobalKey",t)}Tn(e,t){return Ud(e).put(Gw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ho(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ud(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,E)=>{const C=If(m);Og(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=zl(e);return t.forEach(d=>{const m=_i(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),pe.waitFor(o)}removeMatchingKeys(e,t,r){const o=zl(e);return pe.forEach(t,u=>{const d=_i(u.path);return pe.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=zl(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=zl(e);let u=pn();return o.Wt({range:r,jt:!0},(d,m,E)=>{const C=Zo(d[1]),x=new Qe(C);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=_i(t.path),o=IDBKeyRange.bound([r],[ub(r)],!1,!0);let u=0;return zl(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],E,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Ud(e).get(t).next(r=>r?If(r):null)}}function Ud(n){return oi(n,"targets")}function Jw(n){return oi(n,"targetGlobal")}function zl(n){return oi(n,"targetDocuments")}function Bd(n){return Xw.apply(this,arguments)}function Xw(){return Xw=(0,be.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==N_)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Xw.apply(this,arguments)}function Wb([n,e],[t,r]){const o=Ut(n,t);return 0===o?Ut(e,r):o}class AA{constructor(e){this.An=e,this.buffer=new kn(Wb),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Wb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qb{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Fd(o)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Bd(o)}yield t.Sn(e)}))}}class Qg{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(ps.A);const r=new AA(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Kg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kg):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,E,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Qy()<=mu.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${N} documents in `+(C-E)+`ms\nTotal Duration: ${C-x}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class Zb{constructor(e,t){this.db=e,this.garbageCollector=new Qg(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return Jg(e,r)}removeReference(e,t,r){return Jg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Jg(e,t)}On(e,t){return function(r,o){let u=!1;return Gb(r).zt(d=>Qw(r,d,o).next(m=>(m&&(u=!0),pe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const E=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),zl(e).delete([0,_i(d.path)])))});o.push(E)}}).next(()=>pe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Jg(e,t)}Mn(e,t){const r=zl(e);let o,u=ps.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:E,sequenceNumber:C})=>{0===d?(u!==ps.A&&t(new Qe(Zo(o)),u),u=C,o=E):u=ps.A}).next(()=>{u!==ps.A&&t(new Qe(Zo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jg(n,e){return zl(n).put((r=n.currentSequenceNumber,{targetId:0,path:_i(e.path),sequenceNumber:r}));var r}class $_{constructor(){this.changes=new Ou(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wl{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Oa(e).put(r)}removeEntry(e,t,r){return Oa(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],qg(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Dn.newInvalidDocument(t);return Oa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xf(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Dn.newInvalidDocument(t)};return Oa(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xf(t))},(o,u)=>{r={document:this.$n(t,u),size:Sf(u)}}).next(()=>r)}getEntries(e,t){let r=Yi();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=Yi(),o=new er(Qe.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,Sf(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return pe.resolve();let o=new kn(tm);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(xf(o.first()),xf(o.last())),d=o.getIterator();let m=d.getNext();return Oa(e).Wt({index:"documentKeyIndex",range:u},(E,C,x)=>{const N=Qe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&tm(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(xf(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),qg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oa(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Yi();for(const E of d){const C=this.$n(Qe.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Yi();const d=em(t,r),m=em(t,Vs.max());return Oa(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(E,C,x)=>{const N=this.$n(Qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new eI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Xg(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Fn(e,t){return Xg(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function Ub(n,e){let t;if(e.document)t=b_(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),o=jl(e.noDocument.readTime);t=Dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=Qe.fromSegments(e.unknownDocument.path),o=jl(e.unknownDocument.version);t=Dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Xn(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Dn.newInvalidDocument(e)}}class eI extends $_{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ou(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new kn((u,d)=>Ut(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const E=Wg(this.Kn.M,d);o=o.add(u.path.popLast()),r+=Sf(E)-m.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=Wg(this.Kn.M,d.convertToNoDocument(_t.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Xg(n){return oi(n,"remoteDocumentGlobal")}function Oa(n){return oi(n,"remoteDocumentsV14")}function xf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function em(n,e){const t=e.documentKey.path.toArray();return[n,qg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tm(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ut(t[u],r[u]),o)return o;return o=Ut(t.length,r.length),o||(o=Ut(t[t.length-2],r[r.length-2]),o||Ut(t[t.length-1],r[r.length-1]))}class nm{constructor(e){this.M=e}kt(e,t,r,o){const u=new Pd("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S_,{unique:!0}),m.createObjectStore("documentMutations"),Kb(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=pe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Kb(e)),d=d.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",S_,{unique:!0});const x=E.store("mutations"),N=C.map(q=>x.put(q));return pe.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:IA});E.createIndex("collectionPathOverlayIndex",DA,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",bA,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:Bw});E.createIndex("documentKeyIndex",jw),E.createIndex("collectionGroupIndex",Ob)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:_A}).createIndex("sequenceNumberIndex",vA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:EA}).createIndex("documentKeyIndex",wA,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Sf(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>pe.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>pe.forEach(m,E=>{wt(E.userId===u.userId);const C=ku(this.M,E);return Yw(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const E=new en(d),C=[0,_i(E)];u.push(t.get(C).next(x=>x?pe.resolve():t.put({targetId:0,path:_i(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>pe.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:yA});const r=t.store("collectionParents"),o=new qw,u=d=>{if(o.add(d)){const m=d.lastSegment(),E=d.popLast();return r.put({collectionId:m,parent:_i(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const E=new en(d);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,E],C)=>{const x=Zo(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=If(o),d=Gw(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),E=(C=d,C.document?new Qe(en.fromString(C.document.name).popFirst(5)):C.noDocument?Qe.fromSegments(C.noDocument.path):C.unknownDocument?Qe.fromSegments(C.unknownDocument.path):ot()).path.toArray();var C;const x={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>pe.waitFor(o))}}function Kb(n){n.createObjectStore("targetDocuments",{keyPath:mA}).createIndex("documentTargetsIndex",$w,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Pb,{unique:!0}),n.createObjectStore("targetGlobal")}const tI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nI{constructor(e,t,r,o,u,d,m,E,C,x,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=x,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=q=>Promise.resolve(),!nI.vt())throw new Pe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zb(this,o),this.hs=t+"main",this.M=new Vb(E),this.ls=new js(this.hs,this.ts,new nm(this.M)),this.fs=new zb(this.referenceDelegate,this.M),this.ds=new Wl(this.M),this._s=new Bb,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Bn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,tI);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ps(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,be.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Fd(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return rm(e).get("owner").next(t=>pe.resolve(this.Ps(t)))}Vs(e){return Rf(e).delete(this.clientId)}vs(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=oi(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(E=>-1===d.indexOf(E));return pe.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?pe.resolve(!0):rm(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Pe(de.FAILED_PRECONDITION,tI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rf(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lb(t,ps.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Rf(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Yg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Zw(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return U_.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?R_:13===d?x_:12===d?CA:11===d?wf:void ot();var d;let m;return this.ls.runTransaction(e,o,u,E=>(m=new Lb(E,this.es?this.es.next():ps.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw Bn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(de.FAILED_PRECONDITION,N_);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}$s(e){return rm(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(de.FAILED_PRECONDITION,tI)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rm(e).put("owner",t)}static vt(){return js.vt()}Rs(e){const t=rm(e);return t.get("owner").next(r=>this.Ps(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Bn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Ht.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Bn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function rm(n){return oi(n,"owner")}function Rf(n){return oi(n,"clientMetadata")}function H_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Yb{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):kg(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Qe(t)).next(r=>{let o=Bg();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=Bg();return this.indexManager.getCollectionParents(e,o).next(d=>pe.forEach(d,m=>{const E=(C=t,x=m.child(o),new Ra(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.zs(e,E,r).next(C=>{C.forEach((x,N)=>{u=u.insert(x,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const E=m.key;let C=o.get(E);null==C&&(C=Dn.newInvalidDocument(E),o=o.insert(E,C)),Us(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,d)=>{c_(t,d)||(o=o.remove(u))}),o))}}class G_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=pn(),o=pn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new G_(e,t.fromCache,r,o)}}class rI{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return pe.resolve(null)}ei(e,t,r,o){return function hw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(_t.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(Qy()<=mu.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),cf(t)),this.ri(e,d,t,Rg(o,-1)))})}si(e,t){let r=new kn(gw(e));return t.forEach((o,u)=>{c_(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return Qy()<=mu.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",cf(t)),this.Zs.Qs(e,t,Vs.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class iI{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new er(Ut),this.ai=new Ou(u=>ho(u),Og),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Yb(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function z_(n,e,t,r){return new iI(n,e,t,r)}function W_(n,e){return q_.apply(this,arguments)}function q_(){return q_=(0,be.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let E=pn();for(const C of o){d.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}for(const C of u){m.push(C.batchId);for(const x of C.mutations)E=E.add(x.key)}return t.fi.Ks(r,E).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),q_.apply(this,arguments)}function Qb(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,E,C){const x=E.batch,N=x.keys();let q=pe.resolve();return N.forEach(ne=>{q=q.next(()=>C.getEntry(m,ne)).next(ye=>{const $e=E.docVersions.get(ne);wt(null!==$e),ye.version.compareTo($e)<0&&(x.applyToRemoteDocument(ye,E),ye.isValidDocument()&&(ye.setReadTime(E.commitVersion),C.addEntry(ye)))})}),q.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function Z_(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function K_(n,e){const t=et(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,x)=>{const N=o.get(x);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,x)));let q=N.withSequenceNumber(u.currentSequenceNumber);var ne,ye,$e;e.targetMismatches.has(x)?q=q.withResumeToken(yr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):C.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(C.resumeToken,r)),o=o.insert(x,q),ye=q,$e=C,(0===(ne=N).resumeToken.approximateByteSize()||ye.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,q))});let E=Yi();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(Jb(u,d,e.documentUpdates).next(C=>{E=C})),!r.isEqual(_t.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return pe.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,E)).next(()=>E)}).then(u=>(t.ui=o,u))}function Jb(n,e,t){let r=pn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=Yi();return t.forEach((d,m)=>{const E=o.get(d);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Ve("LocalStore","Ignoring outdated watch update for ",d,". Current version:",E.version," Watch version:",m.version)}),u})}function sI(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Vu(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,pe.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Pu(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function jd(n,e,t){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,be.Z)(function*(n,e,t){const r=et(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Fd(d))throw d;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),Y_.apply(this,arguments)}function Q_(n,e,t){const r=et(n);let o=_t.min(),u=pn();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,E,C){const x=et(m),N=x.ai.get(C);return void 0!==N?pe.resolve(x.ui.get(N)):x.fs.getTargetData(E,C)}(r,d,po(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(E=>{u=E})}).next(()=>r.oi.Qs(d,e,t?o:_t.min(),t?u:pn())).next(m=>(aI(r,pw(e),m),{documents:m,_i:u})))}function Xb(n,e){const t=et(n),r=et(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function oI(n,e){const t=et(n),r=t.ci.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,Rg(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(aI(t,e,o),o))}function aI(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function uI(){return uI=(0,be.Z)(function*(n,e,t,r){const o=et(n);let u=pn(),d=Yi();for(const C of t){const x=e.wi(C.metadata.name);C.document&&(u=u.add(x));const N=e.mi(C);N.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(x,N)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),E=yield Vu(o,(C=r,po(fo(en.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Jb(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.fs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.fs.addMatchingKeys(C,u,E.targetId)).next(()=>o.fi.Gs(C,x)).next(()=>x)))}),uI.apply(this,arguments)}function MA(n,e){return lI.apply(this,arguments)}function lI(){return lI=(0,be.Z)(function*(n,e,t=pn()){const r=yield Vu(n,po(Df(e.bundledQuery))),o=et(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=zr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(yr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),lI.apply(this,arguments)}class xA{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return pe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:zr(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Df(r.bundledQuery),readTime:zr(r.readTime)}),pe.resolve();var r}}class eC{constructor(){this.overlays=new er(Qe.comparator),this.Ii=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const o=Fl(),u=t.length+1,d=new Qe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return pe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new er((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=u.get(C.largestBatchId);null===x&&(x=Fl(),u=u.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=Fl(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return pe.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new F_(t,r));let u=this.Ii.get(t);void 0===u&&(u=pn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class cI{constructor(){this.Ti=new kn(ui.Ei),this.Ai=new kn(ui.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new ui(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new ui(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Qe(new en([])),r=new ui(t,e),o=new ui(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Qe(new en([])),r=new ui(t,e),o=new ui(t,e+1);let u=pn();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new ui(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Qe.comparator(e.key,t.key)||Ut(e.Ci,t.Ci)}static Ri(e,t){return Ut(e.Ci,t.Ci)||Qe.comparator(e.key,t.key)}}class RA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new kn(ui.Ei)}checkEmpty(e){return pe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new Hw(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new ui(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return pe.resolve(d)}lookupMutationBatch(e,t){return pe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return pe.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return pe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),o=new ui(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kn(Ut);return t.forEach(o=>{const u=new ui(o,0),d=new ui(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),pe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Qe.isDocumentKey(u)||(u=u.child(""));const d=new ui(new Qe(u),0);let m=new kn(Ut);return this.Ni.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.Ci)),!0)},d),pe.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){wt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return pe.forEach(t.mutations,o=>{const u=new ui(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new ui(t,0),o=this.Ni.firstAfterOrEqual(r);return pe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return pe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class NA{constructor(e){this.$i=e,this.docs=new er(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():Dn.newInvalidDocument(t))}getEntries(e,t){let r=Yi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Dn.newInvalidDocument(o))}),pe.resolve(r)}getAllFromCollection(e,t,r){let o=Yi();const u=new Qe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:E}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||nw(gb(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return pe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){ot()}Bi(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new i(this)}getSize(e){return pe.resolve(this.size)}}class i extends $_{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class s{constructor(e){this.persistence=e,this.Li=new Ou(t=>ho(t),Og),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Ui=0,this.qi=new cI,this.targetCount=0,this.Ki=Lu.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),pe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Lu(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Tn(t),pe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),pe.waitFor(u).next(()=>o)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),pe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.qi.containsKey(t))}}class a{constructor(e,t){this.Gi={},this.overlays={},this.es=new ps(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new s(this),this.indexManager=new Hb,this.ds=new NA(r=>this.referenceDelegate.Qi(r)),this.M=new Vb(t),this._s=new xA(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new RA(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new l(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return pe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class l extends O_{constructor(e){super(),this.currentSequenceNumber=e}}class c{constructor(e){this.persistence=e,this.Hi=new cI,this.Ji=null}static Yi(e){return new c(e)}get Xi(){if(this.Ji)return this.Ji;throw ot()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Xi,r=>{const o=Qe.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return pe.or([()=>pe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function h(n,e){return`firestore_clients_${n}_${e}`}function y(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function v(n,e){return`firestore_targets_${n}_${e}`}class I{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Pe(o.error.code,o.error.message))),d?new I(e,t,o.state,u):(Bn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class T{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new T(e,r.state,o):(Bn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class S{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=jg();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=QE(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new S(e,u):(Bn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class k{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new k(t.clientId,t.onlineState):(Bn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class B{constructor(){this.activeTargetIds=jg()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new er(Ut),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=h(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new B),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(h(e.persistenceKey,o));if(u){const d=S.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(v(this.persistenceKey,e));if(r){const o=T.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(v(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Bn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=ps.A;if(null!=u)try{const m=JSON.parse(u);wt("number"==typeof m),d=m}catch(m){Bn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==ps.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new I(this.currentUser,e,t,r),u=y(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=y(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=v(this.persistenceKey,e),u=new T(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return S.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return I.tr(new Hr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return T.tr(o,t)}pr(e){return k.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(E=>{o.has(E)||d.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=jg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Ie{constructor(){this.Ur=new B,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new B,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Be{Kr(e){}shutdown(){}}class Ye{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const it={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Re{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class yt extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Ve("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(E=>(Ve("RestConnection","Received: ",E),E),E=>{throw tf("RestConnection",`${e} failed with error: `,E,"url: ",d,"request:",r),E})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${it[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new XD;m.listenOnce(bg.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case vd.NO_ERROR:const C=m.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(C)),u(C);break;case vd.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),d(new Pe(de.DEADLINE_EXCEEDED,"Request time out"));break;case vd.HTTP_ERROR:const x=m.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const q=function(ne){const ye=ne.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(ye)>=0?ye:de.UNKNOWN}(N.status);d(new Pe(q,N.message))}else d(new Pe(de.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Pe(de.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Dg(),d=QD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new zE({})),this.lo(m.initMessageHeaders,t,r),(0,Ht.uI)()||(0,Ht.b$)()||(0,Ht.d)()||(0,Ht.w1)()||(0,Ht.Mn)()||(0,Ht.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Ve("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let x=!1,N=!1;const q=new Re({Jr:ye=>{N?Ve("Connection","Not sending because WebChannel is closed:",ye):(x||(Ve("Connection","Opening WebChannel transport."),C.open(),x=!0),Ve("Connection","WebChannel sending:",ye),C.send(ye))},Yr:()=>C.close()}),ne=(ye,$e,at)=>{ye.listen($e,Kt=>{try{at(Kt)}catch(Yt){setTimeout(()=>{throw Yt},0)}})};return ne(C,Cg.EventType.OPEN,()=>{N||Ve("Connection","WebChannel transport opened.")}),ne(C,Cg.EventType.CLOSE,()=>{N||(N=!0,Ve("Connection","WebChannel transport closed"),q.ro())}),ne(C,Cg.EventType.ERROR,ye=>{N||(N=!0,tf("Connection","WebChannel transport errored:",ye),q.ro(new Pe(de.UNAVAILABLE,"The operation could not be completed")))}),ne(C,Cg.EventType.MESSAGE,ye=>{var $e;if(!N){const at=ye.data[0];wt(!!at);const Kt=at,Yt=Kt.error||(null===($e=Kt[0])||void 0===$e?void 0:$e.error);if(Yt){Ve("Connection","WebChannel received error:",Yt);const Xt=Yt.status;let Bt=function(yn){const Ji=dr[yn];if(void 0!==Ji)return Dw(Ji)}(Xt),Qt=Yt.message;void 0===Bt&&(Bt=de.INTERNAL,Qt="Unknown error status: "+Xt+" with message "+Yt.message),N=!0,q.ro(new Pe(Bt,Qt)),C.close()}else Ve("Connection","WebChannel received:",at),q.oo(at)}}),ne(d,Qn.STAT_EVENT,ye=>{ye.stat===JD.PROXY?Ve("Connection","Detected buffering proxy"):ye.stat===JD.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.io()},0),q}}function Gt(){return"undefined"!=typeof window?window:null}function rn(){return"undefined"!=typeof document?document:null}function li(n){return new xb(n,!0)}class Pa{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class im{constructor(e,t,r,o,u,d,m,E){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Pa(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,be.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Bn(t.toString()),Bn("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Pe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J_ extends im{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function Hg(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:ot(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(wt(void 0===C||"string"==typeof C),yr.fromBase64String(C||"")):(wt(void 0===C||C instanceof Uint8Array),yr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const C=void 0===E.code?de.UNKNOWN:Dw(E.code);return new Pe(C,E.message||"")}(d);t=new __(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Bs(n,r.document.name),u=zr(r.document.updateTime),d=new yi({mapValue:{fields:r.document.fields}}),m=Dn.newFoundDocument(o,u,d);t=new mf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Bs(n,r.document),u=r.readTime?zr(r.readTime):_t.min(),d=Dn.newNoDocument(o,u);t=new mf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Bs(n,r.document);t=new mf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ot();{const r=e.filter,u=new Iw(r.count||0);t=new bw(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?zr(u.readTime):_t.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=_f(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=af(m)?{documents:Rw(o,m)}:{query:C_(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Vl(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=Mr(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function Nw(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=_f(this.M),t.removeTarget=e,this.Lo(t)}}class X_ extends im{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function xw(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,o){let u=zr(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=zr(o)),new bb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zr(e.commitTime);return this.listener.tu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=_f(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ul(this.M,r))};this.Lo(t)}}class ev extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(de.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(de.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class tv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Bn(t),this.uu=!1):Ve("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class nv{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,be.Z)(function*(){var E;$d(d)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,be.Z)(function*(C){const x=et(C);x.wu.add(4),yield Uu(x),x.yu.set("Unknown"),x.wu.delete(4),yield ql(x)}),function(C){return E.apply(this,arguments)})(d))}))}),this.yu=new tv(r,o)}}function ql(n){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,be.Z)(function*(n){if($d(n))for(const e of n.mu)yield e(!0)}),Nf.apply(this,arguments)}function Uu(n){return tC.apply(this,arguments)}function tC(){return tC=(0,be.Z)(function*(n){for(const e of n.mu)yield e(!1)}),tC.apply(this,arguments)}function dI(n,e){const t=et(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),iC(t)?rC(t):om(t).Mo()&&nC(t,e))}function rv(n,e){const t=et(n),r=om(t);t._u.delete(e),r.Mo()&&OA(t,e),0===t._u.size&&(r.Mo()?r.$o():$d(t)&&t.yu.set("Unknown"))}function nC(n,e){n.pu.Z(e.targetId),om(n).Ho(e)}function OA(n,e){n.pu.Z(e),om(n).Jo(e)}function rC(n){n.pu=new Sb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),om(n).start(),n.yu.au()}function iC(n){return $d(n)&&!om(n).ko()&&n._u.size>0}function $d(n){return 0===et(n).wu.size}function PA(n){n.pu=void 0}function $M(n){return sC.apply(this,arguments)}function sC(){return sC=(0,be.Z)(function*(n){n._u.forEach((e,t)=>{nC(n,e)})}),sC.apply(this,arguments)}function HM(n,e){return oC.apply(this,arguments)}function oC(){return oC=(0,be.Z)(function*(n,e){PA(n),iC(n)?(n.yu.lu(e),rC(n)):n.yu.set("Unknown")}),oC.apply(this,arguments)}function GM(n,e,t){return aC.apply(this,arguments)}function aC(){return aC=(0,be.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof __&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hI(n,r)}else if(e instanceof mf?n.pu.ut(e):e instanceof bw?n.pu._t(e):n.pu.ht(e),!t.isEqual(_t.min()))try{const r=yield Z_(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(E);C&&o._u.set(E,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const E=o._u.get(m);if(!E)return;o._u.set(m,E.withResumeToken(yr.EMPTY_BYTE_STRING,E.snapshotVersion)),OA(o,m);const C=new Pu(E.target,m,1,E.sequenceNumber);nC(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield hI(n,r)}var r}),aC.apply(this,arguments)}function hI(n,e,t){return uC.apply(this,arguments)}function uC(){return uC=(0,be.Z)(function*(n,e,t){if(!Fd(e))throw e;n.wu.add(1),yield Uu(n),n.yu.set("Offline"),t||(t=()=>Z_(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield ql(n)}))}),uC.apply(this,arguments)}function kA(n,e){return e().catch(t=>hI(n,t,e))}function sm(n){return lC.apply(this,arguments)}function lC(){return lC=(0,be.Z)(function*(n){const e=et(n),t=Hd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;zM(e);)try{const o=yield sI(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,WM(e,o)}catch(o){yield hI(e,o)}FA(e)&&LA(e)}),lC.apply(this,arguments)}function zM(n){return $d(n)&&n.du.length<10}function WM(n,e){n.du.push(e);const t=Hd(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function FA(n){return $d(n)&&!Hd(n).ko()&&n.du.length>0}function LA(n){Hd(n).start()}function qM(n){return cC.apply(this,arguments)}function cC(){return cC=(0,be.Z)(function*(n){Hd(n).nu()}),cC.apply(this,arguments)}function ZM(n){return dC.apply(this,arguments)}function dC(){return dC=(0,be.Z)(function*(n){const e=Hd(n);for(const t of n.du)e.Zo(t.mutations)}),dC.apply(this,arguments)}function KM(n,e,t){return hC.apply(this,arguments)}function hC(){return hC=(0,be.Z)(function*(n,e,t){const r=n.du.shift(),o=k_.from(r,e,t);yield kA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield sm(n)}),hC.apply(this,arguments)}function YM(n,e){return fC.apply(this,arguments)}function fC(){return fC=(0,be.Z)(function*(n,e){var t;e&&Hd(n).Xo&&(yield(t=(0,be.Z)(function*(r,o){if(g_(u=o.code)&&u!==de.ABORTED){const d=r.du.shift();Hd(r).Fo(),yield kA(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield sm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),FA(n)&&LA(n)}),fC.apply(this,arguments)}function VA(n,e){return pC.apply(this,arguments)}function pC(){return pC=(0,be.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=$d(t);t.wu.add(3),yield Uu(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield ql(t)}),pC.apply(this,arguments)}function gC(n,e){return mC.apply(this,arguments)}function mC(){return mC=(0,be.Z)(function*(n,e){const t=et(n);e?(t.wu.delete(2),yield ql(t)):e||(t.wu.add(2),yield Uu(t),t.yu.set("Unknown"))}),mC.apply(this,arguments)}function om(n){return n.Iu||(n.Iu=function(e,t,r){const o=et(e);return o.iu(),new J_(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:$M.bind(null,n),eo:HM.bind(null,n),zo:GM.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Fo(),iC(n)?rC(n):n.yu.set("Unknown")):(yield n.Iu.stop(),PA(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Hd(n){return n.Tu||(n.Tu=function(e,t,r){const o=et(e);return o.iu(),new X_(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:qM.bind(null,n),eo:YM.bind(null,n),eu:ZM.bind(null,n),tu:KM.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),yield sm(n)):(yield n.Tu.stop(),n.du.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class yC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new yC(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(n,e){if(Bn("AsyncQueue",`${e}: ${n}`),Fd(n))return new Pe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class um{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=Bg(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new um(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof um)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new um;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class UA{constructor(){this.Eu=new er(Qe.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ot():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class lm{constructor(e,t,r,o,u,d,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new lm(e,t,um.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class QM{constructor(){this.Ru=void 0,this.listeners=[]}}class JM{constructor(){this.queries=new Ou(e=>l_(e),Fg),this.onlineState="Unknown",this.bu=new Set}}function _C(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,be.Z)(function*(n,e){const t=et(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new QM),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=am(d,`Initialization of query '${cf(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&IC(t)}),vC.apply(this,arguments)}function EC(n,e){return wC.apply(this,arguments)}function wC(){return wC=(0,be.Z)(function*(n,e){const t=et(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),wC.apply(this,arguments)}function XM(n,e){const t=et(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&IC(t)}function ex(n,e,t){const r=et(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function IC(n){n.bu.forEach(e=>{e.next()})}class DC{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new lm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=lm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class tx{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class BA{constructor(e){this.M=e}wi(e){return Bs(this.M,e)}mi(e){return e.metadata.exists?b_(this.M,e.document,!1):Dn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return zr(e)}}class nx{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=en.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new BA(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||pn()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function SA(n,e,t,r){return uI.apply(this,arguments)}(e.localStore,new BA(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield MA(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function jA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class $A{constructor(e){this.key=e}}class HA{constructor(e){this.key=e}}class GA{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=pn(),this.mutatedKeys=pn(),this.Gu=gw(e),this.Qu=new um(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new UA,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,N)=>{const q=o.get(x),ne=c_(this.query,N)?N:null,ye=!!q&&this.mutatedKeys.has(q.key),$e=!!ne&&(ne.hasLocalMutations||this.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations);let at=!1;q&&ne?q.data.isEqual(ne.data)?ye!==$e&&(r.track({type:3,doc:ne}),at=!0):this.Hu(q,ne)||(r.track({type:2,doc:ne}),at=!0,(E&&this.Gu(ne,E)>0||C&&this.Gu(ne,C)<0)&&(m=!0)):!q&&ne?(r.track({type:0,doc:ne}),at=!0):q&&!ne&&(r.track({type:1,doc:q}),at=!0,(E||C)&&(m=!0)),at&&(ne?(d=d.add(ne),u=$e?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const x="F"===this.query.limitType?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,x)=>function(N,q){const ne=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return ne(N)-ne(q)}(C.type,x.type)||this.Gu(C.doc,x.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,E=m!==this.qu;return this.qu=m,0!==u.length||E?{snapshot:new lm(this.query,e.Qu,o,u,e.mutatedKeys,0===m,E,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new UA,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=pn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new HA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new $A(r))}),t}ta(e){this.Uu=e._i,this.Ku=pn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return lm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class rx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ix{constructor(e){this.key=e,this.na=!1}}class sx{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new Ou(m=>l_(m),Fg),this.ra=new Map,this.oa=new Set,this.ua=new er(Qe.comparator),this.aa=new Map,this.ca=new cI,this.ha={},this.la=new Map,this.fa=Lu.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function ox(n,e){return bC.apply(this,arguments)}function bC(){return bC=(0,be.Z)(function*(n,e){const t=qC(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield Vu(t.localStore,po(e));t.isPrimaryClient&&dI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield CC(t,e,r,"current"===m)}return o}),bC.apply(this,arguments)}function CC(n,e,t,r){return TC.apply(this,arguments)}function TC(){return TC=(0,be.Z)(function*(n,e,t,r){n._a=(x,N,q)=>{return(ne=(0,be.Z)(function*(ye,$e,at,Kt){let Yt=$e.view.Wu(at);Yt.ii&&(Yt=yield Q_(ye.localStore,$e.query,!1).then(({documents:Qt})=>$e.view.Wu(Qt,Yt)));const Xt=Kt&&Kt.targetChanges.get($e.targetId),Bt=$e.view.applyChanges(Yt,ye.isPrimaryClient,Xt);return FC(ye,$e.targetId,Bt.Xu),Bt.snapshot}),function(ye,$e,at,Kt){return ne.apply(this,arguments)})(n,x,N,q);var ne};const o=yield Q_(n.localStore,e,!0),u=new GA(e,o._i),d=u.Wu(o.documents),m=Ll.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(d,n.isPrimaryClient,m);FC(n,t,E.Xu);const C=new rx(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),E.snapshot}),TC.apply(this,arguments)}function ax(n,e){return AC.apply(this,arguments)}function AC(){return AC=(0,be.Z)(function*(n,e){const t=et(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Fg(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),rv(t.remoteStore,r.targetId),cm(t,r.targetId)}).catch(Bd))):(cm(t,r.targetId),yield jd(t.localStore,r.targetId,!0))}),AC.apply(this,arguments)}function SC(){return SC=(0,be.Z)(function*(n,e,t){const r=ZC(n);try{const o=yield function(u,d){const m=et(u),E=Xn.now(),C=d.reduce((N,q)=>N.add(q.key),pn());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.fi.Ks(N,C).next(q=>{x=q;const ne=[];for(const ye of d){const $e=Cb(ye,x.get(ye.key));null!=$e&&ne.push(new kl(ye.key,$e,tw($e.value.mapValue),_r.exists(!0)))}return m.Bs.addMutationBatch(N,E,ne,d)})).then(N=>(N.applyToLocalDocumentSet(x),{batchId:N.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let E=u.ha[u.currentUser.toKey()];E||(E=new er(Ut)),E=E.insert(d,m),u.ha[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Zl(r,o.changes),yield sm(r.remoteStore)}catch(o){const u=am(o,"Failed to persist write");t.reject(u)}}),SC.apply(this,arguments)}function zA(n,e){return MC.apply(this,arguments)}function MC(){return MC=(0,be.Z)(function*(n,e){const t=et(n);try{const r=yield K_(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?wt(d.na):o.removedDocuments.size>0&&(wt(d.na),d.na=!1))}),yield Zl(t,r,e)}catch(r){yield Bd(r)}}),MC.apply(this,arguments)}function WA(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=et(u);m.onlineState=d;let E=!1;m.queries.forEach((C,x)=>{for(const N of x.listeners)N.Pu(d)&&(E=!0)}),E&&IC(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lx(n,e,t){return xC.apply(this,arguments)}function xC(){return xC=(0,be.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new er(Qe.comparator);d=d.insert(u,Dn.newNoDocument(u,_t.min()));const m=pn().add(u),E=new Rd(_t.min(),new Map,new kn(Ut),d,m);yield zA(r,E),r.ua=r.ua.remove(u),r.aa.delete(e),LC(r)}else yield jd(r.localStore,e,!1).then(()=>cm(r,e,t)).catch(Bd)}),xC.apply(this,arguments)}function cx(n,e){return RC.apply(this,arguments)}function RC(){return RC=(0,be.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const o=yield Qb(t.localStore,e);kC(t,r,null),PC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zl(t,o)}catch(o){yield Bd(o)}}),RC.apply(this,arguments)}function dx(n,e,t){return NC.apply(this,arguments)}function NC(){return NC=(0,be.Z)(function*(n,e,t){const r=et(n);try{const o=yield function(u,d){const m=et(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.Bs.lookupMutationBatch(E,d).next(x=>(wt(null!==x),C=x.keys(),m.Bs.removeMutationBatch(E,x))).next(()=>m.Bs.performConsistencyCheck(E)).next(()=>m.fi.Ks(E,C))})}(r.localStore,e);kC(r,e,t),PC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zl(r,o)}catch(o){yield Bd(o)}}),NC.apply(this,arguments)}function OC(){return OC=(0,be.Z)(function*(n,e){const t=et(n);$d(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=et(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=am(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),OC.apply(this,arguments)}function PC(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function kC(n,e,t){const r=et(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function cm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||qA(n,r)})}function qA(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(rv(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),LC(n))}function FC(n,e,t){for(const r of t)r instanceof $A?(n.ca.addReference(r.key,e),fx(n,r)):r instanceof HA?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||qA(n,r.key)):ot()}function fx(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oa.add(r),LC(n))}function LC(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Qe(en.fromString(e)),r=n.fa.next();n.aa.set(r,new ix(t)),n.ua=n.ua.insert(t,r),dI(n.remoteStore,new Pu(po(fo(t.path)),r,2,ps.A))}}function Zl(n,e,t){return VC.apply(this,arguments)}function VC(){return VC=(0,be.Z)(function*(n,e,t){const r=et(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,E)=>{d.push(r._a(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=G_.Ys(E.targetId,C);u.push(x)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,be.Z)(function*(E,C){const x=et(E);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>pe.forEach(C,q=>pe.forEach(q.Hs,ne=>x.persistence.referenceDelegate.addReference(N,q.targetId,ne)).next(()=>pe.forEach(q.Js,ne=>x.persistence.referenceDelegate.removeReference(N,q.targetId,ne)))))}catch(N){if(!Fd(N))throw N;Ve("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const q=N.targetId;if(!N.fromCache){const ne=x.ui.get(q),$e=ne.withLastLimboFreeSnapshotVersion(ne.snapshotVersion);x.ui=x.ui.insert(q,$e)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),VC.apply(this,arguments)}function px(n,e){return UC.apply(this,arguments)}function UC(){return UC=(0,be.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield W_(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new Pe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zl(t,r.di)}var o}),UC.apply(this,arguments)}function gx(n,e){const t=et(n),r=t.aa.get(e);if(r&&r.na)return pn().add(r.key);{let o=pn();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function mx(n,e){return BC.apply(this,arguments)}function BC(){return BC=(0,be.Z)(function*(n,e){const t=et(n),r=yield Q_(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&FC(t,e.targetId,o.Xu),o}),BC.apply(this,arguments)}function yx(n,e){return jC.apply(this,arguments)}function jC(){return jC=(0,be.Z)(function*(n,e){const t=et(n);return oI(t.localStore,e).then(r=>Zl(t,r))}),jC.apply(this,arguments)}function _x(n,e,t,r){return $C.apply(this,arguments)}function $C(){return $C=(0,be.Z)(function*(n,e,t,r){const o=et(n),u=yield function(d,m){const E=et(d),C=et(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.fn(x,m).next(N=>N?E.fi.Ks(x,N):pe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield sm(o.remoteStore):"acknowledged"===t||"rejected"===t?(kC(o,e,r||null),PC(o,e),m=e,et(et(o.localStore).Bs)._n(m)):ot(),yield Zl(o,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),$C.apply(this,arguments)}function HC(){return HC=(0,be.Z)(function*(n,e){const t=et(n);if(qC(t),ZC(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield ZA(t,r.toArray());t.da=!0,yield gC(t.remoteStore,!0);for(const u of o)dI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(cm(t,d),jd(t.localStore,d,!0))),rv(t.remoteStore,d)}),yield o,yield ZA(t,r),function(u){const d=et(u);d.aa.forEach((m,E)=>{rv(d.remoteStore,E)}),d.ca.Si(),d.aa=new Map,d.ua=new er(Qe.comparator)}(t),t.da=!1,yield gC(t.remoteStore,!1)}}),HC.apply(this,arguments)}function ZA(n,e,t){return GC.apply(this,arguments)}function GC(){return GC=(0,be.Z)(function*(n,e,t){const r=et(n),o=[],u=[];for(const d of e){let m;const E=r.ra.get(d);if(E&&0!==E.length){m=yield Vu(r.localStore,po(E[0]));for(const C of E){const x=r.ia.get(C),N=yield mx(r,x);N.snapshot&&u.push(N.snapshot)}}else{const C=yield Xb(r.localStore,d);m=yield Vu(r.localStore,C),yield CC(r,KA(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),GC.apply(this,arguments)}function KA(n){return dw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ex(n){const e=et(n);return et(et(e.localStore).persistence).Fs()}function wx(n,e,t,r){return zC.apply(this,arguments)}function zC(){return zC=(0,be.Z)(function*(n,e,t,r){const o=et(n);if(o.da)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield oI(o.localStore,pw(u[0])),m=Rd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Zl(o,d,m);break}case"rejected":yield jd(o.localStore,e,!0),cm(o,e,r);break;default:ot()}}),zC.apply(this,arguments)}function Ix(n,e,t){return WC.apply(this,arguments)}function WC(){return WC=(0,be.Z)(function*(n,e,t){const r=qC(n);if(r.da){for(const o of e){if(r.ra.has(o)){Ve("SyncEngine","Adding an already active target "+o);continue}const u=yield Xb(r.localStore,o),d=yield Vu(r.localStore,u);yield CC(r,KA(u),d.targetId,!1),dI(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield jd(r.localStore,o,!1).then(()=>{rv(r.remoteStore,o),cm(r,o)}).catch(Bd))}}),WC.apply(this,arguments)}function qC(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lx.bind(null,e),e.sa.zo=XM.bind(null,e.eventManager),e.sa.wa=ex.bind(null,e.eventManager),e}function ZC(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dx.bind(null,e),e}class YA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.M=li(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return z_(this.persistence,new rI,e.initialUser,this.M)}ya(e){return new a(c.Yi,this.M)}ga(e){return new Ie}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QA extends YA{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield ZC(r.Ta.syncEngine),yield sm(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return z_(this.persistence,new rI,e.initialUser,this.M)}pa(e){return new qb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=H_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xi.withCacheSize(this.cacheSizeBytes):xi.DEFAULT;return new nI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Gt(),rn(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Ie}}class bx extends QA{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof Q&&(r.sharedClientState.syncEngine={$r:_x.bind(null,o),Br:wx.bind(null,o),Lr:Ix.bind(null,o),Fs:Ex.bind(null,o),Fr:yx.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,be.Z)(function*(d){yield function vx(n,e){return HC.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=Gt();if(!Q.vt(t))throw new Pe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=H_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Q(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class KC{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>WA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=px.bind(null,r.syncEngine),yield gC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new JM}createDatastore(e){const t=li(e.databaseInfo.databaseId),r=new yt(e.databaseInfo);return new ev(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>WA(this.syncEngine,m,0),d=Ye.vt()?new Ye:new Be,new nv(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,E,C){const x=new sx(r,o,u,d,m,E);return C&&(x.da=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=et(t);Ve("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Uu(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function JA(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Cx{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Jn,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,be.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new tx(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,be.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Tx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,be.Z)(function*(u,d){const m=et(u),E=_f(m.M)+"/documents",C={documents:d.map(ne=>yf(m.M,ne))},x=yield m._o("BatchGetDocuments",E,C),N=new Map;x.forEach(ne=>{const ye=function Sw(n,e){return"found"in e?function(t,r){wt(!!r.found);const o=Bs(t,r.found.name),u=zr(r.found.updateTime),d=new yi({mapValue:{fields:r.found.fields}});return Dn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const o=Bs(t,r.missing),u=zr(r.readTime);return Dn.newNoDocument(o,u)}(n,e):ot()}(m.M,ne);N.set(ye.key.toString(),ye)});const q=[];return d.forEach(ne=>{const ye=N.get(ne.toString());wt(!!ye),q.push(ye)}),q}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Qe.fromPath(o);e.mutations.push(new p_(u,e.precondition(u)))}),yield(r=(0,be.Z)(function*(o,u){const d=et(o),m=_f(d.M)+"/documents",E={writes:u.map(C=>Ul(d.M,C))};yield d.co("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_r.updateTime(t):_r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Pe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(t)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ax{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new Pa(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,be.Z)(function*(){const t=new Tx(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!rf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!g_(t)}return!1}}class Sx{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Hr.UNAUTHENTICATED,this.clientId=ab.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,be.Z)(function*(m){Ve("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=am(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function XA(n,e){return YC.apply(this,arguments)}function YC(){return YC=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,be.Z)(function*(u){r.isEqual(u)||(yield W_(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),YC.apply(this,arguments)}function eS(n,e){return QC.apply(this,arguments)}function QC(){return QC=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JC(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>VA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>VA(e.remoteStore,u)),n.onlineComponents=e}),QC.apply(this,arguments)}function JC(n){return XC.apply(this,arguments)}function XC(){return XC=(0,be.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield XA(n,new YA)),n.offlineComponents}),XC.apply(this,arguments)}function pI(n){return eT.apply(this,arguments)}function eT(){return eT=(0,be.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield eS(n,new KC)),n.onlineComponents}),eT.apply(this,arguments)}function tS(n){return JC(n).then(e=>e.persistence)}function tT(n){return JC(n).then(e=>e.localStore)}function nS(n){return pI(n).then(e=>e.remoteStore)}function nT(n){return pI(n).then(e=>e.syncEngine)}function dm(n){return rT.apply(this,arguments)}function rT(){return rT=(0,be.Z)(function*(n){const e=yield pI(n),t=e.eventManager;return t.onListen=ox.bind(null,e.syncEngine),t.onUnlisten=ax.bind(null,e.syncEngine),t}),rT.apply(this,arguments)}function rS(n,e,t={}){const r=new Jn;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(o,u,d,m,E){const C=new fI({next:N=>{u.enqueueAndForget(()=>EC(o,x));const q=N.docs.has(d);!q&&N.fromCache?E.reject(new Pe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&N.fromCache&&m&&"server"===m.source?E.reject(new Pe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(N)},error:N=>E.reject(N)}),x=new DC(fo(d.path),C,{includeMetadataChanges:!0,ku:!0});return _C(o,x)}(yield dm(n),n.asyncQueue,e,t,r)})),r.promise}function iS(n,e,t={}){const r=new Jn;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(o,u,d,m,E){const C=new fI({next:N=>{u.enqueueAndForget(()=>EC(o,x)),N.fromCache&&"server"===m.source?E.reject(new Pe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(N)},error:N=>E.reject(N)}),x=new DC(d,C,{includeMetadataChanges:!0,ku:!0});return _C(o,x)}(yield dm(n),n.asyncQueue,e,t,r)})),r.promise}const sS=new Map;function iT(n,e,t){if(!t)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oS(n,e,t,r){if(!0===e&&!0===r)throw new Pe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aS(n){if(!Qe.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uS(n){if(Qe.isDocumentKey(n))throw new Pe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gI(n);throw new Pe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function lS(n,e){if(e<=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class cS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,oS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cS({}),this._settingsFrozen=!1,e instanceof Wo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new tb;switch(t.type){case"gapi":const r=t.client;return wt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ZE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sS.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),sS.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class Bu extends Qi{constructor(e,t,r){super(e,t,fo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Qe(e))}withConverter(e){return new Bu(this.firestore,e,this._path)}}function dS(n,e,...t){if(n=(0,Ht.m9)(n),iT("collection","path",e),n instanceof iv){const r=en.fromString(e,...t);return uS(r),new Bu(n,null,r)}{if(!(n instanceof qn||n instanceof Bu))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return uS(r),new Bu(n.firestore,null,r)}}function mI(n,e,...t){if(n=(0,Ht.m9)(n),1===arguments.length&&(e=ab.R()),iT("doc","path",e),n instanceof iv){const r=en.fromString(e,...t);return aS(r),new qn(n,null,new Qe(r))}{if(!(n instanceof qn||n instanceof Bu))throw new Pe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(en.fromString(e,...t));return aS(r),new qn(n.firestore,n instanceof Bu?n.converter:null,new Qe(r))}}function hS(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),(n instanceof qn||n instanceof Bu)&&(e instanceof qn||e instanceof Bu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function fS(n,e){return n=(0,Ht.m9)(n),e=(0,Ht.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&Fg(n._query,e._query)&&n.converter===e.converter}class Ux{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Pa(this,"async_queue_retry"),this.Qa=()=>{const t=rn();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=rn();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=rn();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Jn;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,be.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Fd(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Bn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=yC.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&ot()}verifyOperationInProgress(){}Ja(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function sT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Bx{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends iv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Ux,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||pS(this),this._firestoreClient.terminate()}}function $x(n=(0,gu.getApp)()){return(0,gu._getProvider)(n,"firestore").getImmediate()}function Wr(n){return n._firestoreClient||pS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function pS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hb(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Sx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gS(n,e,t){const r=new Jn;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield XA(n,t),yield eS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===de.FAILED_PRECONDITION||u.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function mS(n){if(n._initialized||n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ju{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ju(yr.fromBase64String(e))}catch(t){throw new Pe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ju(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Of{constructor(e){this._methodName=e}}class yI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}}const Qx=/^__.*__$/;class Jx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new kl(e,this.data,this.fieldMask,t,this.fieldTransforms):new hf(e,this.data,t,this.fieldTransforms)}}class yS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new kl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _S(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class _I{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new _I(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return wI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(_S(this.ec)&&Qx.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Xx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||li(e)}lc(e,t,r,o=!1){return new _I({ec:e,methodName:t,hc:r,path:Sr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Pf(n){const e=n._freezeSettings(),t=li(n._databaseId);return new Xx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vI(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);lT("Data must be an object, but it was:",d,r);const m=wS(r,d);let E,C;if(u.merge)E=new wd(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const N of u.mergeFields){const q=cT(e,N,t);if(!d.contains(q))throw new Pe(de.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);DS(x,q)||x.push(q)}E=new wd(x),C=d.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,C=d.fieldTransforms;return new Jx(new yi(m),E,C)}class sv extends Of{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sv}}function vS(n,e,t){return new _I({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class oT extends Of{_toFieldTransform(e){return new df(e.path,new Pl)}isEqual(e){return e instanceof oT}}class eR extends Of{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=vS(this,e,!0),r=this.fc.map(u=>kf(u,t)),o=new xu(r);return new df(e.path,o)}isEqual(e){return this===e}}class tR extends Of{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=vS(this,e,!0),r=this.fc.map(u=>kf(u,t)),o=new Ru(r);return new df(e.path,o)}isEqual(e){return this===e}}class nR extends Of{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Md(e.M,_w(e.M,this.dc));return new df(e.path,t)}isEqual(e){return this===e}}function aT(n,e,t,r){const o=n.lc(1,e,t);lT("Data must be an object, but it was:",o,r);const u=[],d=yi.empty();Al(r,(E,C)=>{const x=EI(e,E,t);C=(0,Ht.m9)(C);const N=o.oc(x);if(C instanceof sv)u.push(x);else{const q=kf(C,N);null!=q&&(u.push(x),d.set(x,q))}});const m=new wd(u);return new yS(d,m,o.fieldTransforms)}function uT(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[cT(e,r,t)],E=[o];if(u.length%2!=0)throw new Pe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<u.length;q+=2)m.push(cT(e,u[q])),E.push(u[q+1]);const C=[],x=yi.empty();for(let q=m.length-1;q>=0;--q)if(!DS(C,m[q])){const ne=m[q];let ye=E[q];ye=(0,Ht.m9)(ye);const $e=d.oc(ne);if(ye instanceof sv)C.push(ne);else{const at=kf(ye,$e);null!=at&&(C.push(ne),x.set(ne,at))}}const N=new wd(C);return new yS(x,N,d.fieldTransforms)}function ES(n,e,t,r=!1){return kf(t,n.lc(r?4:3,e))}function kf(n,e){if(IS(n=(0,Ht.m9)(n)))return lT("Unsupported field value:",e,n),wS(n,e);if(n instanceof Of)return function(t,r){if(!_S(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=kf(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Ht.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _w(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Xn.fromDate(t);return{timestampValue:Mr(r.M,o)}}if(t instanceof Xn){const o=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mr(r.M,o)}}if(t instanceof yI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ju)return{bytesValue:Vl(r.M,t._byteString)};if(t instanceof qn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Tw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${gI(t)}`)}(n,e)}function wS(n,e){const t={};return e_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Al(n,(r,o)=>{const u=kf(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function IS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof yI||n instanceof ju||n instanceof qn||n instanceof Of)}function lT(n,e,t){if(!IS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function cT(n,e,t){if((e=(0,Ht.m9)(e))instanceof Kl)return e._internalPath;if("string"==typeof e)return EI(n,e);throw wI("Field path arguments must be of type string or ",n,!1,void 0,t)}const rR=new RegExp("[~\\*/\\[\\]]");function EI(n,e,t){if(e.search(rR)>=0)throw wI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kl(...e.split("."))._internalPath}catch(r){throw wI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||d)&&(E+=" (found",u&&(E+=` in field ${r}`),d&&(E+=` in document ${o}`),E+=")"),new Pe(de.INVALID_ARGUMENT,m+n+E)}function DS(n,e){return n.some(t=>t.isEqual(e))}class ov{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new iR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(II("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class iR extends ov{data(){return super.data()}}function II(n,e){return"string"==typeof e?EI(n,e):e instanceof Kl?e._internalPath:e._delegate._internalPath}class Ff{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yl extends ov{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new av(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(II("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class av extends Yl{data(e={}){return super.data(e)}}class Gd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ff(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new av(this._firestore,this._userDataWriter,r.key,r,new Ff(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new av(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ff(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new av(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ff(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==d.type&&(E=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:sR(d.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function bS(n,e){return n instanceof Yl&&e instanceof Yl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Gd&&e instanceof Gd&&n._firestore===e._firestore&&fS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uv{}function zd(n,...e){for(const t of e)n=t._apply(n);return n}class oR extends uv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Pf(e.firestore),r=function(o,u,d,m,E,C,x){let N;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){RS(x,C);const ne=[];for(const ye of x)ne.push(xS(m,o,ye));N={arrayValue:{values:ne}}}else N=xS(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||RS(x,C),N=ES(d,"where",x,"in"===C||"not-in"===C);const q=si.create(E,C,N);return function(ne,ye){if(ye.S()){const at=fw(ne);if(null!==at&&!at.isEqual(ye.field))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${at.toString()}' and '${ye.field.toString()}'`);const Kt=Mu(ne);null!==Kt&&NS(0,ye.field,Kt)}const $e=function(at,Kt){for(const Yt of at.filters)if(Kt.indexOf(Yt.op)>=0)return Yt.op;return null}(ne,function(at){switch(at){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ye.op));if(null!==$e)throw new Pe(de.INVALID_ARGUMENT,$e===ye.op?`Invalid query. You cannot use more than one '${ye.op.toString()}' filter.`:`Invalid query. You cannot use '${ye.op.toString()}' filters with '${$e.toString()}' filters.`)}(o,q),q}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Qi(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Ra(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class uR extends uv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Td(o,u);return function(m,E){if(null===Mu(m)){const C=fw(m);null!==C&&NS(0,C,E.field)}}(r,d),d}(e._query,this._c,this.gc);return new Qi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ra(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class TS extends uv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Qi(e.firestore,e.converter,u_(e._query,this.yc,this.Ic))}}class AS extends uv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=MS(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new Ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class SS extends uv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=MS(e,this.type,this.Tc,this.Ec);return new Qi(e.firestore,e.converter,(o=t,new Ra((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function MS(n,e,t,r){if(t[0]=(0,Ht.m9)(t[0]),t[0]instanceof ov)return function(o,u,d,m,E){if(!m)throw new Pe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of Ad(o))if(x.field.isKeyField())C.push(Nl(u,m.key));else{const N=m.data.field(x.field);if(Tg(N))throw new Pe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const q=x.field.canonicalString();throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}C.push(N)}return new Su(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Pf(n.firestore);return function(u,d,m,E,C,x){const N=u.explicitOrderBy;if(C.length>N.length)throw new Pe(de.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let ne=0;ne<C.length;ne++){const ye=C[ne];if(N[ne].field.isKeyField()){if("string"!=typeof ye)throw new Pe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ye}`);if(!kg(u)&&-1!==ye.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ye}' contains a slash.`);const $e=u.path.child(en.fromString(ye));if(!Qe.isDocumentKey($e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${$e}' is not because it contains an odd number of segments.`);const at=new Qe($e);q.push(Nl(d,at))}else{const $e=ES(m,E,ye);q.push($e)}}return new Su(q,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function xS(n,e,t){if("string"==typeof(t=(0,Ht.m9)(t))){if(""===t)throw new Pe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kg(e)&&-1!==t.indexOf("/"))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(en.fromString(t));if(!Qe.isDocumentKey(r))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nl(n,new Qe(r))}if(t instanceof qn)return Nl(n,t._key);throw new Pe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gI(t)}.`)}function RS(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function NS(n,e,t){if(!t.isEqual(e))throw new Pe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const mR={maxAttempts:5};class dT{convertValue(e,t="none"){switch(xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return Al(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new yI(In(e.latitude),In(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=YE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Id(e));default:return null}}convertTimestamp(e){const t=Tu(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=en.fromString(e);wt(Fw(r));const o=new Wo(r.get(1),r.get(3)),u=new Qe(r.popFirst(5));return o.isEqual(t)||Bn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function DI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yR extends dT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class OS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pf(e)}set(e,t,r){this._verifyNotCommitted();const o=Wd(e,this._firestore),u=DI(o.converter,t,r),d=vI(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,_r.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Wd(e,this._firestore);let d;return d="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Kl?uT(this._dataReader,"WriteBatch.update",u._key,t,r,o):aT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wd(e,this._firestore);return this._mutations=this._mutations.concat(new gf(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wd(n,e){if((n=(0,Ht.m9)(n)).firestore!==e)throw new Pe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Lf extends dT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ju(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function PS(n,e,t){n=sn(n,qn);const r=sn(n.firestore,tr),o=DI(n.converter,e,t);return hm(r,[vI(Pf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,_r.none())])}function kS(n,e,t,...r){n=sn(n,qn);const o=sn(n.firestore,tr),u=Pf(o);let d;return d="string"==typeof(e=(0,Ht.m9)(e))||e instanceof Kl?uT(u,"updateDoc",n._key,e,t,r):aT(u,"updateDoc",n._key,e),hm(o,[d.toMutation(n._key,_r.exists(!0))])}function FS(n,...e){var t,r,o;n=(0,Ht.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||sT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(sT(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let E,C,x;if(n instanceof qn)C=sn(n.firestore,tr),x=fo(n._key.path),E={next:N=>{e[d]&&e[d](hT(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=sn(n,Qi);C=sn(N.firestore,tr),x=N._query;const q=new Lf(C);E={next:ne=>{e[d]&&e[d](new Gd(C,q,N,ne))},error:e[d+1],complete:e[d+2]},CS(n._query)}return function(N,q,ne,ye){const $e=new fI(ye),at=new DC(q,$e,ne);return N.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return _C(yield dm(N),at)})),()=>{$e.Aa(),N.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return EC(yield dm(N),at)}))}}(Wr(C),x,m,E)}function hm(n,e){return function(t,r){const o=new Jn;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function ux(n,e,t){return SC.apply(this,arguments)}(yield nT(t),r,o)})),o.promise}(Wr(n),e)}function hT(n,e,t){const r=t.docs.get(e._key),o=new Lf(n);return new Yl(n,o,e._key,r,new Ff(t.hasPendingWrites,t.fromCache),e.converter)}class AR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pf(e)}get(e){const t=Wd(e,this._firestore),r=new yR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ot();const u=o[0];if(u.isFoundDocument())return new ov(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new ov(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const o=Wd(e,this._firestore),u=DI(o.converter,t,r),d=vI(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Wd(e,this._firestore);let d;return d="string"==typeof(t=(0,Ht.m9)(t))||t instanceof Kl?uT(this._dataReader,"Transaction.update",u._key,t,r,o):aT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Wd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wd(e,this._firestore),r=new Lf(this._firestore);return super.get(e).then(o=>new Yl(this._firestore,r,t._key,o._document,new Ff(!1,!1),t.converter))}}function fT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function VS(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function US(){if(!function cb(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Tl=gu.SDK_VERSION,(0,gu._registerComponent)(new Ph.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new tr(o,new rb(t.getProvider("auth-internal")),new ib(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,gu.registerVersion)(Yy,"3.4.9",n),(0,gu.registerVersion)(Yy,"3.4.9","esm2017")}();class lv{constructor(e){this._delegate=e}static fromBase64String(e){return US(),new lv(ju.fromBase64String(e))}static fromUint8Array(e){return VS(),new lv(ju.fromUint8Array(e))}toBase64(){return US(),this._delegate.toBase64()}toUint8Array(){return VS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pT(n){return function FR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class LR{enableIndexedDbPersistence(e,t){return function Hx(n,e){mS(n=sn(n,tr));const t=Wr(n),r=n._freezeSettings(),o=new KC;return gS(t,o,new QA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Gx(n){mS(n=sn(n,tr));const e=Wr(n),t=n._freezeSettings(),r=new KC;return gS(e,r,new bx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function zx(n){if(n._initialized&&!n._terminated)throw new Pe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!js.vt())return Promise.resolve();const o=r+"main";yield js.delete(o)}),function(r){return t.apply(this,arguments)})(H_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class BS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Lx(n,e,t,r={}){var o;const u=(n=sn(n,iv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&tf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=Hr.MOCK_USER;else{d=(0,Ht.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Pe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Hr(E)}n._authCredentials=new nb(new Ed(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function qx(n){return function Mx(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield tS(n),t=yield nS(n);return e.setNetworkEnabled(!0),function(r){const o=et(r);return o.wu.delete(0),ql(o)}(t)}))}(Wr(n=sn(n,tr)))}(this._delegate)}disableNetwork(){return function Zx(n){return function xx(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield tS(n),t=yield nS(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(o){const u=et(o);u.wu.add(0),yield Uu(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Wr(n=sn(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,oS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Wx(n){return function(e){const t=new Jn;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function hx(n,e){return OC.apply(this,arguments)}(yield nT(e),t)})),t.promise}(Wr(n=sn(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function TR(n,e){return function Ox(n,e){const t=new fI(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield dm(n),o=t,et(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield dm(n),o=t,void et(r).bu.delete(o);var r,o}))}}(Wr(n=sn(n,tr)),sT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fm(this,dS(this._delegate,e))}catch(t){throw gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ko(this,mI(this._delegate,e))}catch(t){throw gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ms(this,function Vx(n,e){if(n=sn(n,iv),iT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new Ra(en.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function SR(n,e,t){n=sn(n,tr);const r=Object.assign(Object.assign({},mR),t);return function(o){if(o.maxAttempts<1)throw new Pe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function Px(n,e,t){const r=new Jn;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const o=yield(u=n,pI(u).then(d=>d.datastore));var u;new Ax(n.asyncQueue,o,t,e,r).run()})),r.promise}(Wr(n),o=>e(new AR(n,o)),r)}(this._delegate,t=>e(new jS(this,t)))}batch(){return Wr(this._delegate),new $S(new OS(this._delegate,e=>hm(this._delegate,e)))}loadBundle(e){return function Kx(n,e){const t=Wr(n=sn(n,tr)),r=new Bx;return function kx(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return JA(E,C);if(E instanceof ArrayBuffer)return JA(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Cx(E,d);var E}(t,li(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function Dx(n,e,t){const r=et(n);var o;(o=(0,be.Z)(function*(u,d,m){try{const E=yield d.getMetadata();if(yield function(q,ne){const ye=et(q),$e=zr(ne.createTime);return ye.persistence.runTransaction("hasNewerBundle","readonly",at=>ye._s.getBundleMetadata(at,ne.id)).then(at=>!!at&&at.createTime.compareTo($e)>=0)}(u.localStore,E))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(q=E).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);m._updateProgress(jA(E));const C=new nx(E,u.localStore,d.M);let x=yield d.ma();for(;x;){const q=yield C.Fu(x);q&&m._updateProgress(q),x=yield d.ma()}const N=yield C.complete();return yield Zl(u,N.Lu,void 0),yield function(q,ne){const ye=et(q);return ye.persistence.runTransaction("Save bundle","readwrite",$e=>ye._s.saveBundleMetadata($e,ne))}(u.localStore,E),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(E){return tf("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var q}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield nT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Yx(n,e){return function Fx(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const o=et(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield tT(n),e)}))}(Wr(n=sn(n,tr)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ms(this,t):null)}}class bI extends dT{constructor(e){super(),this.firestore=e}convertBytes(e){return new lv(new ju(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ko.forKey(t,this.firestore,null)}}class jS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bI(e)}get(e){const t=Uf(e);return this._delegate.get(t).then(r=>new cv(this._firestore,new Yl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Uf(e);return r?(fT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Uf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Uf(e);return this._delegate.delete(t),this}}class $S{constructor(e){this._delegate=e}set(e,t,r){const o=Uf(e);return r?(fT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Uf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Uf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new av(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Vf(e,new bI(e),t),o.set(t,u)),u}}Vf.INSTANCES=new WeakMap;class Ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ko(t,new qn(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new Ko(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fm(this.firestore,dS(this._delegate,e))}catch(t){throw gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.m9)(e))instanceof qn&&hS(this._delegate,e)}set(e,t){t=fT("DocumentReference.set",t);try{return t?PS(this._delegate,e,t):PS(this._delegate,e)}catch(r){throw gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kS(this._delegate,e):kS(this._delegate,e,t,...r)}catch(o){throw gs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function bR(n){return hm(sn(n.firestore,tr),[new gf(n._key,_r.none())])}(this._delegate)}onSnapshot(...e){const t=HS(e),r=GS(e,o=>new cv(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return FS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function vR(n){n=sn(n,qn);const e=sn(n.firestore,tr),t=Wr(e),r=new Lf(e);return function Rx(n,e){const t=new Jn;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(o,u,d){try{const m=yield function(E,C){const x=et(E);return x.persistence.runTransaction("read document","readonly",N=>x.fi.Ls(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Pe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=am(m,`Failed to get document '${u} from cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield tT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Yl(e,r,n._key,o,new Ff(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ER(n){n=sn(n,qn);const e=sn(n.firestore,tr);return rS(Wr(e),n._key,{source:"server"}).then(t=>hT(e,n,t))}(this._delegate):function _R(n){n=sn(n,qn);const e=sn(n.firestore,tr);return rS(Wr(e),n._key).then(t=>hT(e,n,t))}(this._delegate),t.then(r=>new cv(this.firestore,new Yl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ko(this.firestore,this._delegate.withConverter(e?Vf.getInstance(this.firestore,e):null))}}function gs(n,e,t){return n.message=n.message.replace(e,t),n}function HS(n){for(const e of n)if("object"==typeof e&&!pT(e))return e;return{}}function GS(n,e){var t,r;let o;return o=pT(n[0])?n[0]:pT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class cv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ko(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bS(this._delegate,e._delegate)}}class dv extends cv{data(e){const t=this._delegate.data(e);return function WE(n,e){n||ot()}(void 0!==t),t}}class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bI(e)}where(e,t,r){try{return new ms(this.firestore,zd(this._delegate,function aR(n,e,t){const r=e,o=II("where",n);return new oR(o,r,t)}(e,t,r)))}catch(o){throw gs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ms(this.firestore,zd(this._delegate,function lR(n,e="asc"){const t=e,r=II("orderBy",n);return new uR(r,t)}(e,t)))}catch(r){throw gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ms(this.firestore,zd(this._delegate,function cR(n){return lS("limit",n),new TS("limit",n,"F")}(e)))}catch(t){throw gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ms(this.firestore,zd(this._delegate,function dR(n){return lS("limitToLast",n),new TS("limitToLast",n,"L")}(e)))}catch(t){throw gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ms(this.firestore,zd(this._delegate,function hR(...n){return new AS("startAt",n,!0)}(...e)))}catch(t){throw gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ms(this.firestore,zd(this._delegate,function fR(...n){return new AS("startAfter",n,!1)}(...e)))}catch(t){throw gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ms(this.firestore,zd(this._delegate,function pR(...n){return new SS("endBefore",n,!1)}(...e)))}catch(t){throw gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ms(this.firestore,zd(this._delegate,function gR(...n){return new SS("endAt",n,!0)}(...e)))}catch(t){throw gs(t,"endAt()","Query.endAt()")}}isEqual(e){return fS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function IR(n){n=sn(n,Qi);const e=sn(n.firestore,tr),t=Wr(e),r=new Lf(e);return function Nx(n,e){const t=new Jn;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(o,u,d){try{const m=yield Q_(o,u,!0),E=new GA(u,m._i),C=E.Wu(m.documents),x=E.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const E=am(m,`Failed to execute query '${u} against cache`);d.reject(E)}}),function(o,u,d){return r.apply(this,arguments)})(yield tT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Gd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function DR(n){n=sn(n,Qi);const e=sn(n.firestore,tr),t=Wr(e),r=new Lf(e);return iS(t,n._query,{source:"server"}).then(o=>new Gd(e,r,n,o))}(this._delegate):function wR(n){n=sn(n,Qi);const e=sn(n.firestore,tr),t=Wr(e),r=new Lf(e);return CS(n._query),iS(t,n._query).then(o=>new Gd(e,r,n,o))}(this._delegate),t.then(r=>new gT(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=HS(e),r=GS(e,o=>new gT(this.firestore,new Gd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return FS(this._delegate,t,r)}withConverter(e){return new ms(this.firestore,this._delegate.withConverter(e?Vf.getInstance(this.firestore,e):null))}}class UR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new dv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new UR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new dv(this._firestore,r))})}isEqual(e){return bS(this._delegate,e._delegate)}}class fm extends ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ko(this.firestore,e):null}doc(e){try{return new Ko(this.firestore,void 0===e?mI(this._delegate):mI(this._delegate,e))}catch(t){throw gs(t,"doc()","CollectionReference.doc()")}}add(e){return function CR(n,e){const t=sn(n.firestore,tr),r=mI(n),o=DI(n.converter,e);return hm(t,[vI(Pf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ko(this.firestore,t))}isEqual(e){return hS(this._delegate,e._delegate)}withConverter(e){return new fm(this.firestore,this._delegate.withConverter(e?Vf.getInstance(this.firestore,e):null))}}function Uf(n){return sn(n,qn)}class mT{constructor(...e){this._delegate=new Kl(...e)}static documentId(){return new mT(Sr.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.m9)(e))instanceof Kl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xR(){return new oT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bf(e)}static delete(){const e=function MR(){return new sv("deleteField")}();return e._methodName="FieldValue.delete",new Bf(e)}static arrayUnion(...e){const t=function RR(...n){return new eR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Bf(t)}static arrayRemove(...e){const t=function NR(...n){return new tR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Bf(t)}static increment(e){const t=function OR(n){return new nR("increment",n)}(e);return t._methodName="FieldValue.increment",new Bf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const BR={Firestore:BS,GeoPoint:yI,Timestamp:Xn,Blob:lv,Transaction:jS,WriteBatch:$S,DocumentReference:Ko,DocumentSnapshot:cv,Query:ms,QueryDocumentSnapshot:dv,QuerySnapshot:gT,CollectionReference:fm,FieldPath:mT,FieldValue:Bf,setLogLevel:function VR(n){!function eb(n){Ta.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function $R(n){(function jR(n,e){n.INTERNAL.registerComponent(new Ph.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},BR)))})(n,(e,t)=>new BS(e,t,new LR)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(K0.Z);var HR=O(6451),CI=O(5363),GR=O(6063);class zR extends Ui.x{constructor(e=1/0,t=1/0,r=GR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=d;E+=2)m=E;m&&r.splice(0,m+1)}}}var WR=O(3099);function zS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,WR.B)({connector:()=>new zR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function WS(n,e){return(0,cs.m)(e)?pr(()=>n,e):pr(()=>n)}var yT=O(9468),jf=O(5867);class pm{constructor(e){return e}}class qS{constructor(){return(0,jf.C6)()}}const _T=new f.OlP("angularfire2._apps"),ZR={provide:pm,useFactory:function qR(n){return n&&1===n.length?n[0]:new pm((0,jf.Mq)())},deps:[[new f.FiY,_T]]},KR={provide:qS,deps:[[new f.FiY,_T]]};function YR(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new pm(r)}}let QR=(()=>{class n{constructor(t){(0,jf.KN)("angularfire",En.q4.full,"core"),(0,jf.KN)("angularfire",En.q4.full,"app"),(0,jf.KN)("angular",f.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.Lbi))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ZR,KR]}),n})();function JR(n,...e){return{ngModule:QR,providers:[{provide:_T,useFactory:YR(n),multi:!0,deps:[f.R0b,f.zs3,En.HU,...e]}]}}const XR=(0,En.u3)(jf.ZF,!0),ZS=new Map,eN={activated:!1,tokenObservers:[]},tN={initialized:!1,enabled:!1};function vi(n){return ZS.get(n)||eN}function ka(n,e){ZS.set(n,e)}function TI(){return tN}class oN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new Ht.BH,yield function aN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Ht.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ys=new Ht.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function YS(n){if(!vi(n).activated)throw ys.create("use-before-activation",{appName:n.name})}function wT(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw ys.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw ys.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw ys.create("fetch-parse-error",{originalErrorMessage:N.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}}),IT.apply(this,arguments)}function hN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const hv="firebase-app-check-store";let MI=null;function JS(){return MI||(MI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ys.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(hv,{keyPath:"compositeKey"})}}catch(t){e(ys.create("storage-open",{originalErrorMessage:t.message}))}}),MI)}function DT(){return DT=(0,be.Z)(function*(n,e){const r=(yield JS()).transaction(hv,"readwrite"),u=r.objectStore(hv).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=E=>{d()},r.onerror=E=>{var C;m(ys.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})}),DT.apply(this,arguments)}const fv=new mu.Yd("@firebase/app-check");function nM(n,e){return(0,Ht.hl)()?function mN(n,e){return function XS(n,e){return DT.apply(this,arguments)}(function tM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{fv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rM(){return TI().enabled}function iM(){return AT.apply(this,arguments)}function AT(){return AT=(0,be.Z)(function*(){const n=TI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),AT.apply(this,arguments)}const IN={error:"UNKNOWN_ERROR"};function DN(n){return Ht.US.encodeString(JSON.stringify(n),!1)}function xI(n){return ST.apply(this,arguments)}function ST(){return ST=(0,be.Z)(function*(n,e=!1){const t=n.app;YS(t);const r=vi(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&RI(E)&&(o=E)}if(!e&&o&&RI(o))return{token:o.token};let m,d=!1;if(rM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wT(hN(t,yield iM()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const E=yield r.exchangeTokenPromise;return yield nM(t,E),ka(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),d=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?fv.warn(E.message):fv.error(E),u=E}return o?(m={token:o.token},ka(t,Object.assign(Object.assign({},r),{token:o})),yield nM(t,o)):m=CN(u),d&&oM(t,m),m}),ST.apply(this,arguments)}function xT(n,e){const t=vi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ka(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function sM(n){const{app:e}=n,t=vi(e);let r=t.tokenRefresher;r||(r=function bN(n){const{app:e}=n;return new oN((0,be.Z)(function*(){let r;if(r=vi(e).token?yield xI(n,!0):yield xI(n),r.error)throw r.error}),()=>!0,()=>{const t=vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ka(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function oM(n,e){const t=vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function RI(n){return n.expireTimeMillis-Date.now()>0}function CN(n){return{token:DN(IN),error:n}}class TN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=vi(this.app);for(const t of e)xT(this.app,t.next);return Promise.resolve()}}const pM="app-check-internal";!function BN(){(0,gu._registerComponent)(new Ph.wA("app-check",n=>function AN(n,e){return new TN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pM).initialize()})),(0,gu._registerComponent)(new Ph.wA(pM,n=>function SN(n){return{getToken:e=>xI(n,e),addTokenListener:e=>function MT(n,e,t,r){const{app:o}=n,u=vi(o),d={next:t,error:r,type:e};if(ka(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&RI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),sM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>sM(n))}(n,"INTERNAL",e),removeTokenListener:e=>xT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gu.registerVersion)("@firebase/app-check","0.5.8")}();class OI{constructor(){return(0,En.vb)("app-check")}}"undefined"!=typeof window&&window,O(127);const mM=new f.OlP("angularfire2.auth.use-emulator"),yM=new f.OlP("angularfire2.auth.settings"),_M=new f.OlP("angularfire2.auth.tenant-id"),vM=new f.OlP("angularfire2.auth.langugage-code"),EM=new f.OlP("angularfire2.auth.use-device-language"),wM=new f.OlP("angularfire.auth.persistence"),IM=(n,e,t,r,o,u,d,m)=>(0,ao.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))E.settings[C]=x;return m&&E.setPersistence(m),E},[t,r,o,u,d,m]);let DM=(()=>{class n{constructor(t,r,o,u,d,m,E,C,x,N,q,ne){const ye=new Ui.x,$e=lt(void 0).pipe((0,CI.Q)(d.outsideAngular),pr(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,It.U)(()=>(0,ao.on)(t,u,r)),(0,It.U)(at=>IM(at,u,m,C,x,N,E,q)),zS({bufferSize:1,refCount:!1}));if(Dr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lt(null);else{$e.pipe(ko()).subscribe();const Kt=$e.pipe(pr(Bt=>Bt.getRedirectResult().then(Qt=>Qt,()=>null)),En.iC,zS({bufferSize:1,refCount:!1})),Yt=$e.pipe(pr(Bt=>new Di.y(Qt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onAuthStateChanged(yn=>Qt.next(yn),yn=>Qt.error(yn),()=>Qt.complete()))})))),Xt=$e.pipe(pr(Bt=>new Di.y(Qt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onIdTokenChanged(yn=>Qt.next(yn),yn=>Qt.error(yn),()=>Qt.complete()))}))));this.authState=Kt.pipe(WS(Yt),(0,yT.R)(d.outsideAngular),(0,CI.Q)(d.insideAngular)),this.user=Kt.pipe(WS(Xt),(0,yT.R)(d.outsideAngular),(0,CI.Q)(d.insideAngular)),this.idToken=this.user.pipe(pr(Bt=>Bt?(0,bn.D)(Bt.getIdToken()):lt(null))),this.idTokenResult=this.user.pipe(pr(Bt=>Bt?(0,bn.D)(Bt.getIdTokenResult()):lt(null))),this.credential=(0,HR.T)(Kt,ye,this.authState.pipe(Wn(Bt=>!Bt))).pipe((0,It.U)(Bt=>(null==Bt?void 0:Bt.user)?Bt:null),(0,yT.R)(d.outsideAngular),(0,CI.Q)(d.insideAngular))}return(0,ao.pX)(this,$e,u,{spy:{apply:(at,Kt,Yt)=>{(at.startsWith("signIn")||at.startsWith("createUser"))&&Yt.then(Xt=>ye.next(Xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ao.Dh),f.LFG(ao.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(En.HU),f.LFG(mM,8),f.LFG(yM,8),f.LFG(_M,8),f.LFG(vM,8),f.LFG(EM,8),f.LFG(wM,8),f.LFG(OI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function bM(n,e){return function WN(n,e=Z0.z){return new Di.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function kT(n,e){return bM(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function PI(n,e){return kT(n,e).pipe(eo(void 0),zp(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const E=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(d.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function CM(n,e,t){return PI(n,t).pipe($i((r,o)=>function ZN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function KN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function CD(n,e=Ts.y){return n=null!=n?n:TD,(0,fr.e)((t,r)=>{let o,u=!0;t.subscribe((0,zn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function FT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function TM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class AM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(eo(void 0),zp(),Wn(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),En.iC)}auditTrail(e){return this.stateChanges(e).pipe($i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TM(e);return CM(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return kT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),En.iC)}get(e){return(0,bn.D)(this.query.get(e)).pipe(En.iC)}add(e){return this.ref.add(e)}doc(e){return new SM(this.ref.doc(e),this.afs)}}class SM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=MM(r,t);return new AM(o,u,this.afs)}snapshotChanges(){return function qN(n,e){return bM(n,e).pipe(eo(void 0),zp(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,bn.D)(this.ref.get(e)).pipe(En.iC)}}class YN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wn(t=>t.length>0),En.iC):PI(this.query,this.afs.schedulers.outsideAngular).pipe(En.iC)}auditTrail(e){return this.stateChanges(e).pipe($i((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=TM(e);return CM(this.query,t,this.afs.schedulers.outsideAngular).pipe(En.iC)}valueChanges(e={}){return kT(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),En.iC)}get(e){return(0,bn.D)(this.query.get(e)).pipe(En.iC)}}const QN=new f.OlP("angularfire2.enableFirestorePersistence"),JN=new f.OlP("angularfire2.firestore.persistenceSettings"),XN=new f.OlP("angularfire2.firestore.settings"),eO=new f.OlP("angularfire2.firestore.use-emulator");function MM(n,e=(t=>t)){return{query:e(n),ref:n}}let tO=(()=>{class n{constructor(t,r,o,u,d,m,E,C,x,N,q,ne,ye,$e,at,Kt,Yt){this.schedulers=E;const Xt=(0,ao.on)(t,m,r),Bt=x;N&&IM(Xt,m,q,ye,$e,at,ne,Kt),[this.firestore,this.persistenceEnabled$]=(0,ao.cc)(`${Xt.name}.firestore`,"AngularFirestore",Xt.name,()=>{const Qt=m.runOutsideAngular(()=>Xt.firestore());if(u&&Qt.settings(u),Bt&&Qt.useEmulator(...Bt),o&&!Dr(d)){const yn=()=>{try{return(0,bn.D)(Qt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Ji){return"undefined"!=typeof console&&console.warn(Ji),lt(!1)}};return[Qt,m.runOutsideAngular(yn)]}return[Qt,lt(!1)]},[u,Bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=MM(o,r),m=this.schedulers.ngZone.run(()=>u);return new AM(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new YN(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new SM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ao.Dh),f.LFG(ao.xv,8),f.LFG(QN,8),f.LFG(XN,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(En.HU),f.LFG(JN,8),f.LFG(eO,8),f.LFG(DM,8),f.LFG(mM,8),f.LFG(yM,8),f.LFG(_M,8),f.LFG(vM,8),f.LFG(EM,8),f.LFG(wM,8),f.LFG(OI,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xM=(()=>{class n{constructor(t){this.db=t}getRanking(){return new Promise(t=>{this.db.collection("ranking",r=>r.orderBy("position")).valueChanges({idField:"id"}).subscribe(r=>t(r))})}updateRanking(t,r){var o=this;return(0,be.Z)(function*(){const u=o.db.collection("ranking");let d=yield o.getRanking(),m=0;if(d.length<10){for(let E=0;E<d.length;E++)if(d[E].points<=r){m=E+1;break}for(let E=0;E<d.length;E++){let C="";if(d[E].position>=m){C=d[E].id;let x=d[E].position+=1;u.doc(C).update({position:x})}}u.add({position:m,name:t,points:r})}else{let C=(yield o.getLastPosition())[0].id;u.doc(C).delete(),o.updateRanking(t,r)}})()}getLastPosition(){return new Promise(t=>{this.db.collection("ranking",r=>r.where("position","==",10)).valueChanges({idField:"id"}).subscribe(r=>t(r))})}getQuestions(){return new Promise(t=>{this.db.collection("questions").valueChanges({idField:"id"}).subscribe(r=>t(r))})}checkAnswers(t,r){let o=[{points:0}];for(let u=0;u<t.length;u++)t[u].correct==r[u]?(o[0].points+=1,o.push({answer:"Acertou!!"})):o.push({answer:"Errou!!"});return o}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(tO))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"h1"),f._uU(2,"Bem vindo ao quiz da semana!"),f.qZA(),f.TgZ(3,"p"),f._uU(4," Visite esta p\xe1gina toda semana para responder as novas perguntas e concorra ao topo do ranking! "),f.qZA(),f.TgZ(5,"div",2),f._UZ(6,"input",3,4),f.TgZ(8,"label",5),f._uU(9,"Digite seu nome"),f.qZA()(),f.TgZ(10,"div",6)(11,"button",7),f.NdJ("click",function(){f.CHM(t);const o=f.MAs(7);return f.oxw().startQuiz(o.value)}),f._uU(12,"Iniciar!"),f.qZA()()()}}function rO(n,e){if(1&n&&(f.TgZ(0,"div")(1,"h3"),f._uU(2),f.qZA(),f.TgZ(3,"p"),f._UZ(4,"input",11),f._uU(5),f.qZA(),f.TgZ(6,"p"),f._UZ(7,"input",12),f._uU(8),f.qZA(),f.TgZ(9,"p"),f._UZ(10,"input",13),f._uU(11),f.qZA()()),2&n){const t=e.$implicit,r=e.index;f.xp6(2),f.AsE("",r," --\x3e ",t.enunciation,""),f.xp6(2),f.s9C("name",r),f.s9C("formControlName",r),f.xp6(1),f.hij(" ",t.answer1,""),f.xp6(2),f.s9C("name",r),f.s9C("formControlName",r),f.xp6(1),f.hij(" ",t.answer2,""),f.xp6(2),f.s9C("name",r),f.s9C("formControlName",r),f.xp6(1),f.hij(" ",t.answer3,"")}}function iO(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div")(1,"form",8),f.NdJ("ngSubmit",function(){return f.CHM(t),f.oxw().submit()}),f.YNc(2,rO,12,11,"div",9),f.TgZ(3,"div",6)(4,"button",10),f._uU(5,"Submit"),f.qZA()()()()}if(2&n){const t=f.oxw();f.xp6(1),f.Q6J("formGroup",t.form),f.xp6(1),f.Q6J("ngForOf",t.questions)}}function sO(n,e){if(1&n&&(f.TgZ(0,"tr")(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4," --\x3e "),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA()()),2&n){const t=e.$implicit,r=e.index;f.xp6(2),f.hij(" ",r," "),f.xp6(4),f.hij(" ",t.answer," ")}}function oO(n,e){if(1&n&&(f.TgZ(0,"div")(1,"p"),f._uU(2),f.qZA(),f.TgZ(3,"table",14)(4,"thead")(5,"tr")(6,"th",15),f._uU(7,"Corre\xe7\xe3o:"),f.qZA()()(),f.TgZ(8,"tbody"),f.YNc(9,sO,7,2,"tr",9),f.qZA()()()),2&n){const t=f.oxw();f.xp6(2),f.AsE("Parab\xe9ns ",t.name,", voc\xea fez ",t.points," pontos!"),f.xp6(7),f.Q6J("ngForOf",t.result)}}let aO=(()=>{class n{constructor(t){this.QuizService=t,this.showMenu=!0,this.showQuiz=!1,this.showScore=!1,this.result=[],this.points=0,this.name="",this.questions=[],this.answers=[],this.form=new ty({0:new Tr("",ei.required),1:new Tr("",ei.required),2:new Tr("",ei.required),3:new Tr("",ei.required),4:new Tr("",ei.required),5:new Tr("",ei.required),6:new Tr("",ei.required),7:new Tr("",ei.required),8:new Tr("",ei.required),9:new Tr("",ei.required),10:new Tr("",ei.required),11:new Tr("",ei.required),12:new Tr("",ei.required),13:new Tr("",ei.required),14:new Tr("",ei.required),15:new Tr("",ei.required),16:new Tr("",ei.required)})}ngOnInit(){}getQuestions(){var t=this;return(0,be.Z)(function*(){t.questions=yield t.QuizService.getQuestions()})()}startQuiz(t){this.name=t,this.showMenu=!1,this.showQuiz=!0,this.getQuestions()}checkAnswers(){this.result=this.QuizService.checkAnswers(this.questions,this.answers),this.points=this.result[0].points,this.result.shift(),this.showQuiz=!1,this.showScore=!0,this.QuizService.updateRanking(this.name,this.points)}get f(){return this.form.controls}submit(){for(let t=0;t<this.questions.length;t++)this.answers[t]=this.form.value[t];this.checkAnswers()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-quiz"]],decls:6,vars:3,consts:[["id","quiz"],[4,"ngIf"],[1,"form__group","field"],["type","input","placeholder","Digite seu nome","name","name","id","name","required","",1,"form__field"],["name",""],["for","name",1,"form__label"],[1,"centerText"],[1,"btn",3,"click"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary"],["type","radio","value","1",3,"name","formControlName"],["type","radio","value","2",3,"name","formControlName"],["type","radio","value","3",3,"name","formControlName"],[1,"table"],["colspan","3"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f.YNc(1,nO,13,0,"div",1),f._UZ(2,"br"),f.YNc(3,iO,6,2,"div",1),f._UZ(4,"br"),f.YNc(5,oO,10,3,"div",1),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngIf",r.showMenu),f.xp6(2),f.Q6J("ngIf",r.showQuiz),f.xp6(2),f.Q6J("ngIf",r.showScore))},directives:[Or,ry,qm,Lp,Vn,x0,wh,o0,P0],styles:["#quiz[_ngcontent-%COMP%]{padding-left:15em;padding-right:15em;margin-top:2rem;display:grid;place-items:center}@media only screen and (max-width: 600px){#quiz[_ngcontent-%COMP%]{padding-bottom:50px;padding-left:1em;padding-right:1em;display:grid;place-items:center}}.centerText[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{margin:1rem}.form__group[_ngcontent-%COMP%]{position:relative;padding:15px 0 0;margin-top:10px;width:50%}.form__field[_ngcontent-%COMP%]{font-family:inherit;width:100%;border:0;border-bottom:2px solid #9b9b9b;outline:0;font-size:1.3rem;color:#000;padding:7px 0;background:transparent;transition:border-color .2s}.form__field[_ngcontent-%COMP%]::placeholder{color:transparent}.form__field[_ngcontent-%COMP%]:placeholder-shown ~ .form__label[_ngcontent-%COMP%]{font-size:1.3rem;cursor:text;top:20px}.form__label[_ngcontent-%COMP%]{position:absolute;top:0;display:block;transition:.2s;font-size:1rem;color:#9b9b9b}.form__field[_ngcontent-%COMP%]:focus{padding-bottom:6px;font-weight:700;border-width:3px;border-image:linear-gradient(to right,#d15959,#ce1e1e);border-image-slice:1}.form__field[_ngcontent-%COMP%]:focus ~ .form__label[_ngcontent-%COMP%]{position:absolute;top:0;display:block;transition:.2s;font-size:1rem;color:#d15959;font-weight:700}.form__field[_ngcontent-%COMP%]:required, .form__field[_ngcontent-%COMP%]:invalid{box-shadow:none}"]}),n})();function uO(n,e){if(1&n&&(f.TgZ(0,"tr")(1,"td")(2,"b"),f._uU(3),f.qZA()(),f.TgZ(4,"td"),f._uU(5),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA()()),2&n){const t=e.$implicit;f.xp6(3),f.Oqu(t.position),f.xp6(2),f.hij(" ",t.name," "),f.xp6(2),f.hij(" ",t.points," ")}}const lO=[{path:"",component:Eh},{path:"quiz",component:aO},{path:"ranking",component:(()=>{class n{constructor(t){this.quizService=t,this.ranking=[]}ngOnInit(){this.getRank()}getRank(){var t=this;return(0,be.Z)(function*(){t.ranking=yield t.quizService.getRanking()})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(xM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-ranking"]],decls:15,vars:1,consts:[[1,"table","table-dark","table-striped","table-bordered"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(f.TgZ(0,"div")(1,"h1"),f._uU(2,"Ranking"),f.qZA(),f.TgZ(3,"table",0)(4,"thead")(5,"tr")(6,"th"),f._uU(7," Posi\xe7\xe3o "),f.qZA(),f.TgZ(8,"th"),f._uU(9," Nome "),f.qZA(),f.TgZ(10,"th"),f._uU(11," Pontos "),f.qZA()()(),f.TgZ(12,"tbody"),f.YNc(13,uO,8,3,"tr",1),f.qZA()()(),f._UZ(14,"br")),2&t&&(f.xp6(13),f.Q6J("ngForOf",r.ranking))},directives:[Vn],styles:["table[_ngcontent-%COMP%]{width:40%;margin-left:auto;margin-right:auto}div[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}"]}),n})()}];let cO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Lv.forRoot(lO)],Lv]}),n})(),dO=(()=>{class n{constructor(){this.title="SitePortal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:23,vars:0,consts:[["id","menu_bar",1,"container"],["href","#"],["width","100px","height","100px","src","assets/logo.jpg","alt","Logo"],["href","https://www.instagram.com/portal_prevencionista/"],["routerLink","quiz"],["routerLink","ranking"],["href","https://scratch.mit.edu/projects/535763887/fullscreen/"],[1,"footer"],[1,"center"]],template:function(t,r){1&t&&(f.TgZ(0,"header")(1,"div",0)(2,"span")(3,"a",1),f._UZ(4,"img",2),f.qZA()(),f.TgZ(5,"span")(6,"a",3),f._uU(7,"Instagram"),f.qZA()(),f.TgZ(8,"span")(9,"a",4),f._uU(10,"Quiz"),f.qZA()(),f.TgZ(11,"span")(12,"a",5),f._uU(13,"Ranking"),f.qZA()(),f.TgZ(14,"span")(15,"a",6),f._uU(16,"Jogo"),f.qZA()()()(),f.TgZ(17,"div"),f._UZ(18,"router-outlet"),f.qZA(),f.TgZ(19,"footer",7)(20,"div",8)(21,"p"),f._uU(22,"Encaixar alguma informa\xe7\xe3o (sobre contato, integrantes) aqui talvez?"),f.qZA()()())},directives:[yp,ll],styles:["header[_ngcontent-%COMP%]{top:0;left:0;right:0;align-items:center;background-color:#fff;font-weight:600;box-shadow:#0000003d 0 3px 8px}footer[_ngcontent-%COMP%]{background-color:#2e2c32;color:#fff;align-items:center;font-weight:600;position:absolute;bottom:0;width:100%;height:auto}#menu_bar[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding:.5em .5em .5em 0;margin:1em 1em 1em 0}#menu_bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}#menu_bar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}#menu_bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:active{background-color:#444242}"]}),n})();const LT_firebase={projectId:"siteportal157",appId:"1:707661137178:web:ecf440a6a9a9e56cdbd8a3",databaseURL:"https://siteportal157-default-rtdb.firebaseio.com",storageBucket:"siteportal157.appspot.com",apiKey:"AIzaSyBMFGAx-UYEyV4gFB970SlR6LfV1R9VFqo",authDomain:"siteportal157.firebaseapp.com",messagingSenderId:"707661137178",measurementId:"G-G9J3YSL6QZ"};O(198);class NM{constructor(){return(0,En.vb)("auth")}}class BT{constructor(e){return e}}const OM="firestore",jT=new f.OlP("angularfire2.firestore-instances");function yO(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new BT(r)}}const _O={provide:class gO{constructor(){return(0,En.vb)(OM)}},deps:[[new f.FiY,jT]]},vO={provide:BT,useFactory:function mO(n,e){const t=(0,En.JM)(OM,n,e);return t&&new BT(t)},deps:[[new f.FiY,jT],pm]};let EO=(()=>{class n{constructor(){(0,jf.KN)("angularfire",En.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[vO,_O]}),n})();function wO(n,...e){return{ngModule:EO,providers:[{provide:jT,useFactory:yO(n),multi:!0,deps:[f.R0b,f.zs3,En.HU,qS,[new f.FiY,NM],[new f.FiY,OI],...e]}]}}const IO=(0,En.u3)($x,!0);let DO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[dO]}),n.\u0275inj=f.cJS({providers:[],imports:[[Wu,ID,DD,cO,ao.hO.initializeApp(LT_firebase),JR(()=>XR(LT_firebase)),wO(()=>IO())]]}),n})();(0,f.G48)(),fc().bootstrapModule(DO).catch(n=>console.error(n))},5867:(tt,De,O)=>{O.d(De,{C6:()=>f.getApps,KN:()=>f.registerVersion,Mq:()=>f.getApp,ZF:()=>f.initializeApp});var f=O(9681);(0,f.registerVersion)("firebase","9.8.1","app")},127:(tt,De,O)=>{O.d(De,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(tt,De,O)=>{O.r(De);var f=O(5861),L=O(3942),R=O(198),se=O(2090),he=(O(9681),O(1877),O(4859));function ae(){return window}function U(){return(U=(0,f.Z)(function*(ue,W,G){var Te;const{BuildInfo:Ke}=ae();(0,R.aq)(W.sessionId,"AuthEvent did not contain a session ID");const ut=yield Ce(W.sessionId),Ct={};return(0,R.ar)()?Ct.ibi=Ke.packageName:(0,R.as)()?Ct.apn=Ke.packageName:(0,R.at)(ue,"operation-not-supported-in-this-environment"),Ke.displayName&&(Ct.appDisplayName=Ke.displayName),Ct.sessionId=ut,(0,R.au)(ue,G,W.type,void 0,null!==(Te=W.eventId)&&void 0!==Te?Te:void 0,Ct)})).apply(this,arguments)}function We(){return(We=(0,f.Z)(function*(ue){const{BuildInfo:W}=ae(),G={};(0,R.ar)()?G.iosBundleId=W.packageName:(0,R.as)()?G.androidPackageName=W.packageName:(0,R.at)(ue,"operation-not-supported-in-this-environment"),yield(0,R.av)(ue,G)})).apply(this,arguments)}function je(){return(je=(0,f.Z)(function*(ue,W,G){const{cordova:Te}=ae();let Ke=()=>{};try{yield new Promise((ut,Ct)=>{let $t=null;function Nt(){var Ot;ut();const wr=null===(Ot=Te.plugins.browsertab)||void 0===Ot?void 0:Ot.close;"function"==typeof wr&&wr(),"function"==typeof(null==G?void 0:G.close)&&G.close()}function Fn(){$t||($t=window.setTimeout(()=>{Ct((0,R.aw)(ue,"redirect-cancelled-by-user"))},2e3))}function qr(){"visible"===(null==document?void 0:document.visibilityState)&&Fn()}W.addPassiveListener(Nt),document.addEventListener("resume",Fn,!1),(0,R.as)()&&document.addEventListener("visibilitychange",qr,!1),Ke=()=>{W.removePassiveListener(Nt),document.removeEventListener("resume",Fn,!1),document.removeEventListener("visibilitychange",qr,!1),$t&&window.clearTimeout($t)}})}finally{Ke()}})).apply(this,arguments)}function Ce(ue){return ze.apply(this,arguments)}function ze(){return(ze=(0,f.Z)(function*(ue){const W=He(ue),G=yield crypto.subtle.digest("SHA-256",W);return Array.from(new Uint8Array(G)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function He(ue){if((0,R.aq)(/[0-9a-zA-Z]+/.test(ue),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ue);const W=new ArrayBuffer(ue.length),G=new Uint8Array(W);for(let Te=0;Te<ue.length;Te++)G[Te]=ue.charCodeAt(Te);return G}class Me extends R.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(W=>{this.resolveInialized=W})}addPassiveListener(W){this.passiveListeners.add(W)}removePassiveListener(W){this.passiveListeners.delete(W)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(W){return this.resolveInialized(),this.passiveListeners.forEach(G=>G(W)),super.onEvent(W)}initialized(){var W=this;return(0,f.Z)(function*(){yield W.initPromise})()}}function X(ue){return ce.apply(this,arguments)}function ce(){return(ce=(0,f.Z)(function*(ue){const W=yield ee()._get(ie(ue));return W&&(yield ee()._remove(ie(ue))),W})).apply(this,arguments)}function Z(){const ue=[],W="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let G=0;G<20;G++){const Te=Math.floor(Math.random()*W.length);ue.push(W.charAt(Te))}return ue.join("")}function ee(){return(0,R.ay)(R.b)}function ie(ue){return(0,R.az)("authEvent",ue.config.apiKey,ue.name)}function Le(ue){if(!(null==ue?void 0:ue.includes("?")))return{};const[W,...G]=ue.split("?");return(0,se.zd)(G.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aw)("no-auth-event")}}function kt(){var ue;return(null===(ue=null==self?void 0:self.location)||void 0===ue?void 0:ue.protocol)||null}function _n(ue=(0,se.z$)()){return!("file:"!==kt()&&"ionic:"!==kt()||!ue.toLowerCase().match(/iphone|ipad|ipod|android/))}function ci(){try{const ue=self.localStorage,W=R.aI();if(ue)return ue.setItem(W,"1"),ue.removeItem(W),!function Ni(ue=(0,se.z$)()){return function vr(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function wn(ue=(0,se.z$)()){return/Edge\/\d+/.test(ue)}(ue)}()||(0,se.hl)()}catch(ue){return Ei()&&(0,se.hl)()}return!1}function Ei(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function jn(){return(function Wt(){return"http:"===kt()||"https:"===kt()}()||(0,se.ru)()||_n())&&!function Ri(){return(0,se.b$)()||(0,se.UG)()}()&&ci()&&!Ei()}function Oi(){return _n()&&"undefined"!=typeof document}function xr(){return(xr=(0,f.Z)(function*(){return!!Oi()&&new Promise(ue=>{const W=setTimeout(()=>{ue(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(W),ue(!0)})})})).apply(this,arguments)}const qt={LOCAL:"local",NONE:"none",SESSION:"session"},Er=R.ax,nr="persistence";function vn(ue){return rr.apply(this,arguments)}function rr(){return(rr=(0,f.Z)(function*(ue){yield ue._initializationPromise;const W=jt(),G=R.az(nr,ue.config.apiKey,ue.name);W&&W.setItem(G,ue._getPersistence())})).apply(this,arguments)}function jt(){var ue;try{return(null===(ue=function gn(){return"undefined"!=typeof window?window:null}())||void 0===ue?void 0:ue.sessionStorage)||null}catch(W){return null}}const ct=R.ax;class nt{constructor(){this.browserResolver=R.ay(R.k),this.cordovaResolver=R.ay(class zt{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(W){var G=this;return(0,f.Z)(function*(){const Te=W._key();let Ke=G.eventManagers.get(Te);return Ke||(Ke=new Me(W),G.eventManagers.set(Te,Ke),G.attachCallbackListeners(W,Ke)),Ke})()}_openPopup(W){(0,R.at)(W,"operation-not-supported-in-this-environment")}_openRedirect(W,G,Te,Ke){var ut=this;return(0,f.Z)(function*(){!function fe(ue){var W,G,Te,Ke,ut,Ct,$t,Nt,Fn,qr;const Ot=ae();(0,R.ax)("function"==typeof(null===(W=null==Ot?void 0:Ot.universalLinks)||void 0===W?void 0:W.subscribe),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.ax)(void 0!==(null===(G=null==Ot?void 0:Ot.BuildInfo)||void 0===G?void 0:G.packageName),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.ax)("function"==typeof(null===(ut=null===(Ke=null===(Te=null==Ot?void 0:Ot.cordova)||void 0===Te?void 0:Te.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===ut?void 0:ut.openUrl),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(Nt=null===($t=null===(Ct=null==Ot?void 0:Ot.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===$t?void 0:$t.browsertab)||void 0===Nt?void 0:Nt.isAvailable),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.ax)("function"==typeof(null===(qr=null===(Fn=null==Ot?void 0:Ot.cordova)||void 0===Fn?void 0:Fn.InAppBrowser)||void 0===qr?void 0:qr.open),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(W);const Ct=yield ut._initialize(W);yield Ct.initialized(),Ct.resetRedirect(),(0,R.aD)(),yield ut._originValidation(W);const $t=function Ee(ue,W,G=null){return{type:W,eventId:G,urlResponse:null,sessionId:Z(),postBody:null,tenantId:ue.tenantId,error:(0,R.aw)(ue,"no-auth-event")}}(W,Te,Ke);yield function qe(ue,W){return ee()._set(ie(ue),W)}(W,$t);const Nt=yield function $(ue,W,G){return U.apply(this,arguments)}(W,$t,G),Fn=yield function Ae(ue){const{cordova:W}=ae();return new Promise(G=>{W.plugins.browsertab.isAvailable(Te=>{let Ke=null;Te?W.plugins.browsertab.openUrl(ue):Ke=W.InAppBrowser.open(ue,(0,R.ap)()?"_blank":"_system","location=yes"),G(Ke)})})}(Nt);return function ke(ue,W,G){return je.apply(this,arguments)}(W,Ct,Fn)})()}_isIframeWebStorageSupported(W,G){throw new Error("Method not implemented.")}_originValidation(W){const G=W._key();return this.originValidationPromises[G]||(this.originValidationPromises[G]=function re(ue){return We.apply(this,arguments)}(W)),this.originValidationPromises[G]}attachCallbackListeners(W,G){const{universalLinks:Te,handleOpenURL:Ke,BuildInfo:ut}=ae(),Ct=setTimeout((0,f.Z)(function*(){yield X(W),G.onEvent(Ze())}),500),$t=function(){var qr=(0,f.Z)(function*(Ot){clearTimeout(Ct);const wr=yield X(W);let ki=null;wr&&(null==Ot?void 0:Ot.url)&&(ki=function we(ue,W){var G,Te;const Ke=function le(ue){const W=Le(ue),G=W.link?decodeURIComponent(W.link):void 0,Te=Le(G).link,Ke=W.deep_link_id?decodeURIComponent(W.deep_link_id):void 0;return Le(Ke).link||Ke||Te||G||ue}(W);if(Ke.includes("/__/auth/callback")){const ut=Le(Ke),Ct=ut.firebaseError?function _e(ue){try{return JSON.parse(ue)}catch(W){return null}}(decodeURIComponent(ut.firebaseError)):null,$t=null===(Te=null===(G=null==Ct?void 0:Ct.code)||void 0===G?void 0:G.split("auth/"))||void 0===Te?void 0:Te[1],Nt=$t?(0,R.aw)($t):null;return Nt?{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,error:Nt,urlResponse:null,sessionId:null,postBody:null}:{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,sessionId:ue.sessionId,urlResponse:Ke,postBody:null}}return null}(wr,Ot.url)),G.onEvent(ki||Ze())});return function(wr){return qr.apply(this,arguments)}}();void 0!==Te&&"function"==typeof Te.subscribe&&Te.subscribe(null,$t);const Nt=Ke,Fn=`${ut.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var qr=(0,f.Z)(function*(Ot){if(Ot.toLowerCase().startsWith(Fn)&&$t({url:Ot}),"function"==typeof Nt)try{Nt(Ot)}catch(wr){console.error(wr)}});return function(Ot){return qr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aB,this._overrideRedirectResult=R.aC}_initialize(W){var G=this;return(0,f.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._initialize(W)})()}_openPopup(W,G,Te,Ke){var ut=this;return(0,f.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openPopup(W,G,Te,Ke)})()}_openRedirect(W,G,Te,Ke){var ut=this;return(0,f.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openRedirect(W,G,Te,Ke)})()}_isIframeWebStorageSupported(W,G){this.assertedUnderlyingResolver._isIframeWebStorageSupported(W,G)}_originValidation(W){return this.assertedUnderlyingResolver._originValidation(W)}get _shouldInitProactively(){return Oi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ct(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var W=this;return(0,f.Z)(function*(){if(W.underlyingResolver)return;const G=yield function ft(){return xr.apply(this,arguments)}();W.underlyingResolver=G?W.cordovaResolver:W.browserResolver})()}}function di(ue){return ue.unwrap()}function Ft(ue){return Mn(ue)}function Mn(ue){const{_tokenResponse:W}=ue instanceof se.ZR?ue.customData:ue;if(!W)return null;if(!(ue instanceof se.ZR)&&"temporaryProof"in W&&"phoneNumber"in W)return R.P.credentialFromResult(ue);const G=W.providerId;if(!G||G===R.o.PASSWORD)return null;let Te;switch(G){case R.o.GOOGLE:Te=R.Q;break;case R.o.FACEBOOK:Te=R.N;break;case R.o.GITHUB:Te=R.T;break;case R.o.TWITTER:Te=R.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:ut,oauthTokenSecret:Ct,pendingToken:$t,nonce:Nt}=W;return ut||Ct||Ke||$t?$t?G.startsWith("saml.")?R.aL._create(G,$t):R.J._fromParams({providerId:G,signInMethod:G,pendingToken:$t,idToken:Ke,accessToken:ut}):new R.U(G).credential({idToken:Ke,accessToken:ut,rawNonce:Nt}):null}return ue instanceof se.ZR?Te.credentialFromError(ue):Te.credentialFromResult(ue)}function an(ue,W){return W.catch(G=>{throw G instanceof se.ZR&&function Pi(ue,W){var G;const Te=null===(G=W.customData)||void 0===G?void 0:G._tokenResponse;if("auth/multi-factor-auth-required"===W.code)W.resolver=new z(ue,R.an(ue,W));else if(Te){const Ke=Mn(W),ut=W;Ke&&(ut.credential=Ke,ut.tenantId=Te.tenantId||void 0,ut.email=Te.email||void 0,ut.phoneNumber=Te.phoneNumber||void 0)}}(ue,G),G}).then(G=>{const Ke=G.user;return{operationType:G.operationType,credential:Ft(G),additionalUserInfo:R.al(G),user:ve.getOrCreate(Ke)}})}function V(ue,W){return H.apply(this,arguments)}function H(){return(H=(0,f.Z)(function*(ue,W){const G=yield W;return{verificationId:G.verificationId,confirm:Te=>an(ue,G.confirm(Te))}})).apply(this,arguments)}class z{constructor(W,G){this.resolver=G,this.auth=function hi(ue){return ue.wrapped()}(W)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(W){return an(di(this.auth),this.resolver.resolveSignIn(W))}}class ve{constructor(W){this._delegate=W,this.multiFactor=R.ao(W)}static getOrCreate(W){return ve.USER_MAP.has(W)||ve.USER_MAP.set(W,new ve(W)),ve.USER_MAP.get(W)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(W){return this._delegate.getIdTokenResult(W)}getIdToken(W){return this._delegate.getIdToken(W)}linkAndRetrieveDataWithCredential(W){return this.linkWithCredential(W)}linkWithCredential(W){var G=this;return(0,f.Z)(function*(){return an(G.auth,R.Z(G._delegate,W))})()}linkWithPhoneNumber(W,G){var Te=this;return(0,f.Z)(function*(){return V(Te.auth,R.l(Te._delegate,W,G))})()}linkWithPopup(W){var G=this;return(0,f.Z)(function*(){return an(G.auth,R.d(G._delegate,W,nt))})()}linkWithRedirect(W){var G=this;return(0,f.Z)(function*(){return yield vn(R.aE(G.auth)),R.g(G._delegate,W,nt)})()}reauthenticateAndRetrieveDataWithCredential(W){return this.reauthenticateWithCredential(W)}reauthenticateWithCredential(W){var G=this;return(0,f.Z)(function*(){return an(G.auth,R._(G._delegate,W))})()}reauthenticateWithPhoneNumber(W,G){return V(this.auth,R.r(this._delegate,W,G))}reauthenticateWithPopup(W){return an(this.auth,R.e(this._delegate,W,nt))}reauthenticateWithRedirect(W){var G=this;return(0,f.Z)(function*(){return yield vn(R.aE(G.auth)),R.h(G._delegate,W,nt)})()}sendEmailVerification(W){return R.ab(this._delegate,W)}unlink(W){var G=this;return(0,f.Z)(function*(){return yield R.ak(G._delegate,W),G})()}updateEmail(W){return R.ag(this._delegate,W)}updatePassword(W){return R.ah(this._delegate,W)}updatePhoneNumber(W){return R.u(this._delegate,W)}updateProfile(W){return R.af(this._delegate,W)}verifyBeforeUpdateEmail(W,G){return R.ac(this._delegate,W,G)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ve.USER_MAP=new WeakMap;const j=R.ax;let J=(()=>{class ue{constructor(G,Te){if(this.app=G,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=G.options;j(Ke,"invalid-api-key",{appName:G.name}),j(Ke,"invalid-api-key",{appName:G.name});const ut="undefined"!=typeof window?nt:void 0;this._delegate=Te.initialize({options:{persistence:Xe(Ke,G.name),popupRedirectResolver:ut}}),this._delegate._updateErrorMap(R.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ve.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(G){this._delegate.languageCode=G}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(G){this._delegate.tenantId=G}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(G,Te){R.G(this._delegate,G,Te)}applyActionCode(G){return R.a2(this._delegate,G)}checkActionCode(G){return R.a3(this._delegate,G)}confirmPasswordReset(G,Te){return R.a1(this._delegate,G,Te)}createUserWithEmailAndPassword(G,Te){var Ke=this;return(0,f.Z)(function*(){return an(Ke._delegate,R.a5(Ke._delegate,G,Te))})()}fetchProvidersForEmail(G){return this.fetchSignInMethodsForEmail(G)}fetchSignInMethodsForEmail(G){return R.aa(this._delegate,G)}isSignInWithEmailLink(G){return R.a8(this._delegate,G)}getRedirectResult(){var G=this;return(0,f.Z)(function*(){j(jn(),G._delegate,"operation-not-supported-in-this-environment");const Te=yield R.j(G._delegate,nt);return Te?an(G._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(G){!function on(ue,W){(0,R.aE)(ue)._logFramework(W)}(this._delegate,G)}onAuthStateChanged(G,Te,Ke){const{next:ut,error:Ct,complete:$t}=Oe(G,Te,Ke);return this._delegate.onAuthStateChanged(ut,Ct,$t)}onIdTokenChanged(G,Te,Ke){const{next:ut,error:Ct,complete:$t}=Oe(G,Te,Ke);return this._delegate.onIdTokenChanged(ut,Ct,$t)}sendSignInLinkToEmail(G,Te){return R.a7(this._delegate,G,Te)}sendPasswordResetEmail(G,Te){return R.a0(this._delegate,G,Te||void 0)}setPersistence(G){var Te=this;return(0,f.Z)(function*(){let Ke;switch(function Rr(ue,W){Er(Object.values(qt).includes(W),ue,"invalid-persistence-type"),(0,se.b$)()?Er(W!==qt.SESSION,ue,"unsupported-persistence-type"):(0,se.UG)()?Er(W===qt.NONE,ue,"unsupported-persistence-type"):Ei()?Er(W===qt.NONE||W===qt.LOCAL&&(0,se.hl)(),ue,"unsupported-persistence-type"):Er(W===qt.NONE||ci(),ue,"unsupported-persistence-type")}(Te._delegate,G),G){case qt.SESSION:Ke=R.a;break;case qt.LOCAL:Ke=(yield R.ay(R.i)._isAvailable())?R.i:R.b;break;case qt.NONE:Ke=R.L;break;default:return R.at("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(G){return this.signInWithCredential(G)}signInAnonymously(){return an(this._delegate,R.X(this._delegate))}signInWithCredential(G){return an(this._delegate,R.Y(this._delegate,G))}signInWithCustomToken(G){return an(this._delegate,R.$(this._delegate,G))}signInWithEmailAndPassword(G,Te){return an(this._delegate,R.a6(this._delegate,G,Te))}signInWithEmailLink(G,Te){return an(this._delegate,R.a9(this._delegate,G,Te))}signInWithPhoneNumber(G,Te){return V(this._delegate,R.s(this._delegate,G,Te))}signInWithPopup(G){var Te=this;return(0,f.Z)(function*(){return j(jn(),Te._delegate,"operation-not-supported-in-this-environment"),an(Te._delegate,R.c(Te._delegate,G,nt))})()}signInWithRedirect(G){var Te=this;return(0,f.Z)(function*(){return j(jn(),Te._delegate,"operation-not-supported-in-this-environment"),yield vn(Te._delegate),R.f(Te._delegate,G,nt)})()}updateCurrentUser(G){return this._delegate.updateCurrentUser(G)}verifyPasswordResetCode(G){return R.a4(this._delegate,G)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ue.Persistence=qt,ue})();function Oe(ue,W,G){let Te=ue;"function"!=typeof ue&&({next:Te,error:W,complete:G}=ue);const Ke=Te;return{next:Ct=>Ke(Ct&&ve.getOrCreate(Ct)),error:W,complete:G}}function Xe(ue,W){const G=function _s(ue,W){const G=jt();if(!G)return[];const Te=R.az(nr,ue,W);switch(G.getItem(Te)){case qt.NONE:return[R.L];case qt.LOCAL:return[R.i,R.a];case qt.SESSION:return[R.a];default:return[]}}(ue,W);if("undefined"!=typeof self&&!G.includes(R.i)&&G.push(R.i),"undefined"!=typeof window)for(const Te of[R.b,R.a])G.includes(Te)||G.push(Te);return G.includes(R.L)||G.push(R.L),G}class ht{constructor(){this.providerId="phone",this._delegate=new R.P(di(L.Z.auth()))}static credential(W,G){return R.P.credential(W,G)}verifyPhoneNumber(W,G){return this._delegate.verifyPhoneNumber(W,G)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=R.P.PROVIDER_ID;const At=R.ax;class tn{constructor(W,G,Te=L.Z.app()){var Ke;At(null===(Ke=Te.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new R.R(W,G,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $n(ue){ue.INTERNAL.registerComponent(new he.wA("auth-compat",W=>{const G=W.getProvider("app-compat").getImmediate(),Te=W.getProvider("auth");return new J(G,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.M,FacebookAuthProvider:R.N,GithubAuthProvider:R.T,GoogleAuthProvider:R.Q,OAuthProvider:R.U,SAMLAuthProvider:R.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:tn,TwitterAuthProvider:R.W,Auth:J,AuthCredential:R.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ue.registerVersion("@firebase/auth-compat","0.2.14")}(L.Z)},8306:(tt,De,O)=>{O.d(De,{y:()=>$});var f=O(2961),L=O(727),R=O(8822),se=O(4671);var he=O(2416),ae=O(576),me=O(2806);let $=(()=>{class Ae{constructor(je){je&&(this._subscribe=je)}lift(je){const fe=new Ae;return fe.source=this,fe.operator=je,fe}subscribe(je,fe,Ce){const ze=function We(Ae){return Ae&&Ae instanceof f.Lv||function re(Ae){return Ae&&(0,ae.m)(Ae.next)&&(0,ae.m)(Ae.error)&&(0,ae.m)(Ae.complete)}(Ae)&&(0,L.Nn)(Ae)}(je)?je:new f.Hp(je,fe,Ce);return(0,me.x)(()=>{const{operator:He,source:Se}=this;ze.add(He?He.call(ze,Se):Se?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(je){try{return this._subscribe(je)}catch(fe){je.error(fe)}}forEach(je,fe){return new(fe=U(fe))((Ce,ze)=>{const He=new f.Hp({next:Se=>{try{je(Se)}catch(Me){ze(Me),He.unsubscribe()}},error:ze,complete:Ce});this.subscribe(He)})}_subscribe(je){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(je)}[R.L](){return this}pipe(...je){return function ge(Ae){return 0===Ae.length?se.y:1===Ae.length?Ae[0]:function(je){return Ae.reduce((fe,Ce)=>Ce(fe),je)}}(je)(this)}toPromise(je){return new(je=U(je))((fe,Ce)=>{let ze;this.subscribe(He=>ze=He,He=>Ce(He),()=>fe(ze))})}}return Ae.create=ke=>new Ae(ke),Ae})();function U(Ae){var ke;return null!==(ke=null!=Ae?Ae:he.v.Promise)&&void 0!==ke?ke:Promise}},7579:(tt,De,O)=>{O.d(De,{x:()=>he});var f=O(8306),L=O(727);const se=(0,O(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=O(8737),ge=O(2806);let he=(()=>{class me extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const re=new ae(this,this);return re.operator=U,re}_throwIfClosed(){if(this.closed)throw new se}next(U){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(U)}})}error(U){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:re}=this;for(;re.length;)re.shift().error(U)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:re,isStopped:We,observers:Ae}=this;return re||We?L.Lc:(this.currentObservers=null,Ae.push(U),new L.w0(()=>{this.currentObservers=null,(0,oe.P)(Ae,U)}))}_checkFinalizedStatuses(U){const{hasError:re,thrownError:We,isStopped:Ae}=this;re?U.error(We):Ae&&U.complete()}asObservable(){const U=new f.y;return U.source=this,U}}return me.create=($,U)=>new ae($,U),me})();class ae extends he{constructor($,U){super(),this.destination=$,this.source=U}next($){var U,re;null===(re=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===re||re.call(U,$)}error($){var U,re;null===(re=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===re||re.call(U,$)}complete(){var $,U;null===(U=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===U||U.call($)}_subscribe($){var U,re;return null!==(re=null===(U=this.source)||void 0===U?void 0:U.subscribe($))&&void 0!==re?re:L.Lc}}},2961:(tt,De,O)=>{O.d(De,{Hp:()=>je,Lv:()=>re});var f=O(576),L=O(727),R=O(2416),se=O(7849);function oe(){}const ge=me("C",void 0,void 0);function me(Se,Me,Ee){return{kind:Se,value:Me,error:Ee}}var $=O(3410),U=O(2806);class re extends L.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,L.Nn)(Me)&&Me.add(this)):this.destination=He}static create(Me,Ee,qe){return new je(Me,Ee,qe)}next(Me){this.isStopped?ze(function ae(Se){return me("N",Se,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?ze(function he(Se){return me("E",void 0,Se)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?ze(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Ae(Se,Me){return We.call(Se,Me)}class ke{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Me)}catch(qe){fe(qe)}}error(Me){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Me)}catch(qe){fe(qe)}else fe(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Ee){fe(Ee)}}}class je extends re{constructor(Me,Ee,qe){let X;if(super(),(0,f.m)(Me)||!Me)X={next:null!=Me?Me:void 0,error:null!=Ee?Ee:void 0,complete:null!=qe?qe:void 0};else{let ce;this&&R.v.useDeprecatedNextContext?(ce=Object.create(Me),ce.unsubscribe=()=>this.unsubscribe(),X={next:Me.next&&Ae(Me.next,ce),error:Me.error&&Ae(Me.error,ce),complete:Me.complete&&Ae(Me.complete,ce)}):X=Me}this.destination=new ke(X)}}function fe(Se){R.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Se):(0,se.h)(Se)}function ze(Se,Me){const{onStoppedNotification:Ee}=R.v;Ee&&$.z.setTimeout(()=>Ee(Se,Me))}const He={closed:!0,next:oe,error:function Ce(Se){throw Se},complete:oe}},727:(tt,De,O)=>{O.d(De,{Lc:()=>ge,w0:()=>oe,Nn:()=>he});var f=O(576);const R=(0,O(3888).d)(me=>function(U){me(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((re,We)=>`${We+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var se=O(8737);class oe{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Ae of U)Ae.remove(this);else U.remove(this);const{initialTeardown:re}=this;if((0,f.m)(re))try{re()}catch(Ae){$=Ae instanceof R?Ae.errors:[Ae]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Ae of We)try{ae(Ae)}catch(ke){$=null!=$?$:[],ke instanceof R?$=[...$,...ke.errors]:$.push(ke)}}if($)throw new R($)}}add($){var U;if($&&$!==this)if(this.closed)ae($);else{if($ instanceof oe){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push($)}}_hasParent($){const{_parentage:U}=this;return U===$||Array.isArray(U)&&U.includes($)}_addParent($){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push($),U):U?[U,$]:$}_removeParent($){const{_parentage:U}=this;U===$?this._parentage=null:Array.isArray(U)&&(0,se.P)(U,$)}remove($){const{_finalizers:U}=this;U&&(0,se.P)(U,$),$ instanceof oe&&$._removeParent(this)}}oe.EMPTY=(()=>{const me=new oe;return me.closed=!0,me})();const ge=oe.EMPTY;function he(me){return me instanceof oe||me&&"closed"in me&&(0,f.m)(me.remove)&&(0,f.m)(me.add)&&(0,f.m)(me.unsubscribe)}function ae(me){(0,f.m)(me)?me():me.unsubscribe()}},2416:(tt,De,O)=>{O.d(De,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(tt,De,O)=>{O.d(De,{E:()=>L});const L=new(O(8306).y)(oe=>oe.complete())},8996:(tt,De,O)=>{O.d(De,{D:()=>Me});var f=O(8421),L=O(5363),R=O(9468),ge=O(8306),ae=O(2202),me=O(576),$=O(9672);function re(Ee,qe){if(!Ee)throw new Error("Iterable cannot be null");return new ge.y(X=>{(0,$.f)(X,qe,()=>{const ce=Ee[Symbol.asyncIterator]();(0,$.f)(X,qe,()=>{ce.next().then(we=>{we.done?X.complete():X.next(we.value)})},0,!0)})})}var We=O(3670),Ae=O(8239),ke=O(1144),je=O(6495),fe=O(2206),Ce=O(4532),ze=O(3260);function Me(Ee,qe){return qe?function Se(Ee,qe){if(null!=Ee){if((0,We.c)(Ee))return function se(Ee,qe){return(0,f.Xf)(Ee).pipe((0,R.R)(qe),(0,L.Q)(qe))}(Ee,qe);if((0,ke.z)(Ee))return function he(Ee,qe){return new ge.y(X=>{let ce=0;return qe.schedule(function(){ce===Ee.length?X.complete():(X.next(Ee[ce++]),X.closed||this.schedule())})})}(Ee,qe);if((0,Ae.t)(Ee))return function oe(Ee,qe){return(0,f.Xf)(Ee).pipe((0,R.R)(qe),(0,L.Q)(qe))}(Ee,qe);if((0,fe.D)(Ee))return re(Ee,qe);if((0,je.T)(Ee))return function U(Ee,qe){return new ge.y(X=>{let ce;return(0,$.f)(X,qe,()=>{ce=Ee[ae.h](),(0,$.f)(X,qe,()=>{let we,Z;try{({value:we,done:Z}=ce.next())}catch(ee){return void X.error(ee)}Z?X.complete():X.next(we)},0,!0)}),()=>(0,me.m)(null==ce?void 0:ce.return)&&ce.return()})}(Ee,qe);if((0,ze.L)(Ee))return function He(Ee,qe){return re((0,ze.Q)(Ee),qe)}(Ee,qe)}throw(0,Ce.z)(Ee)}(Ee,qe):(0,f.Xf)(Ee)}},8421:(tt,De,O)=>{O.d(De,{Xf:()=>We});var f=O(655),L=O(1144),R=O(8239),se=O(8306),oe=O(3670),ge=O(2206),he=O(4532),ae=O(6495),me=O(3260),$=O(576),U=O(7849),re=O(8822);function We(Se){if(Se instanceof se.y)return Se;if(null!=Se){if((0,oe.c)(Se))return function Ae(Se){return new se.y(Me=>{const Ee=Se[re.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,L.z)(Se))return function ke(Se){return new se.y(Me=>{for(let Ee=0;Ee<Se.length&&!Me.closed;Ee++)Me.next(Se[Ee]);Me.complete()})}(Se);if((0,R.t)(Se))return function je(Se){return new se.y(Me=>{Se.then(Ee=>{Me.closed||(Me.next(Ee),Me.complete())},Ee=>Me.error(Ee)).then(null,U.h)})}(Se);if((0,ge.D)(Se))return Ce(Se);if((0,ae.T)(Se))return function fe(Se){return new se.y(Me=>{for(const Ee of Se)if(Me.next(Ee),Me.closed)return;Me.complete()})}(Se);if((0,me.L)(Se))return function ze(Se){return Ce((0,me.Q)(Se))}(Se)}throw(0,he.z)(Se)}function Ce(Se){return new se.y(Me=>{(function He(Se,Me){var Ee,qe,X,ce;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,f.KL)(Se);!(qe=yield Ee.next()).done;)if(Me.next(qe.value),Me.closed)return}catch(we){X={error:we}}finally{try{qe&&!qe.done&&(ce=Ee.return)&&(yield ce.call(Ee))}finally{if(X)throw X.error}}Me.complete()})})(Se,Me).catch(Ee=>Me.error(Ee))})}},6451:(tt,De,O)=>{O.d(De,{T:()=>ge});var f=O(8189),L=O(8421),R=O(515),se=O(7669),oe=O(8996);function ge(...he){const ae=(0,se.yG)(he),me=(0,se._6)(he,1/0),$=he;return $.length?1===$.length?(0,L.Xf)($[0]):(0,f.J)(me)((0,oe.D)($,ae)):R.E}},5403:(tt,De,O)=>{O.d(De,{x:()=>L});var f=O(2961);function L(se,oe,ge,he,ae){return new R(se,oe,ge,he,ae)}class R extends f.Lv{constructor(oe,ge,he,ae,me,$){super(oe),this.onFinalize=me,this.shouldUnsubscribe=$,this._next=ge?function(U){try{ge(U)}catch(re){oe.error(re)}}:super._next,this._error=ae?function(U){try{ae(U)}catch(re){oe.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(U){oe.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(tt,De,O)=>{O.d(De,{U:()=>R});var f=O(4482),L=O(5403);function R(se,oe){return(0,f.e)((ge,he)=>{let ae=0;ge.subscribe((0,L.x)(he,me=>{he.next(se.call(oe,me,ae++))}))})}},8189:(tt,De,O)=>{O.d(De,{J:()=>R});var f=O(5577),L=O(4671);function R(se=1/0){return(0,f.z)(L.y,se)}},5577:(tt,De,O)=>{O.d(De,{z:()=>ae});var f=O(4004),L=O(8421),R=O(4482),se=O(9672),oe=O(5403),he=O(576);function ae(me,$,U=1/0){return(0,he.m)($)?ae((re,We)=>(0,f.U)((Ae,ke)=>$(re,Ae,We,ke))((0,L.Xf)(me(re,We))),U):("number"==typeof $&&(U=$),(0,R.e)((re,We)=>function ge(me,$,U,re,We,Ae,ke,je){const fe=[];let Ce=0,ze=0,He=!1;const Se=()=>{He&&!fe.length&&!Ce&&$.complete()},Me=qe=>Ce<re?Ee(qe):fe.push(qe),Ee=qe=>{Ae&&$.next(qe),Ce++;let X=!1;(0,L.Xf)(U(qe,ze++)).subscribe((0,oe.x)($,ce=>{null==We||We(ce),Ae?Me(ce):$.next(ce)},()=>{X=!0},void 0,()=>{if(X)try{for(Ce--;fe.length&&Ce<re;){const ce=fe.shift();ke?(0,se.f)($,ke,()=>Ee(ce)):Ee(ce)}Se()}catch(ce){$.error(ce)}}))};return me.subscribe((0,oe.x)($,Me,()=>{He=!0,Se()})),()=>{null==je||je()}}(re,We,me,U)))}},5363:(tt,De,O)=>{O.d(De,{Q:()=>se});var f=O(9672),L=O(4482),R=O(5403);function se(oe,ge=0){return(0,L.e)((he,ae)=>{he.subscribe((0,R.x)(ae,me=>(0,f.f)(ae,oe,()=>ae.next(me),ge),()=>(0,f.f)(ae,oe,()=>ae.complete(),ge),me=>(0,f.f)(ae,oe,()=>ae.error(me),ge)))})}},3099:(tt,De,O)=>{O.d(De,{B:()=>ge});var f=O(8996),L=O(5698),R=O(7579),se=O(2961),oe=O(4482);function ge(ae={}){const{connector:me=(()=>new R.x),resetOnError:$=!0,resetOnComplete:U=!0,resetOnRefCountZero:re=!0}=ae;return We=>{let Ae=null,ke=null,je=null,fe=0,Ce=!1,ze=!1;const He=()=>{null==ke||ke.unsubscribe(),ke=null},Se=()=>{He(),Ae=je=null,Ce=ze=!1},Me=()=>{const Ee=Ae;Se(),null==Ee||Ee.unsubscribe()};return(0,oe.e)((Ee,qe)=>{fe++,!ze&&!Ce&&He();const X=je=null!=je?je:me();qe.add(()=>{fe--,0===fe&&!ze&&!Ce&&(ke=he(Me,re))}),X.subscribe(qe),Ae||(Ae=new se.Hp({next:ce=>X.next(ce),error:ce=>{ze=!0,He(),ke=he(Se,$,ce),X.error(ce)},complete:()=>{Ce=!0,He(),ke=he(Se,U),X.complete()}}),(0,f.D)(Ee).subscribe(Ae))})(We)}}function he(ae,me,...$){return!0===me?(ae(),null):!1===me?null:me(...$).pipe((0,L.q)(1)).subscribe(()=>ae())}},9468:(tt,De,O)=>{O.d(De,{R:()=>L});var f=O(4482);function L(R,se=0){return(0,f.e)((oe,ge)=>{ge.add(R.schedule(()=>oe.subscribe(ge),se))})}},5698:(tt,De,O)=>{O.d(De,{q:()=>se});var f=O(515),L=O(4482),R=O(5403);function se(oe){return oe<=0?()=>f.E:(0,L.e)((ge,he)=>{let ae=0;ge.subscribe((0,R.x)(he,me=>{++ae<=oe&&(he.next(me),oe<=ae&&he.complete())}))})}},8505:(tt,De,O)=>{O.d(De,{b:()=>oe});var f=O(576),L=O(4482),R=O(5403),se=O(4671);function oe(ge,he,ae){const me=(0,f.m)(ge)||he||ae?{next:ge,error:he,complete:ae}:ge;return me?(0,L.e)(($,U)=>{var re;null===(re=me.subscribe)||void 0===re||re.call(me);let We=!0;$.subscribe((0,R.x)(U,Ae=>{var ke;null===(ke=me.next)||void 0===ke||ke.call(me,Ae),U.next(Ae)},()=>{var Ae;We=!1,null===(Ae=me.complete)||void 0===Ae||Ae.call(me),U.complete()},Ae=>{var ke;We=!1,null===(ke=me.error)||void 0===ke||ke.call(me,Ae),U.error(Ae)},()=>{var Ae,ke;We&&(null===(Ae=me.unsubscribe)||void 0===Ae||Ae.call(me)),null===(ke=me.finalize)||void 0===ke||ke.call(me)}))}):se.y}},4408:(tt,De,O)=>{O.d(De,{o:()=>oe});var f=O(727);class L extends f.w0{constructor(he,ae){super()}schedule(he,ae=0){return this}}const R={setInterval(ge,he,...ae){const{delegate:me}=R;return(null==me?void 0:me.setInterval)?me.setInterval(ge,he,...ae):setInterval(ge,he,...ae)},clearInterval(ge){const{delegate:he}=R;return((null==he?void 0:he.clearInterval)||clearInterval)(ge)},delegate:void 0};var se=O(8737);class oe extends L{constructor(he,ae){super(he,ae),this.scheduler=he,this.work=ae,this.pending=!1}schedule(he,ae=0){if(this.closed)return this;this.state=he;const me=this.id,$=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId($,me,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId($,this.id,ae),this}requestAsyncId(he,ae,me=0){return R.setInterval(he.flush.bind(he,this),me)}recycleAsyncId(he,ae,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return ae;R.clearInterval(ae)}execute(he,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(he,ae);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,ae){let $,me=!1;try{this.work(he)}catch(U){me=!0,$=U||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:he,scheduler:ae}=this,{actions:me}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(me,this),null!=he&&(this.id=this.recycleAsyncId(ae,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(tt,De,O)=>{O.d(De,{v:()=>R});var f=O(6063);class L{constructor(oe,ge=L.now){this.schedulerActionCtor=oe,this.now=ge}schedule(oe,ge=0,he){return new this.schedulerActionCtor(this,oe).schedule(he,ge)}}L.now=f.l.now;class R extends L{constructor(oe,ge=L.now){super(oe,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:ge}=this;if(this._active)return void ge.push(oe);let he;this._active=!0;do{if(he=oe.execute(oe.state,oe.delay))break}while(oe=ge.shift());if(this._active=!1,he){for(;oe=ge.shift();)oe.unsubscribe();throw he}}}},4986:(tt,De,O)=>{O.d(De,{z:()=>R});var f=O(4408);const R=new(O(7565).v)(f.o)},6063:(tt,De,O)=>{O.d(De,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(tt,De,O)=>{O.d(De,{z:()=>f});const f={setTimeout(L,R,...se){const{delegate:oe}=f;return(null==oe?void 0:oe.setTimeout)?oe.setTimeout(L,R,...se):setTimeout(L,R,...se)},clearTimeout(L){const{delegate:R}=f;return((null==R?void 0:R.clearTimeout)||clearTimeout)(L)},delegate:void 0}},2202:(tt,De,O)=>{O.d(De,{h:()=>L});const L=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tt,De,O)=>{O.d(De,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(tt,De,O)=>{O.d(De,{_6:()=>ge,jO:()=>se,yG:()=>oe});var f=O(576);function R(he){return he[he.length-1]}function se(he){return(0,f.m)(R(he))?he.pop():void 0}function oe(he){return function L(he){return he&&(0,f.m)(he.schedule)}(R(he))?he.pop():void 0}function ge(he,ae){return"number"==typeof R(he)?he.pop():ae}},8737:(tt,De,O)=>{function f(L,R){if(L){const se=L.indexOf(R);0<=se&&L.splice(se,1)}}O.d(De,{P:()=>f})},3888:(tt,De,O)=>{function f(L){const se=L(oe=>{Error.call(oe),oe.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}O.d(De,{d:()=>f})},2806:(tt,De,O)=>{O.d(De,{O:()=>se,x:()=>R});var f=O(2416);let L=null;function R(oe){if(f.v.useDeprecatedSynchronousErrorHandling){const ge=!L;if(ge&&(L={errorThrown:!1,error:null}),oe(),ge){const{errorThrown:he,error:ae}=L;if(L=null,he)throw ae}}else oe()}function se(oe){f.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=oe)}},9672:(tt,De,O)=>{function f(L,R,se,oe=0,ge=!1){const he=R.schedule(function(){se(),ge?L.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(L.add(he),!ge)return he}O.d(De,{f:()=>f})},4671:(tt,De,O)=>{function f(L){return L}O.d(De,{y:()=>f})},1144:(tt,De,O)=>{O.d(De,{z:()=>f});const f=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(tt,De,O)=>{O.d(De,{D:()=>L});var f=O(576);function L(R){return Symbol.asyncIterator&&(0,f.m)(null==R?void 0:R[Symbol.asyncIterator])}},576:(tt,De,O)=>{function f(L){return"function"==typeof L}O.d(De,{m:()=>f})},3670:(tt,De,O)=>{O.d(De,{c:()=>R});var f=O(8822),L=O(576);function R(se){return(0,L.m)(se[f.L])}},6495:(tt,De,O)=>{O.d(De,{T:()=>R});var f=O(2202),L=O(576);function R(se){return(0,L.m)(null==se?void 0:se[f.h])}},8239:(tt,De,O)=>{O.d(De,{t:()=>L});var f=O(576);function L(R){return(0,f.m)(null==R?void 0:R.then)}},3260:(tt,De,O)=>{O.d(De,{L:()=>se,Q:()=>R});var f=O(655),L=O(576);function R(oe){return(0,f.FC)(this,arguments,function*(){const he=oe.getReader();try{for(;;){const{value:ae,done:me}=yield(0,f.qq)(he.read());if(me)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ae)}}finally{he.releaseLock()}})}function se(oe){return(0,L.m)(null==oe?void 0:oe.getReader)}},4482:(tt,De,O)=>{O.d(De,{A:()=>L,e:()=>R});var f=O(576);function L(se){return(0,f.m)(null==se?void 0:se.lift)}function R(se){return oe=>{if(L(oe))return oe.lift(function(ge){try{return se(ge,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(tt,De,O)=>{O.d(De,{h:()=>R});var f=O(2416),L=O(3410);function R(se){L.z.setTimeout(()=>{const{onUnhandledError:oe}=f.v;if(!oe)throw se;oe(se)})}},4532:(tt,De,O)=>{function f(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>f})},655:(tt,De,O)=>{function se(Z,ee){var ie={};for(var _e in Z)Object.prototype.hasOwnProperty.call(Z,_e)&&ee.indexOf(_e)<0&&(ie[_e]=Z[_e]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(_e=Object.getOwnPropertySymbols(Z);le<_e.length;le++)ee.indexOf(_e[le])<0&&Object.prototype.propertyIsEnumerable.call(Z,_e[le])&&(ie[_e[le]]=Z[_e[le]])}return ie}function ae(Z,ee,ie,_e){return new(ie||(ie=Promise))(function(Le,dt){function zt(on){try{Ze(_e.next(on))}catch(Sn){dt(Sn)}}function Pt(on){try{Ze(_e.throw(on))}catch(Sn){dt(Sn)}}function Ze(on){on.done?Le(on.value):function le(Le){return Le instanceof ie?Le:new ie(function(dt){dt(Le)})}(on.value).then(zt,Pt)}Ze((_e=_e.apply(Z,ee||[])).next())})}function fe(Z){return this instanceof fe?(this.v=Z,this):new fe(Z)}function Ce(Z,ee,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,_e=ie.apply(Z,ee||[]),Le=[];return le={},dt("next"),dt("throw"),dt("return"),le[Symbol.asyncIterator]=function(){return this},le;function dt(cn){_e[cn]&&(le[cn]=function(Jt){return new Promise(function(kt,Wt){Le.push([cn,Jt,kt,Wt])>1||zt(cn,Jt)})})}function zt(cn,Jt){try{!function Pt(cn){cn.value instanceof fe?Promise.resolve(cn.value.v).then(Ze,on):Sn(Le[0][2],cn)}(_e[cn](Jt))}catch(kt){Sn(Le[0][3],kt)}}function Ze(cn){zt("next",cn)}function on(cn){zt("throw",cn)}function Sn(cn,Jt){cn(Jt),Le.shift(),Le.length&&zt(Le[0][0],Le[0][1])}}function He(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,ee=Z[Symbol.asyncIterator];return ee?ee.call(Z):(Z=function re(Z){var ee="function"==typeof Symbol&&Symbol.iterator,ie=ee&&Z[ee],_e=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&_e>=Z.length&&(Z=void 0),{value:Z&&Z[_e++],done:!Z}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},_e("next"),_e("throw"),_e("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function _e(Le){ie[Le]=Z[Le]&&function(dt){return new Promise(function(zt,Pt){!function le(Le,dt,zt,Pt){Promise.resolve(Pt).then(function(Ze){Le({value:Ze,done:zt})},dt)}(zt,Pt,(dt=Z[Le](dt)).done,dt.value)})}}}O.d(De,{FC:()=>Ce,KL:()=>He,_T:()=>se,mG:()=>ae,qq:()=>fe})},5e3:(tt,De,O)=>{O.d(De,{$8M:()=>eo,$Z:()=>Il,AFp:()=>N_,AaK:()=>ae,AsE:()=>hd,CHM:()=>Ga,CRH:()=>v_,CZH:()=>R_,CqO:()=>Ay,EJc:()=>P_,EpF:()=>Gh,F4k:()=>og,FYo:()=>af,FiY:()=>Ur,G48:()=>Fu,GfV:()=>ow,Gpc:()=>U,JOm:()=>jo,LFG:()=>Ge,LSH:()=>Uc,Lbi:()=>kb,MAs:()=>Uh,NdJ:()=>ag,OlP:()=>Nn,Oqu:()=>Uy,PXZ:()=>Hl,Q6J:()=>Cy,QGY:()=>sg,Qsj:()=>Pg,R0b:()=>ai,RDi:()=>$u,Rgc:()=>xd,SBq:()=>ho,Sil:()=>F_,Suo:()=>__,TTD:()=>Xo,TgZ:()=>Hh,VLi:()=>bf,X6Q:()=>Qw,XFs:()=>ft,Xpm:()=>ht,Y36:()=>$h,YKP:()=>hw,YNc:()=>dE,Yjl:()=>Ke,Yz7:()=>Jt,ZZ4:()=>K_,_Bn:()=>Vs,_UZ:()=>ng,_Vd:()=>xa,_c5:()=>oI,_uU:()=>NE,aQg:()=>Vu,c2e:()=>Fb,cJS:()=>Wt,cg1:()=>Ig,dDg:()=>V_,deG:()=>rh,dqk:()=>Ft,eFA:()=>j_,ekj:()=>ky,g9A:()=>js,h0i:()=>fo,hGG:()=>aI,hij:()=>gg,iGM:()=>mf,ifc:()=>jt,ip1:()=>x_,kL8:()=>qy,lG2:()=>Te,n5z:()=>pr,oAB:()=>ue,oxw:()=>rd,q4F:()=>aw,qLn:()=>hp,qOj:()=>Go,qZA:()=>bl,s9C:()=>id,sBO:()=>zb,sIi:()=>Ar,s_b:()=>pf,soG:()=>zg,tBr:()=>Ns,tb:()=>kd,tp0:()=>Xr,uIk:()=>_u,vHH:()=>ke,vpe:()=>Us,wAp:()=>st,xp6:()=>Ih,z2F:()=>Vd,zSh:()=>$p,zs3:()=>va});var f=O(7579),L=O(727),R=O(8306),se=O(6451),oe=O(3099);function ge(i){for(let s in i)if(i[s]===ge)return s;throw Error("Could not find renamed property on target object.")}function he(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ae(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ae).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function me(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=ge({__forward_ref__:ge});function U(i){return i.__forward_ref__=U,i.toString=function(){return ae(this())},i}function re(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===U}class ke extends Error{constructor(s,a){super(function je(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function Me(i,s){const a=s?` in ${s}`:"";throw new ke(-201,`No provider for ${Ce(i)} found${a}`)}function Pt(i,s){null==i&&function Ze(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Wt(i){return{providers:i.providers||[],imports:i.imports||[]}}function _n(i){return Ri(i,ci)||Ri(i,jn)}function Ri(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ni(i){return i&&(i.hasOwnProperty(Ei)||i.hasOwnProperty(Oi))?i[Ei]:null}const ci=ge({\u0275prov:ge}),Ei=ge({\u0275inj:ge}),jn=ge({ngInjectableDef:ge}),Oi=ge({ngInjectorDef:ge});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let xr;function qt(i){const s=xr;return xr=i,s}function Er(i,s,a){const l=_n(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==s?s:void Me(ae(i),"Injector")}function Rr(i){return{toString:i}.toString()}var vn=(()=>((vn=vn||{})[vn.OnPush=0]="OnPush",vn[vn.Default=1]="Default",vn))(),jt=(()=>{return(i=jt||(jt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",jt;var i})();const ct="undefined"!=typeof globalThis&&globalThis,nt="undefined"!=typeof window&&window,di="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=ct||"undefined"!=typeof global&&global||nt||di,an={},V=[],H=ge({\u0275cmp:ge}),z=ge({\u0275dir:ge}),ve=ge({\u0275pipe:ge}),j=ge({\u0275mod:ge}),J=ge({\u0275fac:ge}),Oe=ge({__NG_ELEMENT_ID__:ge});let Xe=0;function ht(i){return Rr(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||V,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||jt.Emulated,id:"c",styles:i.styles||V,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,h=i.features,y=i.pipes;return l.id+=Xe++,l.inputs=G(i.inputs,a),l.outputs=G(i.outputs),h&&h.forEach(v=>v(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(tn):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(vt):null,l})}function tn(i){return ut(i)||function Ct(i){return i[z]||null}(i)}function vt(i){return function $t(i){return i[ve]||null}(i)}const $n={};function ue(i){return Rr(()=>{const s={type:i.type,bootstrap:i.bootstrap||V,declarations:i.declarations||V,imports:i.imports||V,exports:i.exports||V,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&($n[i.id]=i.type),s})}function G(i,s){if(null==i)return an;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),a[c]=l,s&&(s[c]=h)}return a}const Te=ht;function Ke(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function ut(i){return i[H]||null}function Nt(i,s){const a=i[j]||null;if(!a&&!0===s)throw new Error(`Type ${ae(i)} does not have '\u0275mod' property.`);return a}function wi(i){return Array.isArray(i)&&"object"==typeof i[1]}function fi(i){return Array.isArray(i)&&!0===i[1]}function Jl(i){return 0!=(8&i.flags)}function Fa(i){return 2==(2&i.flags)}function Es(i){return 1==(1&i.flags)}function pi(i){return null!==i.template}function qd(i){return 0!=(512&i[2])}function gi(i,s){return i.hasOwnProperty(J)?i[J]:null}class wo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Xo(){return ea}function ea(i){return i.type.prototype.ngOnChanges&&(i.setInput=Zf),Kd}function Kd(){const i=ic(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===an)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Zf(i,s,a,l){const c=ic(i)||function rs(i,s){return i[zs]=s}(i,{previous:an,current:null}),h=c.current||(c.current={}),y=c.previous,v=this.declaredInputs[a],I=y[v];h[v]=new wo(I&&I.currentValue,s,y===an),i[l]=s}Xo.ngInherit=!0;const zs="__ngSimpleChanges__";function ic(i){return i[zs]||null}let Ba;function $u(i){Ba=i}function hn(i){return!!i.listen}const ta={createRenderer:(i,s)=>function is(){return void 0!==Ba?Ba:"undefined"!=typeof document?document:void 0}()};function ln(i){for(;Array.isArray(i);)i=i[0];return i}function Ws(i,s){return ln(s[i])}function sr(i,s){return ln(s[i.index])}function Rn(i,s){return i.data[s]}function or(i,s){const a=s[i];return wi(a)?a:a[0]}function Io(i){return 4==(4&i[2])}function Fi(i){return 128==(128&i[2])}function Kr(i,s){return null==s?null:i[s]}function Ds(i){i[18]=0}function bs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const mt={lFrame:mc(null),bindingsEnabled:!0};function Do(){return mt.bindingsEnabled}function Ne(){return mt.lFrame.lView}function Lt(){return mt.lFrame.tView}function Ga(i){return mt.lFrame.contextLView=i,i[8]}function mn(){let i=cc();for(;null!==i&&64===i.type;)i=i.parent;return i}function cc(){return mt.lFrame.currentTNode}function Li(i,s){const a=mt.lFrame;a.currentTNode=i,a.isParent=s}function zu(){return mt.lFrame.isParent}function Co(){return mt.lFrame.bindingIndex++}function Yr(i){const s=mt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function fc(i,s){const a=mt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Wu(s)}function Wu(i){mt.lFrame.currentDirectiveIndex=i}function pc(){return mt.lFrame.currentQueryIndex}function gc(i){mt.lFrame.currentQueryIndex=i}function qu(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function oa(i,s,a){if(a&ft.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||a&ft.Host||(c=qu(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const l=mt.lFrame=Ks();return l.currentTNode=s,l.lView=i,!0}function aa(i){const s=Ks(),a=i[1];mt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ks(){const i=mt.lFrame,s=null===i?null:i.child;return null===s?mc(i):s}function mc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Xd(){const i=mt.lFrame;return mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const za=Xd;function Qr(){const i=Xd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function hr(){return mt.lFrame.selectedIndex}function Ys(i){mt.lFrame.selectedIndex=i}function Gn(){const i=mt.lFrame;return Rn(i.tView,i.selectedIndex)}function as(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:S}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),v&&((i.contentHooks||(i.contentHooks=[])).push(a,v),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,v)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function ua(i,s,a){vc(i,s,3,a)}function la(i,s,a,l){(3&i[2])===a&&vc(i,s,a,l)}function Zn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function vc(i,s,a,l){const h=null!=l?l:-1,y=s.length-1;let v=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(v=s[I],null!=l&&v>=l)break}else s[I]<0&&(i[18]+=65536),(v<h||-1==h)&&(Yf(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Yf(i,s,a,l){const c=a[l]<0,h=a[l+1],v=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class So{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Ui(i,s,a){const l=hn(i);let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const y=a[c++],v=a[c++],I=a[c++];l?i.setAttribute(s,v,I,y):s.setAttributeNS(y,v,I)}else{const y=h,v=a[++c];Di(y)?l&&i.setProperty(s,y,v):l?i.setAttribute(s,y,v):s.setAttribute(y,v),c++}}return c}function Pr(i){return 3===i||4===i||6===i}function Di(i){return 64===i.charCodeAt(0)}function ca(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Mo(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Mo(i,s,a,l,c){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const v=i[h++];if("number"==typeof v){if(v===s){y=-1;break}if(v>s){y=h-1;break}}}for(;h<i.length;){const v=i[h];if("number"==typeof v)break;if(v===a){if(null===l)return void(null!==c&&(i[h+1]=c));if(l===i[h+1])return void(i[h+2]=c)}h++,null!==l&&h++,null!==c&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==c&&i.splice(h++,0,c)}function wc(i){return-1!==i}function fn(i){return 32767&i}function Bi(i,s){let a=function Ic(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Ts=!0;function It(i){const s=Ts;return Ts=i,s}let bc=0;function xo(i,s){const a=Ro(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ls(l.data,i),ls(s,null),ls(l.blueprint,null));const c=Jr(i,s),h=i.injectorIndex;if(wc(c)){const y=fn(c),v=Bi(c,s),I=v[1].data;for(let T=0;T<8;T++)s[h+T]=v[y+T]|I[y+T]}return s[h+8]=c,h}function ls(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ro(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Jr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const h=c[1],y=h.type;if(l=2===y?h.declTNode:1===y?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function cs(i,s,a){!function zn(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Oe)&&(l=a[Oe]),null==l&&(l=a[Oe]=bc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Js(i,s,a){if(a&ft.Optional)return i;Me(s,"NodeInjector")}function Oo(i,s,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const c=i[9],h=qt(void 0);try{return c?c.get(s,l,a&ft.Optional):Er(s,l,a&ft.Optional)}finally{qt(h)}}return Js(l,s,a)}function As(i,s,a,l=ft.Default,c){if(null!==i){const h=function Cc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Oe)?i[Oe]:void 0;return"number"==typeof s?s>=0?255&s:da:s}(a);if("function"==typeof h){if(!oa(s,i,l))return l&ft.Host?Js(c,a,l):Oo(s,a,l,c);try{const y=h(l);if(null!=y||l&ft.Optional)return y;Me(a)}finally{za()}}else if("number"==typeof h){let y=null,v=Ro(i,s),I=-1,T=l&ft.Host?s[16][6]:null;for((-1===v||l&ft.SkipSelf)&&(I=-1===v?Jr(i,s):s[v+8],-1!==I&&Ju(l,!1)?(y=s[1],v=fn(I),s=Bi(I,s)):v=-1);-1!==v;){const S=s[1];if(fr(h,v,S.data)){const k=Qu(v,s,a,y,l,T);if(k!==Xs)return k}I=s[v+8],-1!==I&&Ju(l,s[1].data[v+8]===T)&&fr(h,v,s)?(y=S,v=fn(I),s=Bi(I,s)):v=-1}}}return Oo(s,a,l,c)}const Xs={};function da(){return new ji(mn(),Ne())}function Qu(i,s,a,l,c,h){const y=s[1],v=y.data[i+8],S=Za(v,y,a,null==l?Fa(v)&&Ts:l!=y&&0!=(3&v.type),c&ft.Host&&h===v);return null!==S?bi(s,y,S,v):Xs}function Za(i,s,a,l,c){const h=i.providerIndexes,y=s.data,v=1048575&h,I=i.directiveStart,S=h>>20,B=c?v+S:i.directiveEnd;for(let Q=l?v:v+S;Q<B;Q++){const Ie=y[Q];if(Q<I&&a===Ie||Q>=I&&Ie.type===a)return Q}if(c){const Q=y[I];if(Q&&pi(Q)&&Q.type===a)return I}return null}function bi(i,s,a,l){let c=i[a];const h=s.data;if(function Ec(i){return i instanceof So}(c)){const y=c;y.resolving&&function ze(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ke(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ce(h[a]));const v=It(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?qt(y.injectImpl):null;oa(i,l,ft.Default);try{c=i[a]=y.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function _c(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(l){const y=ea(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==I&&qt(I),It(v),y.resolving=!1,za()}}return c}function fr(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Ju(i,s){return!(i&ft.Self||i&ft.Host&&s)}class ji{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return As(this._tNode,this._lView,s,l,a)}}function pr(i){return Rr(()=>{const s=i.prototype.constructor,a=s[J]||Ss(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const h=c[J]||Ss(c);if(h&&h!==a)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Ss(i){return We(i)?()=>{const s=Ss(re(i));return s&&s()}:gi(i)}function eo(i){return function No(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const h=a[c];if(Pr(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(h===s)return a[c+1];c+=2}}}return null}(mn(),i)}const $i="__parameters__";function Hi(i,s,a){return Rr(()=>{const l=function Kn(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...h){if(this instanceof c)return l.apply(this,h),this;const y=new c(...h);return v.annotation=y,v;function v(I,T,S){const k=I.hasOwnProperty($i)?I[$i]:Object.defineProperty(I,$i,{value:[]})[$i];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(y),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Nn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rh=new Nn("AnalyzeForEntryComponents");function br(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),br(l,s)):s!==i&&s.push(l)}return s}function Fr(i,s){i.forEach(a=>Array.isArray(a)?Fr(a,s):s(a))}function Ya(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Lo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Lr(i,s,a){let l=fa(i,s);return l>=0?i[1|l]=a:(l=~l,function Qa(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Ja(i,s){const a=fa(i,s);if(a>=0)return i[1|a]}function fa(i,s){return function Mc(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const h=l+(c-l>>1),y=i[h<<a];if(s===y)return h<<a;y>s?c=h:l=h+1}return~(c<<a)}(i,s,1)}const ds={},Uo="__NG_DI_FLAG__",tu="ngTempTokenPath",D=/\n/gm,M="__source",F=ge({provide:String,useValue:ge});let K;function Y(i){const s=K;return K=i,s}function Fe(i,s=ft.Default){if(void 0===K)throw new ke(203,"");return null===K?Er(i,void 0,s):K.get(i,s&ft.Optional?null:void 0,s)}function Ge(i,s=ft.Default){return(function gn(){return xr}()||Fe)(re(i),s)}const Dt=Ge;function Vt(i){const s=[];for(let a=0;a<i.length;a++){const l=re(i[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let c,h=ft.Default;for(let y=0;y<l.length;y++){const v=l[y],I=Vr(v);"number"==typeof I?-1===I?c=v.token:h|=I:c=v}s.push(Ge(c,h))}else s.push(Ge(l))}return s}function Et(i,s){return i[Uo]=s,i.prototype[Uo]=s,i}function Vr(i){return i[Uo]}const Ns=Et(Hi("Inject",i=>({token:i})),-1),Ur=Et(Hi("Optional"),8),Xr=Et(Hi("SkipSelf"),4);class ol{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function hs(i){return i instanceof ol?i.changingThisBreaksApplicationSecurity:i}const yv=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,p=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var lr=(()=>((lr=lr||{})[lr.NONE=0]="NONE",lr[lr.HTML=1]="HTML",lr[lr.STYLE=2]="STYLE",lr[lr.SCRIPT=3]="SCRIPT",lr[lr.URL=4]="URL",lr[lr.RESOURCE_URL=5]="RESOURCE_URL",lr))();function Uc(i){const s=function Bc(){const i=Ne();return i&&i[12]}();return s?s.sanitize(lr.URL,i)||"":function fs(i,s){const a=function dh(i){return i instanceof ol&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?hs(i):function g(i){return(i=String(i)).match(yv)||i.match(p)?i:"unsafe:"+i}(fe(i))}const Iv="__ngContext__";function mi(i,s){i[Iv]=s}function Sm(i){const s=function gh(i){return i[Iv]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Nm(i){return i.ngOriginalError}function GI(i,...s){i.error(...s)}class hp{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function HI(i){return i&&i.ngErrorLogger||GI}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Nm(s);for(;a&&Nm(a);)a=Nm(a);return a||null}}const eD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function ro(i){return i instanceof Function?i():i}var jo=(()=>((jo=jo||{})[jo.Important=1]="Important",jo[jo.DashCase=2]="DashCase",jo))();function Pm(i,s){return undefined(i,s)}function vh(i){const s=i[3];return fi(s)?s[3]:s}function gp(i){return Mv(i[13])}function Fm(i){return Mv(i[4])}function Mv(i){for(;null!==i&&!fi(i);)i=i[4];return i}function jc(i,s,a,l,c){if(null!=l){let h,y=!1;fi(l)?h=l:wi(l)&&(y=!0,l=l[0]);const v=ln(l);0===i&&null!==a?null==c?kv(s,a,v):cu(s,a,v,c||null,!0):1===i&&null!==a?cu(s,a,v,c||null,!0):2===i?function $v(i,s,a){const l=Ep(i,s);l&&function Lv(i,s,a,l){hn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,v,y):3===i&&s.destroyNode(v),null!=h&&function zv(i,s,a,l,c){const h=a[7];h!==ln(a)&&jc(s,i,l,h,c);for(let v=10;v<a.length;v++){const I=a[v];Eh(I[1],I,i,s,l,h)}}(s,i,h,a,c)}}function Ai(i,s,a){if(hn(i))return i.createElement(s,a);{const l=null!==a?function Ua(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function Nv(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,bs(c,-1)),a.splice(l,1)}function _p(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&Nv(c,l),s>0&&(i[a-1][4]=l[4]);const h=Lo(i,10+s);!function rD(i,s){Eh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=h[19];null!==y&&y.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Ov(i,s){if(!(256&s[2])){const a=s[11];hn(a)&&a.destroyNode&&Eh(i,s,a,3,null,null),function yp(i){let s=i[13];if(!s)return vp(i[1],i);for(;s;){let a=null;if(wi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)wi(s)&&vp(s[1],s),s=s[3];null===s&&(s=i),wi(s)&&vp(s[1],s),a=s&&s[4]}s=a}}(s)}}function vp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Vm(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof So)){const h=a[l+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const v=c[h[y]],I=h[y+1];try{I.call(v)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function Pv(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+1],v="function"==typeof y?y(s):ln(s[y]),I=l[c=a[h+2]],T=a[h+3];"boolean"==typeof T?v.removeEventListener(a[h],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),h+=2}else{const y=l[c=a[h+1]];a[h].call(y)}if(null!==l){for(let h=c+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&hn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&fi(s[3])){a!==s[3]&&Nv(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function sD(i,s,a){return function lu(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===jt.None||c===jt.Emulated)return null}return sr(l,a)}(i,s.parent,a)}function cu(i,s,a,l,c){hn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function kv(i,s,a){hn(i)?i.appendChild(s,a):s.appendChild(a)}function Fv(i,s,a,l,c){null!==l?cu(i,s,a,l,c):kv(i,s,a)}function Ep(i,s){return hn(i)?i.parentNode(s):s.parentNode}let Uv=function Um(i,s,a){return 40&i.type?sr(i,a):null};function Hc(i,s,a,l){const c=sD(i,l,s),h=s[11],v=function Vv(i,s,a){return Uv(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)Fv(h,c,a[I],v,!1);else Fv(h,c,a,v,!1)}function wp(i,s){if(null!==s){const a=s.type;if(3&a)return sr(s,i);if(4&a)return Ip(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return wp(i,l);{const c=i[s.index];return fi(c)?Ip(-1,c):ln(c)}}if(32&a)return Pm(s,i)()||ln(i[s.index]);{const l=jv(i,s);return null!==l?Array.isArray(l)?l[0]:wp(vh(i[16]),l):wp(i,s.next)}}return null}function jv(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Ip(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return wp(l,c)}return s[7]}function Hv(i,s,a,l,c,h,y){for(;null!=a;){const v=l[a.index],I=a.type;if(y&&0===s&&(v&&mi(ln(v),l),a.flags|=4),64!=(64&a.flags))if(8&I)Hv(i,s,a.child,l,c,h,!1),jc(s,i,c,v,h);else if(32&I){const T=Pm(a,l);let S;for(;S=T();)jc(s,i,c,S,h);jc(s,i,c,v,h)}else 16&I?Gv(i,s,l,a,c,h):jc(s,i,c,v,h);a=y?a.projectionNext:a.next}}function Eh(i,s,a,l,c,h){Hv(a,l,i.firstChild,s,c,h,!1)}function Gv(i,s,a,l,c,h){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)jc(s,i,c,I[T],h);else Hv(i,s,I,y[3],c,h,!0)}function io(i,s,a){hn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function jm(i,s,a){hn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function $m(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===l||i.charCodeAt(c+h)<=32)return c}a=c+1}}const Wv="ng-template";function aD(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==$m(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function wh(i){return 4===i.type&&i.value!==Wv}function du(i,s,a){return s===(4!==i.type||a?i.value:Wv)}function qv(i,s,a){let l=4;const c=i.attrs||[],h=function Kv(i){for(let s=0;s<i.length;s++)if(Pr(i[s]))return s;return i.length}(c);let y=!1;for(let v=0;v<s.length;v++){const I=s[v];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!du(i,I,a)||""===I&&1===s.length){if(An(l))return!1;y=!0}}else{const T=8&l?I:s[++v];if(8&l&&null!==i.attrs){if(!aD(i.attrs,T,a)){if(An(l))return!1;y=!0}continue}const k=hu(8&l?"class":I,c,wh(i),a);if(-1===k){if(An(l))return!1;y=!0;continue}if(""!==T){let B;B=k>h?"":c[k+1].toLowerCase();const Q=8&l?B:null;if(Q&&-1!==$m(Q,T,0)||2&l&&T!==B){if(An(l))return!1;y=!0}}}}else{if(!y&&!An(l)&&!An(I))return!1;if(y&&An(I))continue;y=!1,l=I|1&l}}return An(l)||y}function An(i){return 0==(1&i)}function hu(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let h=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)h=!0;else{if(1===y||2===y){let v=s[++c];for(;"string"==typeof v;)v=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=h?1:2}return-1}return function Yv(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Zv(i,s,a=!1){for(let l=0;l<s.length;l++)if(qv(i,s[l],a))return!0;return!1}function Hm(i,s){return i?":not("+s.trim()+")":s}function Jv(i){let s=i[0],a=1,l=2,c="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const v=i[++a];c+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&l?c+="."+y:4&l&&(c+=" "+y);else""!==c&&!An(y)&&(s+=Hm(h,c),c=""),l=y,h=h||!An(l);a++}return""!==c&&(s+=Hm(h,c)),s}const Mt={};function Ih(i){Gm(Lt(),Ne(),hr()+i,!1)}function Gm(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&ua(s,h,a)}else{const h=i.preOrderHooks;null!==h&&la(s,h,0,a)}Ys(a)}function Dh(i,s){return i<<17|s<<2}function ks(i){return i>>17&32767}function Dp(i){return 2|i}function so(i){return(131068&i)>>2}function bp(i,s){return-131069&i|s<<2}function Tp(i){return 1|i}function f0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],h=a[l+1];if(-1!==h){const y=i.data[h];gc(c),y.contentQueries(2,s[h],h)}}}function gl(i,s,a,l,c,h,y,v,I,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ds(S),S[3]=S[15]=i,S[8]=a,S[10]=y||i&&i[10],S[11]=v||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=h,S[16]=2==s.type?i[16]:S,S}function zc(i,s,a,l,c){let h=i.data[s];if(null===h)h=function Np(i,s,a,l,c){const h=cc(),y=zu(),I=i.data[s]=function Xm(i,s,a,l,c,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==h&&(y?null==h.child&&null!==I.parent&&(h.child=I):null===h.next&&(h.next=I)),I}(i,s,a,l,c),function Jd(){return mt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=c;const y=function os(){const i=mt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return Li(h,!0),h}function fu(i,s,a,l){if(0===a)return-1;const c=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function ml(i,s,a){aa(s);try{const l=i.viewQuery;null!==l&&Bp(1,l,a);const c=i.template;null!==c&&Wc(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&f0(i,s),i.staticViewQueries&&Bp(2,i.viewQuery,a);const h=i.components;null!==h&&function nA(i,s){for(let a=0;a<s.length;a++)gD(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Qr()}}function Ah(i,s,a,l){const c=s[2];if(256!=(256&c)){aa(s);try{Ds(s),function bo(i){return mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Wc(i,s,a,2,l);const y=3==(3&c);if(y){const T=i.preOrderCheckHooks;null!==T&&ua(s,T,null)}else{const T=i.preOrderHooks;null!==T&&la(s,T,0,null),Zn(s,0)}if(function iy(i){for(let s=gp(i);null!==s;s=Fm(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],h=c[3];0==(1024&c[2])&&bs(h,1),c[2]|=1024}}}(s),function N0(i){for(let s=gp(i);null!==s;s=Fm(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Fi(l)&&Ah(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&f0(i,s),y){const T=i.contentCheckHooks;null!==T&&ua(s,T)}else{const T=i.contentHooks;null!==T&&la(s,T,1),Zn(s,1)}!function tA(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Ys(~c);else{const h=c,y=a[++l],v=a[++l];fc(y,h),v(2,s[h])}}}finally{Ys(-1)}}(i,s);const v=i.components;null!==v&&function p0(i,s){for(let a=0;a<s.length;a++)pD(i,s[a])}(s,v);const I=i.viewQuery;if(null!==I&&Bp(2,I,l),y){const T=i.viewCheckHooks;null!==T&&ua(s,T)}else{const T=i.viewHooks;null!==T&&la(s,T,2),Zn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,bs(s[3],-1))}finally{Qr()}}}function Qm(i,s,a,l){const c=s[10],y=Io(s);try{!y&&c.begin&&c.begin(),y&&ml(i,s,l),Ah(i,s,a,l)}finally{!y&&c.end&&c.end()}}function Wc(i,s,a,l,c){const h=hr(),y=2&l;try{Ys(-1),y&&s.length>20&&Gm(i,s,20,!1),a(l,c)}finally{Ys(h)}}function pu(i,s,a){!Do()||(function sA(i,s,a,l){const c=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||xo(a,s),mi(l,s);const y=a.initialInputs;for(let v=c;v<h;v++){const I=i.data[v],T=pi(I);T&&A0(s,a,I);const S=bi(s,i,v,a);mi(S,s),null!==y&&M0(0,v-c,S,I,0,y),T&&(or(a.index,s)[8]=S)}}(i,s,a,sr(a,s)),128==(128&a.flags)&&function oA(i,s,a){const l=a.directiveStart,c=a.directiveEnd,y=a.index,v=function sa(){return mt.lFrame.currentDirectiveIndex}();try{Ys(y);for(let I=l;I<c;I++){const T=i.data[I],S=s[I];Wu(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&w0(T,S)}}finally{Ys(-1),Wu(v)}}(i,s,a))}function yl(i,s,a=sr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let h=0;h<l.length;h+=2){const y=l[h+1],v=-1===y?a(s,i):i[y];i[c++]=v}}}function g0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=qc(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function qc(i,s,a,l,c,h,y,v,I,T){const S=20+l,k=S+c,B=function m0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Mt);return a}(S,k),Q="function"==typeof T?T():T;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:v,declTNode:s,data:B.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function Jm(i,s,a,l){const c=k0(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&F0(i).push(l,c.length-1))}function y0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Ki(i,s,a,l,c,h,y,v){const I=sr(s,a);let S,T=s.inputs;!v&&null!=T&&(S=T[l])?(yD(i,a,S,l,c),Fa(s)&&function ey(i,s){const a=or(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function v0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=y?y(c,s.value||"",l):c,hn(h)?h.setProperty(I,l,c):Di(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function kp(i,s,a,l){let c=!1;if(Do()){const h=function I0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let h=0;h<l.length;h++){const y=l[h];Zv(a,y.selectors,!1)&&(c||(c=[]),cs(xo(a,s),i,y.type),pi(y)?(D0(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===l?null:{"":-1};if(null!==h){c=!0,ry(a,i.data.length,h.length);for(let S=0;S<h.length;S++){const k=h[S];k.providersResolver&&k.providersResolver(k)}let v=!1,I=!1,T=fu(i,s,h.length,null);for(let S=0;S<h.length;S++){const k=h[S];a.mergedAttrs=ca(a.mergedAttrs,k.hostAttrs),T0(i,a,s,T,k),C0(T,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const B=k.type.prototype;!v&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function _0(i,s){const l=s.directiveEnd,c=i.data,h=s.attrs,y=[];let v=null,I=null;for(let T=s.directiveStart;T<l;T++){const S=c[T],k=S.inputs,B=null===h||wh(s)?null:fD(k,h);y.push(B),v=y0(k,T,v),I=y0(S.outputs,T,I)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=v,s.outputs=I}(i,a)}y&&function b0(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=a[s[c+1]];if(null==h)throw new ke(-301,!1);l.push(s[c],h)}}}(a,l,y)}return a.mergedAttrs=ca(a.mergedAttrs,a.attrs),c}function hD(i,s,a,l,c,h){const y=h.hostBindings;if(y){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const I=~s.index;(function iA(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(l,c,y)}}function w0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function D0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function C0(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;pi(s)&&(a[""]=i)}}function ry(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function T0(i,s,a,l,c){i.data[l]=c;const h=c.factory||(c.factory=gi(c.type)),y=new So(h,pi(c),null);i.blueprint[l]=y,a[l]=y,hD(i,s,0,l,fu(i,a,c.hostVars,Mt),c)}function A0(i,s,a){const l=sr(s,i),c=g0(a),h=i[10],y=Vp(i,gl(i,c,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=y}function Ho(i,s,a,l,c,h){const y=sr(i,s);!function S0(i,s,a,l,c,h,y){if(null==h)hn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const v=null==y?fe(h):y(h,l||"",c);hn(i)?i.setAttribute(s,c,v,a):a?s.setAttributeNS(a,c,v):s.setAttribute(c,v)}}(s[11],y,h,i.value,a,l,c)}function M0(i,s,a,l,c,h){const y=h[s];if(null!==y){const v=l.setInput;for(let I=0;I<y.length;){const T=y[I++],S=y[I++],k=y[I++];null!==v?l.setInput(a,k,T,S):a[S]=k}}}function fD(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function R0(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function pD(i,s){const a=or(s,i);if(Fi(a)){const l=a[1];80&a[2]?Ah(l,a,l.template,a[8]):a[5]>0&&Fp(a)}}function Fp(i){for(let l=gp(i);null!==l;l=Fm(l))for(let c=10;c<l.length;c++){const h=l[c];if(1024&h[2]){const y=h[1];Ah(y,h,y.template,h[8])}else h[5]>0&&Fp(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=or(a[l],i);Fi(c)&&c[5]>0&&Fp(c)}}function gD(i,s){const a=or(s,i),l=a[1];(function Lp(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),ml(l,a,a[8])}function Vp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function xh(i){for(;i;){i[2]|=64;const s=vh(i);if(qd(i)&&!s)return i;i=s}return null}function O0(i){!function Rh(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Sm(a),c=l[1];Qm(c,l,c.template,a)}}(i[8])}function Bp(i,s,a){gc(0),s(i,a)}const sy=(()=>Promise.resolve(null))();function k0(i){return i[7]||(i[7]=[])}function F0(i){return i.cleanup||(i.cleanup=[])}function L0(i,s){const a=i[9],l=a?a.get(hp,null):null;l&&l.handleError(s)}function yD(i,s,a,l,c){for(let h=0;h<a.length;){const y=a[h++],v=a[h++],I=s[y],T=i.data[y];null!==T.setInput?T.setInput(I,c,l,v):I[v]=c}}function oo(i,s,a){const l=Ws(s,i);!function xv(i,s,a){hn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function jp(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const v=s[y];"number"==typeof v?h=v:1==h?c=me(c,v):2==h&&(l=me(l,v+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const _a=new Nn("INJECTOR",-1);class U0{get(s,a=ds){if(a===ds){const l=new Error(`NullInjectorError: No provider for ${ae(s)}!`);throw l.name="NullInjectorError",l}return a}}const $p=new Nn("Set Injector scope."),Nh={},B0={};let ay;function j0(){return void 0===ay&&(ay=new U0),ay}function Hp(i,s=null,a=null,l){const c=uy(i,s,a,l);return c._resolveInjectorDefTypes(),c}function uy(i,s=null,a=null,l){return new ED(i,a,s||j0(),l)}class ED{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Fr(a,v=>this.processProvider(v,s,a)),Fr([s],v=>this.processInjectorType(v,[],h)),this.records.set(_a,_l(void 0,this));const y=this.records.get($p);this.scope=null!=y?y.value:null,this.source=c||("object"==typeof s?null:ae(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=ds,l=ft.Default){this.assertNotDestroyed();const c=Y(this),h=qt(void 0);try{if(!(l&ft.SkipSelf)){let v=this.records.get(s);if(void 0===v){const I=function DD(i){return"function"==typeof i||"object"==typeof i&&i instanceof Nn}(s)&&_n(s);v=I&&this.injectableDefInScope(I)?_l(Gp(s),Nh):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(l&ft.Self?j0():this.parent).get(s,a=l&ft.Optional&&a===ds?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[tu]=y[tu]||[]).unshift(ae(s)),c)throw y;return function Tn(i,s,a,l){const c=i[tu];throw s[M]&&c.unshift(s[M]),i.message=function zi(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ae(s);if(Array.isArray(s))c=s.map(ae).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let v=s[y];h.push(y+":"+("string"==typeof v?JSON.stringify(v):ae(v)))}c=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[tu]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{qt(h),Y(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ae(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(s,a,l){if(!(s=re(s)))return!1;let c=Ni(s);const h=null==c&&s.ngModule||void 0,y=void 0===h?s:h,v=-1!==l.indexOf(y);if(void 0!==h&&(c=Ni(h)),null==c)return!1;if(null!=c.imports&&!v){let S;l.push(y);try{Fr(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:B,providers:Q}=S[k];Fr(Q,Ie=>this.processProvider(Ie,B,Q||V))}}this.injectorDefTypes.add(y);const I=gi(y)||(()=>new y);this.records.set(y,_l(I,Nh));const T=c.providers;if(null!=T&&!v){const S=s;Fr(T,k=>this.processProvider(k,S,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let c=Oh(s=re(s))?s:re(s&&s.provide);const h=function $0(i,s,a){return G0(i)?_l(void 0,i.useValue):_l(H0(i),Nh)}(s);if(Oh(s)||!0!==s.multi)this.records.get(c);else{let y=this.records.get(c);y||(y=_l(void 0,Nh,!0),y.factory=()=>Vt(y.multi),this.records.set(c,y)),c=s,y.multi.push(s)}this.records.set(c,h)}hydrate(s,a){return a.value===Nh&&(a.value=B0,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ID(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=re(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Gp(i){const s=_n(i),a=null!==s?s.factory:gi(i);if(null!==a)return a;if(i instanceof Nn)throw new ke(204,!1);if(i instanceof Function)return function wD(i){const s=i.length;if(s>0)throw function to(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new ke(204,!1);const a=function vr(i){const s=i&&(i[ci]||i[jn]);if(s){const a=function wn(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ke(204,!1)}function H0(i,s,a){let l;if(Oh(i)){const c=re(i);return gi(c)||Gp(c)}if(G0(i))l=()=>re(i.useValue);else if(function lA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Vt(i.deps||[]));else if(function z0(i){return!(!i||!i.useExisting)}(i))l=()=>Ge(re(i.useExisting));else{const c=re(i&&(i.useClass||i.provide));if(!function W0(i){return!!i.deps}(i))return gi(c)||Gp(c);l=()=>new c(...Vt(i.deps))}return l}function _l(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function G0(i){return null!==i&&"object"==typeof i&&F in i}function Oh(i){return"function"==typeof i}let va=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Hp({name:""},l,a,"");{const h=null!==(c=a.name)&&void 0!==c?c:"";return Hp({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=ds,i.NULL=new U0,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>Ge(_a)}),i.__NG_ELEMENT_ID__=-1,i})();function ti(i,s){as(Sm(i)[1],mn())}function Go(i){let s=function Br(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(pi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ke(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const y=i;y.inputs=dy(i.inputs),y.declaredInputs=dy(i.declaredInputs),y.outputs=dy(i.outputs);const v=c.hostBindings;v&&SD(i,v);const I=c.viewQuery,T=c.contentQueries;if(I&&tE(i,I),T&&nE(i,T),he(i.inputs,c.inputs),he(i.declaredInputs,c.declaredInputs),he(i.outputs,c.outputs),pi(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let y=0;y<h.length;y++){const v=h[y];v&&v.ngInherit&&v(i),v===Go&&(a=!1)}}s=Object.getPrototypeOf(s)}!function AD(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=ca(c.hostAttrs,a=ca(a,c.hostAttrs))}}(l)}function dy(i){return i===an?{}:i===V?[]:i}function tE(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function nE(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,h)=>{s(l,c,h),a(l,c,h)}:s}function SD(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Fh=null;function gr(){if(!Fh){const i=Ft.Symbol;if(i&&i.iterator)Fh=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Fh=l)}}}return Fh}function Ar(i){return!!Lh(i)&&(Array.isArray(i)||!(i instanceof Map)&&gr()in i)}function Lh(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ni(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function _u(i,s,a,l){const c=Ne();return ni(c,Co(),s)&&(Lt(),Ho(Gn(),c,i,s,a,l)),_u}function vu(i,s,a,l){return ni(i,Co(),a)?s+fe(a)+l:Mt}function El(i,s,a,l,c,h){const v=function Ea(i,s,a,l){const c=ni(i,s,a);return ni(i,s+1,l)||c}(i,function Vi(){return mt.lFrame.bindingIndex}(),a,c);return Yr(2),v?s+fe(a)+l+fe(c)+h:Mt}function dE(i,s,a,l,c,h,y,v){const I=Ne(),T=Lt(),S=i+20,k=T.firstCreatePass?function Vh(i,s,a,l,c,h,y,v,I){const T=s.consts,S=zc(s,i,4,y||null,Kr(T,v));kp(s,a,S,Kr(T,I)),as(s,S);const k=S.tViews=qc(2,S,l,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,T,I,s,a,l,c,h,y):T.data[S];Li(k,!1);const B=I[11].createComment("");Hc(T,I,B,k),mi(B,I),Vp(I,I[S]=R0(B,I,B,k)),Es(k)&&pu(T,I,k),null!=y&&yl(I,k,v)}function Uh(i){return function ss(i,s){return i[s]}(function dc(){return mt.lFrame.contextLView}(),20+i)}function $h(i,s=ft.Default){const a=Ne();return null===a?Ge(i,s):As(mn(),a,re(i),s)}function Il(){throw new Error("invalid")}function Cy(i,s,a){const l=Ne();return ni(l,Co(),s)&&Ki(Lt(),Gn(),l,i,s,l[11],a,!1),Cy}function Ty(i,s,a,l,c){const y=c?"class":"style";yD(i,a,s.inputs[y],y,l)}function Hh(i,s,a,l){const c=Ne(),h=Lt(),y=20+i,v=c[11],I=c[y]=Ai(v,s,function Kf(){return mt.lFrame.currentNamespace}()),T=h.firstCreatePass?function Dl(i,s,a,l,c,h,y){const v=s.consts,T=zc(s,i,2,c,Kr(v,h));return kp(s,a,T,Kr(v,y)),null!==T.attrs&&jp(T,T.attrs,!1),null!==T.mergedAttrs&&jp(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,h,c,0,s,a,l):h.data[y];Li(T,!0);const S=T.mergedAttrs;null!==S&&Ui(v,I,S);const k=T.classes;null!==k&&jm(v,I,k);const B=T.styles;return null!==B&&io(v,I,B),64!=(64&T.flags)&&Hc(h,c,I,T),0===function uc(){return mt.lFrame.elementDepthCount}()&&mi(I,c),function ra(){mt.lFrame.elementDepthCount++}(),Es(T)&&(pu(h,c,T),function Sh(i,s,a){if(Jl(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}(h,T,c)),null!==l&&yl(c,T),Hh}function bl(){let i=mn();zu()?function ia(){mt.lFrame.isParent=!1}():(i=i.parent,Li(i,!1));const s=i;!function lc(){mt.lFrame.elementDepthCount--}();const a=Lt();return a.firstCreatePass&&(as(a,i),Jl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Qf(i){return 0!=(16&i.flags)}(s)&&Ty(a,s,Ne(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function bn(i){return 0!=(32&i.flags)}(s)&&Ty(a,s,Ne(),s.stylesWithoutHost,!1),bl}function ng(i,s,a,l){return Hh(i,s,a,l),bl(),ng}function Gh(){return Ne()}function sg(i){return!!i&&"function"==typeof i.then}function og(i){return!!i&&"function"==typeof i.subscribe}const Ay=og;function ag(i,s,a,l){const c=Ne(),h=Lt(),y=mn();return function ug(i,s,a,l,c,h,y,v){const I=Es(l),S=i.firstCreatePass&&F0(i),k=s[8],B=k0(s);let Q=!0;if(3&l.type||v){const Ye=sr(l,s),it=v?v(Ye):Ye,Re=B.length,yt=v?Gt=>v(ln(Gt[l.index])):l.index;if(hn(a)){let Gt=null;if(!v&&I&&(Gt=function Sy(i,s,a,l){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const y=c[h];if(y===a&&c[h+1]===l){const v=s[7],I=c[h+2];return v.length>I?v[I]:null}"string"==typeof y&&(h+=2)}return null}(i,s,c,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=h,Gt.__ngLastListenerFn__=h,Q=!1;else{h=nd(l,s,k,h,!1);const rn=a.listen(it,c,h);B.push(h,rn),S&&S.push(c,yt,Re,Re+1)}}else h=nd(l,s,k,h,!0),it.addEventListener(c,h,y),B.push(h),S&&S.push(c,yt,Re,y)}else h=nd(l,s,k,h,!1);const Ie=l.outputs;let Be;if(Q&&null!==Ie&&(Be=Ie[c])){const Ye=Be.length;if(Ye)for(let it=0;it<Ye;it+=2){const li=s[Be[it]][Be[it+1]].subscribe(h),Pa=B.length;B.push(h,li),S&&S.push(c,l.index,Pa,-(Pa+1))}}}(h,c,c[11],y,i,s,!!a,l),ag}function lg(i,s,a,l){try{return!1!==a(l)}catch(c){return L0(i,c),!1}}function nd(i,s,a,l,c){return function h(y){if(y===Function)return l;const v=2&i.flags?or(i.index,s):s;0==(32&s[2])&&xh(v);let I=lg(s,0,l,y),T=h.__ngNextListenerFn__;for(;T;)I=lg(s,0,T,y)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function rd(i=1){return function eh(i){return(mt.lFrame.contextLView=function Zu(i,s){for(;i>0;)s=s[15],i--;return s}(i,mt.lFrame.contextLView))[8]}(i)}function id(i,s,a){return zh(i,"",s,"",a),id}function zh(i,s,a,l,c){const h=Ne(),y=vu(h,s,a,l);return y!==Mt&&Ki(Lt(),Gn(),h,i,y,h[11],c,!1),zh}function cg(i,s,a,l,c){const h=i[a+1],y=null===s;let v=l?ks(h):so(h),I=!1;for(;0!==v&&(!1===I||y);){const S=i[v+1];ud(i[v],s)&&(I=!0,i[v+1]=l?Tp(S):Dp(S)),v=l?ks(S):so(S)}I&&(i[a+1]=l?Dp(h):Tp(h))}function ud(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&fa(i,s)>=0}function ky(i,s){return function co(i,s,a,l){const c=Ne(),h=Lt(),y=Yr(2);h.firstUpdatePass&&function Fy(i,s,a,l){const c=i.data;if(null===c[a+1]){const h=c[hr()],y=function ba(i,s){return s>=i.expandoStartIndex}(i,a);(function pg(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!y&&(s=!1),s=function SE(i,s,a,l){const c=function Ao(i){const s=mt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=dd(a=Ly(null,i,s,a,l),s.attrs,l),h=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=Ly(c,i,s,a,l),null===h){let I=function ME(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==so(l))return i[ks(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Ly(null,i,s,I[1],l),I=dd(I,s.attrs,l),function cd(i,s,a,l){i[ks(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else h=function HD(i,s,a){let l;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)l=dd(l,i[h].hostAttrs,a);return dd(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(c,h,s,l),function Py(i,s,a,l,c,h){let y=h?s.classBindings:s.styleBindings,v=ks(y),I=so(y);i[l]=a;let S,T=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||fa(k,S)>0)&&(T=!0)}else S=a;if(c)if(0!==I){const B=ks(i[v+1]);i[l+1]=Dh(B,v),0!==B&&(i[B+1]=bp(i[B+1],l)),i[v+1]=function n0(i,s){return 131071&i|s<<17}(i[v+1],l)}else i[l+1]=Dh(v,0),0!==v&&(i[v+1]=bp(i[v+1],l)),v=l;else i[l+1]=Dh(I,0),0===v?v=l:i[I+1]=bp(i[I+1],l),I=l;T&&(i[l+1]=Dp(i[l+1])),cg(i,S,l,!0),cg(i,S,l,!1),function VD(i,s,a,l,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&fa(h,s)>=0&&(a[l+1]=Tp(a[l+1]))}(s,S,i,l,h),y=Dh(v,I),h?s.classBindings=y:s.styleBindings=y}(c,h,s,a,y,l)}}(h,i,y,l),s!==Mt&&ni(c,y,s)&&function hg(i,s,a,l,c,h,y,v){if(!(3&s.type))return;const I=i.data,T=I[v+1];Yh(function Cp(i){return 1==(1&i)}(T)?fg(I,s,a,c,so(T),y):void 0)||(Yh(h)||function t0(i){return 2==(2&i)}(T)&&(h=fg(I,null,a,c,v,y)),function fl(i,s,a,l,c){const h=hn(i);if(s)c?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:jo.DashCase;if(null==c)h?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const v="string"==typeof c&&c.endsWith("!important");v&&(c=c.slice(0,-10),y|=jo.Important),h?i.setStyle(a,l,c,y):a.style.setProperty(l,c,v?"important":"")}}}(l,y,Ws(hr(),a),c,h))}(h,h.data[hr()],c,c[11],i,c[y+1]=function RE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ae(hs(i)))),i}(s,a),l,y)}(i,s,null,!0),ky}function Ly(i,s,a,l,c){let h=null;const y=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<y&&(h=s[v],l=dd(l,h.hostAttrs,c),h!==i);)v++;return null!==i&&(a.directiveStylingLast=v),l}function dd(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const y=s[h];"number"==typeof y?c=y:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Lr(i,y,!!a||s[++h]))}return void 0===i?null:i}function fg(i,s,a,l,c,h){const y=null===s;let v;for(;c>0;){const I=i[c],T=Array.isArray(I),S=T?I[1]:I,k=null===S;let B=a[c+1];B===Mt&&(B=k?V:void 0);let Q=k?Ja(B,l):S===l?B:void 0;if(T&&!Yh(Q)&&(Q=Ja(I,l)),Yh(Q)&&(v=Q,y))return v;const Ie=i[c+1];c=y?ks(Ie):so(Ie)}if(null!==s){let I=h?s.residualClasses:s.residualStyles;null!=I&&(v=Ja(I,l))}return v}function Yh(i){return void 0!==i}function NE(i,s=""){const a=Ne(),l=Lt(),c=i+20,h=l.firstCreatePass?zc(l,c,1,s,null):l.data[c],y=a[c]=function mp(i,s){return hn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Hc(l,a,y,h),Li(h,!1)}function Uy(i){return gg("",i,""),Uy}function gg(i,s,a){const l=Ne(),c=vu(l,i,s,a);return c!==Mt&&oo(l,hr(),c),gg}function hd(i,s,a,l,c){const h=Ne(),y=El(h,i,s,a,l,c);return y!==Mt&&oo(h,hr(),y),hd}const Cu=void 0;var $E=["en",[["a","p"],["AM","PM"],Cu],[["AM","PM"],Cu,Cu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cu,"{1} 'at' {0}",Cu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wg(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Cl={};function Ig(i){const s=function HE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Zy(s);if(a)return a;const l=s.split("-")[0];if(a=Zy(l),a)return a;if("en"===l)return $E;throw new Error(`Missing locale data for the locale "${i}".`)}function qy(i){return Ig(i)[st.PluralCase]}function Zy(i){return i in Cl||(Cl[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),Cl[i]}var st=(()=>((st=st||{})[st.LocaleId=0]="LocaleId",st[st.DayPeriodsFormat=1]="DayPeriodsFormat",st[st.DayPeriodsStandalone=2]="DayPeriodsStandalone",st[st.DaysFormat=3]="DaysFormat",st[st.DaysStandalone=4]="DaysStandalone",st[st.MonthsFormat=5]="MonthsFormat",st[st.MonthsStandalone=6]="MonthsStandalone",st[st.Eras=7]="Eras",st[st.FirstDayOfWeek=8]="FirstDayOfWeek",st[st.WeekendRange=9]="WeekendRange",st[st.DateFormat=10]="DateFormat",st[st.TimeFormat=11]="TimeFormat",st[st.DateTimeFormat=12]="DateTimeFormat",st[st.NumberSymbols=13]="NumberSymbols",st[st.NumberFormats=14]="NumberFormats",st[st.CurrencyCode=15]="CurrencyCode",st[st.CurrencySymbol=16]="CurrencySymbol",st[st.CurrencyName=17]="CurrencyName",st[st.Currencies=18]="Currencies",st[st.Directionality=19]="Directionality",st[st.PluralCase=20]="PluralCase",st[st.ExtraData=21]="ExtraData",st))();const Dg="en-US";let zE=Dg;function Dn(i,s,a,l,c){if(i=re(i),Array.isArray(i))for(let h=0;h<i.length;h++)Dn(i[h],s,a,l,c);else{const h=Lt(),y=Ne();let v=Oh(i)?i:re(i.provide),I=H0(i);const T=mn(),S=1048575&T.providerIndexes,k=T.directiveStart,B=T.providerIndexes>>20;if(Oh(i)||!i.multi){const Q=new So(I,c,$h),Ie=Ma(v,s,c?S:S+B,k);-1===Ie?(cs(xo(T,y),h,v),Cd(h,i,s.length),s.push(v),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Q),y.push(Q)):(a[Ie]=Q,y[Ie]=Q)}else{const Q=Ma(v,s,S+B,k),Ie=Ma(v,s,S,S+B),Be=Q>=0&&a[Q],Ye=Ie>=0&&a[Ie];if(c&&!Ye||!c&&!Be){cs(xo(T,y),h,v);const it=function gb(i,s,a,l,c){const h=new So(i,a,$h);return h.multi=[],h.index=s,h.componentProviders=0,Mg(h,c,l&&!a),h}(c?of:xg,a.length,c,l,I);!c&&Ye&&(a[Ie].providerFactory=it),Cd(h,i,s.length,0),s.push(v),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(it),y.push(it)}else Cd(h,i,Q>-1?Q:Ie,Mg(a[c?Ie:Q],I,!c&&l));!c&&l&&Ye&&a[Ie].componentProviders++}}}function Cd(i,s,a,l){const c=Oh(s),h=function cA(i){return!!i.useClass}(s);if(c||h){const I=(h?re(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=T.indexOf(a);-1===S?T.push(a,[l,I]):T[S+1].push(l,I)}else T.push(a,I)}}}function Mg(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Ma(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function xg(i,s,a,l){return Rg(this.multi,[])}function of(i,s,a,l){const c=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=bi(a,a[1],this.providerFactory.index,l);h=v.slice(0,y),Rg(c,h);for(let I=y;I<v.length;I++)h.push(v[I])}else h=[],Rg(c,h);return h}function Rg(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Vs(i,s=[]){return a=>{a.providersResolver=(l,c)=>function tw(i,s,a){const l=Lt();if(l.firstCreatePass){const c=pi(i);Dn(a,l.data,l.blueprint,c,!0),Dn(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class er{}class rw{resolveComponentFactory(s){throw function Ng(i){const s=Error(`No component factory found for ${ae(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let xa=(()=>{class i{}return i.NULL=new rw,i})();function mb(){return Ol(mn(),Ne())}function Ol(i,s){return new ho(sr(i,s))}let ho=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=mb,i})();function yb(i){return i instanceof ho?i.nativeElement:i}class af{}let Pg=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function sw(){const i=Ne(),a=or(mn().index,i);return function iw(i){return i[11]}(wi(a)?a:i)}(),i})(),si=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class ow{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const aw=new ow("13.3.9"),o_={};function uf(i,s,a,l,c=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(ln(h)),fi(h))for(let v=10;v<h.length;v++){const I=h[v],T=I[1].firstChild;null!==T&&uf(I[1],I,T,l)}const y=a.type;if(8&y)uf(i,s,a.child,l);else if(32&y){const v=Pm(a,s);let I;for(;I=v();)l.push(I)}else if(16&y){const v=jv(s,a);if(Array.isArray(v))l.push(...v);else{const I=vh(s[16]);uf(I[1],I,v,l,!0)}}a=c?a.projectionNext:a.next}return l}class lf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return uf(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(fi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(_p(s,l),Lo(a,l))}this._attachedToViewContainer=!1}Ov(this._lView[1],this._lView)}onDestroy(s){Jm(this._lView[1],this._lView,null,s)}markForCheck(){xh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Up(i,s,a){const l=s[10];l.begin&&l.begin();try{Ah(i,s,i.template,a)}catch(c){throw L0(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lm(i,s){Eh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=s}}class _b extends lf{constructor(s){super(s),this._view=s}detectChanges(){O0(this._view)}checkNoChanges(){}get context(){return null}}class uw extends xa{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=ut(s);return new a_(a,this.ngModule)}}function lw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class a_ extends er{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Xv(i){return i.map(Jv).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return lw(this.componentDef.inputs)}get outputs(){return lw(this.componentDef.outputs)}create(s,a,l,c){const h=(c=c||this.ngModule)?function Td(i,s){return{get:(a,l,c)=>{const h=i.get(a,o_,c);return h!==o_||l===o_?h:s.get(a,l,c)}}}(s,c.injector):s,y=h.get(af,ta),v=h.get(si,null),I=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=l?function Mh(i,s,a){if(hn(i))return i.selectRootElement(s,a===jt.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Ai(y.createRenderer(null,this.componentDef),T,function Su(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(T)),k=this.componentDef.onPush?576:528,B=function eE(i,s){return{components:[],scheduler:i||eD,clean:sy,playerHandler:s||null,flags:0}}(),Q=qc(0,null,null,1,0,null,null,null,null,null),Ie=gl(null,Q,B,k,null,null,y,I,v,h);let Be,Ye;aa(Ie);try{const it=function J0(i,s,a,l,c,h){const y=a[1];a[20]=i;const I=zc(y,20,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(jp(I,T,!0),null!==i&&(Ui(c,i,T),null!==I.classes&&jm(c,i,I.classes),null!==I.styles&&io(c,i,I.styles)));const S=l.createRenderer(i,s),k=gl(a,g0(s),null,s.onPush?64:16,a[20],I,l,S,h||null,null);return y.firstCreatePass&&(cs(xo(I,a),y,s.type),D0(y,I),ry(I,a.length,1)),Vp(a,k),a[20]=k}(S,this.componentDef,Ie,y,I);if(S)if(l)Ui(I,S,["ng-version",aw.full]);else{const{attrs:Re,classes:yt}=function e0(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++l]):8===c&&a.push(h);else{if(!An(c))break;c=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Re&&Ui(I,S,Re),yt&&yt.length>0&&jm(I,S,yt.join(" "))}if(Ye=Rn(Q,20),void 0!==a){const Re=Ye.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const Gt=a[yt];Re.push(null!=Gt?Array.from(Gt):null)}}Be=function X0(i,s,a,l,c){const h=a[1],y=function ny(i,s,a){const l=mn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),T0(i,l,s,fu(i,s,1,null),a));const c=bi(s,i,l.directiveStart,l);mi(c,s);const h=sr(l,s);return h&&mi(h,s),c}(h,a,s);if(l.components.push(y),i[8]=y,c&&c.forEach(I=>I(y,s)),s.contentQueries){const I=mn();s.contentQueries(1,y,I.directiveStart)}const v=mn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ys(v.index),hD(a[1],v,0,v.directiveStart,v.directiveEnd,s),w0(s,y)),y}(it,this.componentDef,Ie,B,[ti]),ml(Q,Ie,null)}finally{Qr()}return new Ra(this.componentType,Be,Ol(Ye,Ie),Ie,Ye)}}class Ra extends class nw{}{constructor(s,a,l,c,h){super(),this.location=l,this._rootLView=c,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new _b(c),this.componentType=s}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class fo{}class hw{}const Mu=new Map;class l_ extends fo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uw(this);const l=Nt(s);this._bootstrapComponents=ro(l.bootstrap),this._r3Injector=uy(s,a,[{provide:fo,useValue:this},{provide:xa,useValue:this.componentFactoryResolver}],ae(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=va.THROW_IF_NOT_FOUND,l=ft.Default){return s===va||s===fo||s===_a?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class cf extends hw{constructor(s){super(),this.moduleType=s,null!==Nt(s)&&function Ad(i){const s=new Set;!function a(l){const c=Nt(l,!0),h=c.id;null!==h&&(function kg(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ae(s)} vs ${ae(s.name)}`)}(h,Mu.get(h),l),Mu.set(h,l));const y=ro(c.imports);for(const v of y)s.has(v)||(s.add(v),a(v))}(i)}(s)}create(s){return new l_(this.moduleType,s)}}function f_(i){return s=>{setTimeout(i,void 0,s)}}const Us=class Vg extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,h,y;let v=s,I=a||(()=>null),T=l;if(s&&"object"==typeof s){const k=s;v=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(h=k.error)||void 0===h?void 0:h.bind(k),T=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(I=f_(I),v&&(v=f_(v)),T&&(T=f_(T)));const S=super.subscribe({next:v,error:I,complete:T});return s instanceof L.w0&&s.add(S),S}};function Cb(){return this._results[gr()]()}class Ug{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=gr(),l=Ug.prototype;l[a]||(l[a]=Cb)}get changes(){return this._changes||(this._changes=new Us)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=br(s);(this._changesDetected=!function Ka(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],h=s[l];if(a&&(c=a(c),h=a(h)),h!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let xd=(()=>{class i{}return i.__NG_ELEMENT_ID__=ww,i})();const hf=xd,kl=class extends hf{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=gl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),ml(a,l,s),new lf(l)}};function ww(){return ff(mn(),Ne())}function ff(i,s){return 4&i.type?new kl(s,i,Ol(i,s)):null}let pf=(()=>{class i{}return i.__NG_ELEMENT_ID__=gf,i})();function gf(){return g_(mn(),Ne())}const p_=pf,Iw=class extends p_{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Ol(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const s=Jr(this._hostTNode,this._hostLView);if(wc(s)){const a=Bi(s,this._hostLView),l=fn(s);return new ji(a[1].data[l+8],a)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=dr(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,h){const y=s&&!function Fo(i){return"function"==typeof i}(s);let v;if(y)v=a;else{const k=a||{};v=k.index,l=k.injector,c=k.projectableNodes,h=k.ngModuleRef}const I=y?s:new a_(ut(s)),T=l||this.parentInjector;if(!h&&null==I.ngModule){const B=(y?T:this.parentInjector).get(fo,null);B&&(h=B)}const S=I.create(T,c,void 0,h);return this.insert(S.hostView,v),S}insert(s,a){const l=s._lView,c=l[1];if(function Gu(i){return fi(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],B=new Iw(k,k[6],k[3]);B.detach(B.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function $c(i,s,a,l){const c=10+l,h=a.length;l>0&&(a[c-1][4]=s),l<h-10?(s[4]=a[c],Ya(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function iD(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const v=s[19];null!==v&&v.insertView(i),s[2]|=128}(c,l,y,h);const v=Ip(h,y),I=l[11],T=Ep(I,y[7]);return null!==T&&function Rv(i,s,a,l,c,h){l[0]=c,l[6]=s,Eh(i,l,a,1,c,h)}(c,y[6],I,l,T,v),s.attachToViewContainerRef(),Ya(Zt(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=dr(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=_p(this._lContainer,a);l&&(Lo(Zt(this._lContainer),a),Ov(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=_p(this._lContainer,a);return l&&null!=Lo(Zt(this._lContainer),a)?new lf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function dr(i){return i[8]}function Zt(i){return i[8]||(i[8]=[])}function g_(i,s){let a;const l=s[i.index];if(fi(l))a=l;else{let c;if(8&i.type)c=ln(l);else{const h=s[11];c=h.createComment("");const y=sr(i,s);cu(h,Ep(h,y),c,function oD(i,s){return hn(i)?i.nextSibling(s):s.nextSibling}(h,y),!1)}s[i.index]=a=R0(l,s,c,i),Vp(s,a)}return new Iw(a,i,s)}class Yi{constructor(s){this.queryList=s,this.matches=null}clone(){return new Yi(this.queryList)}setDirty(){this.queryList.setDirty()}}class m_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let h=0;h<l;h++){const y=a.getByIndex(h);c.push(this.queries[y.indexInDeclarationView].clone())}return new m_(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Cw(s,a).matches&&this.queries[a].setDirty()}}class Bg{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Fl{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,c);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new Fl(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class y_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new y_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=l[c];this.matchTNodeWithReadOption(s,a,Tb(a,h)),this.matchTNodeWithReadOption(s,a,Za(a,s,h,!1,!1))}else l===xd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Za(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===ho||c===pf||c===xd&&4&a.type)this.addMatch(a.index,-2);else{const h=Za(a,s,c,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Tb(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Ab(i,s,a,l){return-1===a?function pn(i,s){return 11&i.type?Ol(i,s):4&i.type?ff(i,s):null}(s,i):-2===a?function jg(i,s,a){return a===ho?Ol(s,i):a===xd?ff(s,i):a===pf?g_(s,i):void 0}(i,s,l):bi(i,i[1],a,s)}function Rd(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const h=i.data,y=a.matches,v=[];for(let I=0;I<y.length;I+=2){const T=y[I];v.push(T<0?null:Ab(s,h[T],y[I+1],a.metadata.read))}c.matches=v}return c.matches}function Ll(i,s,a,l){const c=i.queries.getByIndex(a),h=c.matches;if(null!==h){const y=Rd(i,s,c,a);for(let v=0;v<h.length;v+=2){const I=h[v];if(I>0)l.push(y[v/2]);else{const T=h[v+1],S=s[-I];for(let k=10;k<S.length;k++){const B=S[k];B[17]===B[3]&&Ll(B[1],B,T,l)}if(null!==S[9]){const k=S[9];for(let B=0;B<k.length;B++){const Q=k[B];Ll(Q[1],Q,T,l)}}}}}return l}function mf(i){const s=Ne(),a=Lt(),l=pc();gc(l+1);const c=Cw(a,l);if(i.dirty&&Io(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const h=c.crossesNgTemplate?Ll(a,s,l,[]):Rd(a,s,c,l);i.reset(h,yb),i.notifyOnChanges()}return!0}return!1}function __(i,s,a,l){const c=Lt();if(c.firstCreatePass){const h=mn();(function w_(i,s,a){null===i.queries&&(i.queries=new Fl),i.queries.track(new y_(s,a))})(c,new Bg(s,a,l),h.index),function Mb(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function E_(i,s,a){const l=new Ug(4==(4&a));Jm(i,s,l,l.destroy),null===s[19]&&(s[19]=new m_),s[19].queries.push(new Yi(l))}(c,Ne(),a)}function v_(){return function Sb(i,s){return i[19].queries[s].queryList}(Ne(),pc())}function Cw(i,s){return i.queries.getByIndex(s)}function wf(...i){}const x_=new Nn("Application Initializer");let R_=(()=>{class i{constructor(a){this.appInits=a,this.resolve=wf,this.reject=wf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(sg(h))a.push(h);else if(Ay(h)){const y=new Promise((v,I)=>{h.subscribe({complete:v,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ge(x_,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const N_=new Nn("AppId",{providedIn:"root",factory:function O_(){return`${Pd()}${Pd()}${Pd()}`}});function Pd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const js=new Nn("Platform Initializer"),kb=new Nn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kd=new Nn("appBootstrapListener");let Fb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const zg=new Nn("LocaleId",{providedIn:"root",factory:()=>Dt(zg,ft.Optional|ft.SkipSelf)||function Bl(){return"undefined"!=typeof $localize&&$localize.locale||Dg}()}),P_=new Nn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class k_{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let F_=(()=>{class i{compileModuleSync(a){return new cf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),h=ro(Nt(a).declarations).reduce((y,v)=>{const I=ut(v);return I&&y.push(new a_(I)),y},[]);return new k_(l,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ub=(()=>Promise.resolve(0))();function Wg(i){"undefined"==typeof Zone?Ub.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ai{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Us(!1),this.onMicrotaskEmpty=new Us(!1),this.onStable=new Us(!1),this.onError=new Us(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function qg(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Gw(i){const s=()=>{!function If(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Df(i),i.isCheckStableRunning=!0,ku(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Df(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,h,y,v)=>{try{return Zg(i),a.invokeTask(c,h,y,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),L_(i)}},onInvoke:(a,l,c,h,y,v,I)=>{try{return Zg(i),a.invoke(c,h,y,v,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),L_(i)}},onHasTask:(a,l,c,h)=>{a.hasTask(c,h),l===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Df(i),ku(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,c,h)=>(a.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ai.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ai.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+c,s,jl,wf,wf);try{return h.runTask(y,a,l)}finally{h.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const jl={};function ku(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Df(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Zg(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function L_(i){i._nesting--,ku(i)}class Bb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Us,this.onMicrotaskEmpty=new Us,this.onStable=new Us,this.onError=new Us}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let V_=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ai.assertNotInAngularZone(),Wg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wg(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ge(ai))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),zw=(()=>{class i{constructor(){this._applications=new Map,Na.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Na.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class U_{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function bf(i){Na=i}let Na=new U_,$l=null;const B_=new Nn("AllowMultipleToken"),Ww=new Nn("PlatformOnDestroy");class Hl{constructor(s,a){this.name=s,this.token=a}}function j_(i,s,a=[]){const l=`Platform: ${s}`,c=new Nn(l);return(h=[])=>{let y=Ld();if(!y||y.injector.get(B_,!1)){const v=[...a,...h,{provide:c,useValue:!0}];i?i(v):function Gl(i){if($l&&!$l.get(B_,!1))throw new ke(400,"");$l=i;const s=i.get(Zw),a=i.get(js,null);a&&a.forEach(l=>l())}(function Hb(i=[],s){return va.create({name:s,providers:[{provide:$p,useValue:"platform"},{provide:Ww,useValue:()=>$l=null},...i]})}(v,l))}return function $b(i){const s=Ld();if(!s)throw new ke(401,"");return s}()}}function Ld(){var i;return null!==(i=null==$l?void 0:$l.get(Zw))&&void 0!==i?i:null}let Zw=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const v=function Kw(i,s){let a;return a="noop"===i?new Bb:("zone.js"===i?void 0:i)||new ai({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:ai,useValue:v}];return v.run(()=>{const T=va.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(T),k=S.injector.get(hp,null);if(!k)throw new ke(402,"");return v.runOutsideAngular(()=>{const B=v.onError.subscribe({next:Q=>{k.handleError(Q)}});S.onDestroy(()=>{Kg(this._modules,S),B.unsubscribe()})}),function Tf(i,s,a){try{const l=a();return sg(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,v,()=>{const B=S.injector.get(R_);return B.runInitializers(),B.donePromise.then(()=>(function Cg(i){Pt(i,"Expected localeId to be defined"),"string"==typeof i&&(zE=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(zg,Dg)||Dg),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=Af({},l);return function jb(i,s,a){const l=new cf(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(a){const l=a.injector.get(Vd);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Ww,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ge(va))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Af(i,s){return Array.isArray(s)?s.reduce(Af,i):Object.assign(Object.assign({},i),s)}let Vd=(()=>{class i{constructor(a,l,c,h){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new R.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new R.y(I=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ai.assertNotInAngularZone(),Wg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{ai.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{T.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(y,v.pipe((0,oe.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let c;c=a instanceof er?a:this._injector.get(xa).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const h=function Cf(i){return i.isBoundToModule}(c)?void 0:this._injector.get(fo),v=c.create(va.NULL,[],l||c.selector,h),I=v.location.nativeElement,T=v.injector.get(V_,null),S=T&&v.injector.get(zw);return T&&S&&S.registerApplication(I,T),v.onDestroy(()=>{this.detachView(v.hostView),Kg(this.components,v),S&&S.unregisterApplication(I)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Kg(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(kd,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ge(ai),Ge(va),Ge(hp),Ge(R_))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Kg(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Sf=!0,Yg=!1;function Qw(){return Yg=!0,Sf}function Fu(){if(Yg)throw new Error("Cannot enable prod mode after platform setup.");Sf=!1}let zb=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ud,i})();function Ud(i){return function Jw(i,s,a){if(Fa(i)&&!a){const l=or(i.index,s);return new lf(l,l)}return 47&i.type?new lf(s[16],s):null}(mn(),Ne(),16==(16&i))}class Rf{constructor(){}supports(s){return Ar(s)}create(s){return new Yb(s)}}const H_=(i,s)=>s;class Yb{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||H_}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,h=null;for(;a||l;){const y=!l||a&&a.currentIndex<z_(l,c,h)?a:l,v=z_(y,c,h),I=y.currentIndex;if(y===l)c--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{h||(h=[]);const T=v-c,S=I-c;if(T!=S){for(let B=0;B<T;B++){const Q=B<h.length?h[B]:h[B]=0,Ie=Q+B;S<=Ie&&Ie<T&&(h[B]=Q+1)}h[y.previousIndex]=S-T}}v!==I&&s(y,v,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ar(s))throw new ke(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],y=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,h,y,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,v),l=!0),a=a._next}else c=0,function sE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[gr()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,v=>{y=this._trackByFn(c,v),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,v,y,c)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,y,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,c)):s=this._addAfter(new G_(a,l),h,c),s}_verifyReinsertion(s,a,l,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new iI),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new iI),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class G_{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class iI{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new rI,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function z_(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class W_{constructor(){}supports(s){return s instanceof Map||Lh(s)}create(){return new q_}}class q_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Lh(s)))throw new ke(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const h=c._prev,y=c._next;return h&&(h._next=y),y&&(y._prev=h),c._next=null,c._prev=null,c}const l=new Qb(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Qb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Z_(){return new K_([new Rf])}let K_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Z_()),deps:[[i,new Xr,new Ur]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new ke(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Z_}),i})();function sI(){return new Vu([new W_])}let Vu=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||sI()),deps:[[i,new Xr,new Ur]]}}find(a){const l=this.factories.find(h=>h.supports(a));if(l)return l;throw new ke(901,"")}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:sI}),i})();const oI=j_(null,"core",[]);let aI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ge(Vd))},i.\u0275mod=ue({type:i}),i.\u0275inj=Wt({}),i})()},3942:(tt,De,O)=>{O.d(De,{Z:()=>ke});var f=O(2090),L=O(4859),R=O(9681),se=O(1877);class oe{constructor(fe,Ce){this._delegate=fe,this.firebase=Ce,(0,R._addComponent)(fe,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(fe,Ce=R._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const He=this._delegate.container.getProvider(fe);return!He.isInitialized()&&"EXPLICIT"===(null===(ze=He.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&He.initialize(),He.getImmediate({identifier:Ce})}_removeServiceInstance(fe,Ce=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Ce)}_addComponent(fe){(0,R._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,R._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function me(){const je=function ae(je){const fe={},Ce={__esModule:!0,initializeApp:function Se(X,ce={}){const we=R.initializeApp(X,ce);if((0,f.r3)(fe,we.name))return fe[we.name];const Z=new je(we,Ce);return fe[we.name]=Z,Z},app:He,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function Ee(X){const ce=X.name,we=ce.replace("-compat","");if(R._registerComponent(X)&&"PUBLIC"===X.type){const Z=(ee=He())=>{if("function"!=typeof ee[we])throw he.create("invalid-app-argument",{appName:ce});return ee[we]()};void 0!==X.serviceProps&&(0,f.ZB)(Z,X.serviceProps),Ce[we]=Z,je.prototype[we]=function(...ee){return this._getService.bind(this,ce).apply(this,X.multipleInstances?ee:[])}}return"PUBLIC"===X.type?Ce[we]:null},removeApp:function ze(X){delete fe[X]},useAsService:function qe(X,ce){return"serverAuth"===ce?null:ce},modularAPIs:R}};function He(X){if(!(0,f.r3)(fe,X=X||R._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:X});return fe[X]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Me(){return Object.keys(fe).map(X=>fe[X])}}),He.App=je,Ce}(oe);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function fe(Ce){(0,f.ZB)(je,Ce)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),je}(),U=new se.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=$;!function Ae(je){(0,R.registerVersion)("@firebase/app-compat","0.1.25",je)}()},9681:(tt,De,O)=>{O.r(De),O.d(De,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ci,_DEFAULT_ENTRY_NAME:()=>Pt,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Jt,_apps:()=>on,_clearComponents:()=>Ri,_components:()=>Sn,_getProvider:()=>Wt,_registerComponent:()=>kt,_removeServiceInstance:()=>_n,deleteApp:()=>ft,getApp:()=>jn,getApps:()=>Oi,initializeApp:()=>Ei,onLog:()=>qt,registerVersion:()=>gn,setLogLevel:()=>Er});var f=O(5861),L=O(4859),R=O(1877),se=O(2090),oe=O(8766);class ge{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function he(j){const J=j.getComponent();return"VERSION"===(null==J?void 0:J.type)}(Oe)){const Xe=Oe.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(Oe=>Oe).join(" ")}}const ae="@firebase/app",$=new R.Yd("@firebase/app"),Pt="[DEFAULT]",Ze={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},on=new Map,Sn=new Map;function cn(j,J){try{j.container.addComponent(J)}catch(Oe){$.debug(`Component ${J.name} failed to register with FirebaseApp ${j.name}`,Oe)}}function Jt(j,J){j.container.addOrOverwriteComponent(J)}function kt(j){const J=j.name;if(Sn.has(J))return $.debug(`There were multiple attempts to register component ${J}.`),!1;Sn.set(J,j);for(const Oe of on.values())cn(Oe,j);return!0}function Wt(j,J){const Oe=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),j.container.getProvider(J)}function _n(j,J,Oe=Pt){Wt(j,J).clearInstance(Oe)}function Ri(){Sn.clear()}const wn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ni{constructor(J,Oe,Xe){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const ci="9.8.1";function Ei(j,J={}){"object"!=typeof J&&(J={name:J});const Oe=Object.assign({name:Pt,automaticDataCollectionEnabled:!1},J),Xe=Oe.name;if("string"!=typeof Xe||!Xe)throw wn.create("bad-app-name",{appName:String(Xe)});const ht=on.get(Xe);if(ht){if((0,se.vZ)(j,ht.options)&&(0,se.vZ)(Oe,ht.config))return ht;throw wn.create("duplicate-app",{appName:Xe})}const At=new L.H0(Xe);for(const vt of Sn.values())At.addComponent(vt);const tn=new Ni(j,Oe,At);return on.set(Xe,tn),tn}function jn(j=Pt){const J=on.get(j);if(!J)throw wn.create("no-app",{appName:j});return J}function Oi(){return Array.from(on.values())}function ft(j){return xr.apply(this,arguments)}function xr(){return(xr=(0,f.Z)(function*(j){const J=j.name;on.has(J)&&(on.delete(J),yield Promise.all(j.container.getProviders().map(Oe=>Oe.delete())),j.isDeleted=!0)})).apply(this,arguments)}function gn(j,J,Oe){var Xe;let ht=null!==(Xe=Ze[j])&&void 0!==Xe?Xe:j;Oe&&(ht+=`-${Oe}`);const At=ht.match(/\s|\//),tn=J.match(/\s|\//);if(At||tn){const vt=[`Unable to register library "${ht}" with version "${J}":`];return At&&vt.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),At&&tn&&vt.push("and"),tn&&vt.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void $.warn(vt.join(" "))}kt(new L.wA(`${ht}-version`,()=>({library:ht,version:J}),"VERSION"))}function qt(j,J){if(null!==j&&"function"!=typeof j)throw wn.create("invalid-log-argument");(0,R.Am)(j,J)}function Er(j){(0,R.Ub)(j)}const vn="firebase-heartbeat-store";let rr=null;function _s(){return rr||(rr=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:(j,J)=>{0===J&&j.createObjectStore(vn)}}).catch(j=>{throw wn.create("storage-open",{originalErrorMessage:j.message})})),rr}function ct(){return(ct=(0,f.Z)(function*(j){try{return(yield _s()).transaction(vn).objectStore(vn).get(hi(j))}catch(J){throw wn.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function nt(j,J){return di.apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(j,J){try{const Xe=(yield _s()).transaction(vn,"readwrite");return yield Xe.objectStore(vn).put(J,hi(j)),Xe.done}catch(Oe){throw wn.create("storage-set",{originalErrorMessage:Oe.message})}})).apply(this,arguments)}function hi(j){return`${j.name}!${j.options.appId}`}class Mn{constructor(J){this.container=J,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new H(Oe),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var J=this;return(0,f.Z)(function*(){const Xe=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=an();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ht&&!J._heartbeatsCache.heartbeats.some(At=>At.date===ht))return J._heartbeatsCache.heartbeats.push({date:ht,agent:Xe}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(At=>{const tn=new Date(At.date).valueOf();return Date.now()-tn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,f.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Oe=an(),{heartbeatsToSend:Xe,unsentEntries:ht}=function V(j,J=1024){const Oe=[];let Xe=j.slice();for(const ht of j){const At=Oe.find(tn=>tn.agent===ht.agent);if(At){if(At.dates.push(ht.date),z(Oe)>J){At.dates.pop();break}}else if(Oe.push({agent:ht.agent,dates:[ht.date]}),z(Oe)>J){Oe.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:Xe}}(J._heartbeatsCache.heartbeats),At=(0,se.L)(JSON.stringify({version:2,heartbeats:Xe}));return J._heartbeatsCache.lastSentHeartbeatDate=Oe,ht.length>0?(J._heartbeatsCache.heartbeats=ht,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),At})()}}function an(){return(new Date).toISOString().substring(0,10)}class H{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,f.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function jt(j){return ct.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Oe=this;return(0,f.Z)(function*(){var Xe;if(yield Oe._canUseIndexedDBPromise){const At=yield Oe.read();return nt(Oe.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Oe=this;return(0,f.Z)(function*(){var Xe;if(yield Oe._canUseIndexedDBPromise){const At=yield Oe.read();return nt(Oe.app,{lastSentHeartbeatDate:null!==(Xe=J.lastSentHeartbeatDate)&&void 0!==Xe?Xe:At.lastSentHeartbeatDate,heartbeats:[...At.heartbeats,...J.heartbeats]})}})()}}function z(j){return(0,se.L)(JSON.stringify({version:2,heartbeats:j})).length}!function ve(j){kt(new L.wA("platform-logger",J=>new ge(J),"PRIVATE")),kt(new L.wA("heartbeat",J=>new Mn(J),"PRIVATE")),gn(ae,"0.7.24",j),gn(ae,"0.7.24","esm2017"),gn("fire-js","")}("")},4859:(tt,De,O)=>{O.d(De,{H0:()=>ae,wA:()=>R});var f=O(5861),L=O(2090);class R{constructor($,U,re){this.name=$,this.instanceFactory=U,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const se="[DEFAULT]";class oe{constructor($,U){this.name=$,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const U=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(U)){const re=new L.BH;if(this.instancesDeferred.set(U,re),this.isInitialized(U)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:U});We&&re.resolve(We)}catch(We){}}return this.instancesDeferred.get(U).promise}getImmediate($){var U;const re=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),We=null!==(U=null==$?void 0:$.optional)&&void 0!==U&&U;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Ae){if(We)return null;throw Ae}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function he(me){return"EAGER"===me.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:se})}catch(U){}for(const[U,re]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(U);try{const Ae=this.getOrInitializeService({instanceIdentifier:We});re.resolve(Ae)}catch(Ae){}}}}clearInstance($=se){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const U=Array.from($.instances.values());yield Promise.all([...U.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...U.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=se){return this.instances.has($)}getOptions($=se){return this.instancesOptions.get($)||{}}initialize($={}){const{options:U={}}=$,re=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:re,options:U});for(const[Ae,ke]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Ae)&&ke.resolve(We);return We}onInit($,U){var re;const We=this.normalizeInstanceIdentifier(U),Ae=null!==(re=this.onInitCallbacks.get(We))&&void 0!==re?re:new Set;Ae.add($),this.onInitCallbacks.set(We,Ae);const ke=this.instances.get(We);return ke&&$(ke,We),()=>{Ae.delete($)}}invokeOnInitCallbacks($,U){const re=this.onInitCallbacks.get(U);if(re)for(const We of re)try{We($,U)}catch(Ae){}}getOrInitializeService({instanceIdentifier:$,options:U={}}){let re=this.instances.get($);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(me=$,me===se?void 0:me),options:U}),this.instances.set($,re),this.instancesOptions.set($,U),this.invokeOnInitCallbacks(re,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,re)}catch(We){}var me;return re||null}normalizeInstanceIdentifier($=se){return this.component?this.component.multipleInstances?$:se:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor($){this.name=$,this.providers=new Map}addComponent($){const U=this.getProvider($.name);if(U.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);U.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const U=new oe($,this);return this.providers.set($,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(tt,De,O)=>{O.d(De,{Am:()=>me,Ub:()=>ae,Yd:()=>he,in:()=>L});const f=[];var L=(()=>{return($=L||(L={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",L;var $})();const R={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},se=L.INFO,oe={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},ge=($,U,...re)=>{if(U<$.logLevel)return;const We=(new Date).toISOString(),Ae=oe[U];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Ae](`[${We}]  ${$.name}:`,...re)};class he{constructor(U){this.name=U,this._logLevel=se,this._logHandler=ge,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in L))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?R[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...U),this._logHandler(this,L.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...U),this._logHandler(this,L.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,L.INFO,...U),this._logHandler(this,L.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,L.WARN,...U),this._logHandler(this,L.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...U),this._logHandler(this,L.ERROR,...U)}}function ae($){f.forEach(U=>{U.setLogLevel($)})}function me($,U){for(const re of f){let We=null;U&&U.level&&(We=R[U.level]),re.userLogHandler=null===$?null:(Ae,ke,...je)=>{const fe=je.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(ze){return null}}).filter(Ce=>Ce).join(" ");ke>=(null!=We?We:Ae.logLevel)&&$({level:L[ke].toLowerCase(),message:fe,args:je,type:Ae.name})}}}},8766:(tt,De,O)=>{O.d(De,{Lj:()=>Se,X3:()=>He});var f=O(5861);let R,se;const he=new WeakMap,ae=new WeakMap,me=new WeakMap,$=new WeakMap,U=new WeakMap;let Ae={get(ce,we,Z){if(ce instanceof IDBTransaction){if("done"===we)return ae.get(ce);if("objectStoreNames"===we)return ce.objectStoreNames||me.get(ce);if("store"===we)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Ce(ce[we])},set:(ce,we,Z)=>(ce[we]=Z,!0),has:(ce,we)=>ce instanceof IDBTransaction&&("done"===we||"store"===we)||we in ce};function fe(ce){return"function"==typeof ce?function je(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(...we){return ce.apply(ze(this),we),Ce(he.get(this))}:function(...we){return Ce(ce.apply(ze(this),we))}:function(we,...Z){const ee=ce.call(ze(this),we,...Z);return me.set(ee,we.sort?we.sort():[we]),Ce(ee)}}(ce):(ce instanceof IDBTransaction&&function We(ce){if(ae.has(ce))return;const we=new Promise((Z,ee)=>{const ie=()=>{ce.removeEventListener("complete",_e),ce.removeEventListener("error",le),ce.removeEventListener("abort",le)},_e=()=>{Z(),ie()},le=()=>{ee(ce.error||new DOMException("AbortError","AbortError")),ie()};ce.addEventListener("complete",_e),ce.addEventListener("error",le),ce.addEventListener("abort",le)});ae.set(ce,we)}(ce),((ce,we)=>we.some(Z=>ce instanceof Z))(ce,function oe(){return R||(R=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Ae):ce)}function Ce(ce){if(ce instanceof IDBRequest)return function re(ce){const we=new Promise((Z,ee)=>{const ie=()=>{ce.removeEventListener("success",_e),ce.removeEventListener("error",le)},_e=()=>{Z(Ce(ce.result)),ie()},le=()=>{ee(ce.error),ie()};ce.addEventListener("success",_e),ce.addEventListener("error",le)});return we.then(Z=>{Z instanceof IDBCursor&&he.set(Z,ce)}).catch(()=>{}),U.set(we,ce),we}(ce);if($.has(ce))return $.get(ce);const we=fe(ce);return we!==ce&&($.set(ce,we),U.set(we,ce)),we}const ze=ce=>U.get(ce);function He(ce,we,{blocked:Z,upgrade:ee,blocking:ie,terminated:_e}={}){const le=indexedDB.open(ce,we),Le=Ce(le);return ee&&le.addEventListener("upgradeneeded",dt=>{ee(Ce(le.result),dt.oldVersion,dt.newVersion,Ce(le.transaction))}),Z&&le.addEventListener("blocked",()=>Z()),Le.then(dt=>{_e&&dt.addEventListener("close",()=>_e()),ie&&dt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Le}function Se(ce,{blocked:we}={}){const Z=indexedDB.deleteDatabase(ce);return we&&Z.addEventListener("blocked",()=>we()),Ce(Z).then(()=>{})}const Me=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],qe=new Map;function X(ce,we){if(!(ce instanceof IDBDatabase)||we in ce||"string"!=typeof we)return;if(qe.get(we))return qe.get(we);const Z=we.replace(/FromIndex$/,""),ee=we!==Z,ie=Ee.includes(Z);if(!(Z in(ee?IDBIndex:IDBObjectStore).prototype)||!ie&&!Me.includes(Z))return;const _e=function(){var le=(0,f.Z)(function*(Le,...dt){const zt=this.transaction(Le,ie?"readwrite":"readonly");let Pt=zt.store;return ee&&(Pt=Pt.index(dt.shift())),(yield Promise.all([Pt[Z](...dt),ie&&zt.done]))[0]});return function(dt){return le.apply(this,arguments)}}();return qe.set(we,_e),_e}!function ke(ce){Ae=ce(Ae)}(ce=>LM(FM({},ce),{get:(we,Z,ee)=>X(we,Z)||ce.get(we,Z,ee),has:(we,Z)=>!!X(we,Z)||ce.has(we,Z)}))},5861:(tt,De,O)=>{function f(R,se,oe,ge,he,ae,me){try{var $=R[ae](me),U=$.value}catch(re){return void oe(re)}$.done?se(U):Promise.resolve(U).then(ge,he)}function L(R){return function(){var se=this,oe=arguments;return new Promise(function(ge,he){var ae=R.apply(se,oe);function me(U){f(ae,ge,he,me,$,"next",U)}function $(U){f(ae,ge,he,me,$,"throw",U)}me(void 0)})}}O.d(De,{Z:()=>L})}},tt=>{tt(tt.s=4795)}]);